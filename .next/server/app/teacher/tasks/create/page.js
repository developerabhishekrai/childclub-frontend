(()=>{var e={};e.id=3902,e.ids=[3902],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},33782:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var t=a(67096),l=a(16132),i=a(37284),r=a.n(i),n=a(32564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["teacher",{children:["tasks",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,61389)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\tasks\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3539)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\tasks\\create\\page.tsx"],m="/teacher/tasks/create/page",h={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/teacher/tasks/create/page",pathname:"/teacher/tasks/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33558:(e,s,a)=>{Promise.resolve().then(a.bind(a,70810))},70810:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>CreateAssignmentPage});var t=a(30784),l=a(9885),i=a(79803),r=a(39546),n=a(15441),c=a(517),d=a(67932),o=a(38212),m=a(64790),h=a(91672),x=a(11440),u=a.n(x),g=a(19300),p=a(57114),b=a(85525);function CreateAssignmentPage(){let e=(0,p.useRouter)(),[s,a]=(0,l.useState)({title:"",description:"",type:"",priority:"",dueDate:"",maxScore:"",instructions:"",rubric:"",tags:[],isRecurring:!1,recurringPattern:"",assignedClasses:[],assignedStudents:[],assignedTeachers:[]}),[x,j]=(0,l.useState)({}),[f,N]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!0),[C,k]=(0,l.useState)([]),[w,S]=(0,l.useState)([]),[P,_]=(0,l.useState)([]),A=s.assignedClasses.length>0?P.filter(e=>s.assignedClasses.includes(e.currentClassId)&&"active"===e.status):[];(0,l.useEffect)(()=>{fetchData()},[]);let fetchData=async()=>{try{let s=localStorage.getItem("token");if(!s){e.push("/teacher/login");return}let a={Authorization:`Bearer ${s}`,"Content-Type":"application/json"},[t,l,i]=await Promise.all([fetch(`${b.CT}/classes`,{headers:a}),fetch(`${b.CT}/teachers`,{headers:a}),fetch(`${b.CT}/students`,{headers:a})]);if(t.ok){let e=await t.json();k(e)}if(l.ok){let e=await l.json();S(e)}if(i.ok){let e=await i.json();_(e)}y(!1)}catch(e){console.error("Error fetching data:",e),y(!1),g.Z.fire({icon:"error",title:"Error",text:"Failed to load data. Please refresh the page."})}},handleInputChange=e=>{let{name:s,value:t,type:l}=e.target;if("checkbox"===l){let t=e.target.checked;"isRecurring"===s&&a(e=>({...e,[s]:t}))}else a(e=>({...e,[s]:t}));x[s]&&j(e=>({...e,[s]:""}))},handleTagChange=e=>{a(s=>({...s,tags:s.tags.includes(e)?s.tags.filter(s=>s!==e):[...s.tags,e]}))},handleClassChange=e=>{a(s=>{let a=s.assignedClasses.includes(e)?s.assignedClasses.filter(s=>s!==e):[...s.assignedClasses,e],t=P.filter(e=>a.includes(e.currentClassId)&&"active"===e.status).map(e=>e.id),l=s.assignedStudents.filter(e=>t.includes(e));return{...s,assignedClasses:a,assignedStudents:l}})},handleStudentChange=e=>{a(s=>({...s,assignedStudents:s.assignedStudents.includes(e)?s.assignedStudents.filter(s=>s!==e):[...s.assignedStudents,e]}))},validateForm=()=>{let e={};return s.title.trim()||(e.title="Assignment title is required"),s.description.trim()||(e.description="Description is required"),s.type.trim()||(e.type="Assignment type is required"),s.priority.trim()||(e.priority="Priority level is required"),s.dueDate.trim()||(e.dueDate="Due date is required"),s.maxScore.trim()||(e.maxScore="Maximum score is required"),0===s.assignedClasses.length&&0===s.assignedStudents.length&&(e.assignment="Must assign to at least one class or student"),j(e),0===Object.keys(e).length},handleSubmit=async a=>{if(a.preventDefault(),validateForm()){N(!0);try{let a=localStorage.getItem("token");if(!a){e.push("/teacher/login");return}let t=await fetch(`${b.CT}/assignments`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({...s,maxScore:parseInt(s.maxScore)})});if(t.ok)await g.Z.fire({icon:"success",title:"Success!",text:"Assignment created successfully!",confirmButtonColor:"#ffc107"}),e.push("/teacher/tasks");else{let e=await t.json();throw Error(e.message||"Failed to create assignment")}}catch(e){console.error("Error creating assignment:",e),await g.Z.fire({icon:"error",title:"Error",text:e.message||"Failed to create assignment. Please try again.",confirmButtonColor:"#dc3545"})}finally{N(!1)}}};return v?t.jsx("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"spinner-border text-warning",style:{width:"3rem",height:"3rem"},role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-3 text-muted",children:"Loading data..."})]})}):(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[t.jsx("div",{className:"bg-white shadow-sm border-bottom",children:t.jsx("div",{className:"container-fluid py-3",children:(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[t.jsx(u(),{href:"/teacher/tasks",className:"btn btn-outline-secondary",children:t.jsx(i.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[t.jsx("i",{className:"fas fa-tasks me-2 text-primary"}),"Create New Assignment"]}),t.jsx("p",{className:"text-muted mb-0",children:"Create a new assignment for your students"})]})]})})}),t.jsx("div",{className:"container-fluid py-4",children:t.jsx("div",{className:"row justify-content-center",children:t.jsx("div",{className:"col-lg-10 col-xl-8",children:t.jsx("div",{className:"card border-0 shadow",children:t.jsx("div",{className:"card-body p-4 p-lg-5",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:t.jsx(r.Z,{size:24,className:"text-warning"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Basic Assignment Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assignment Title ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"title",value:s.title,onChange:handleInputChange,className:`form-control form-control-lg ${x.title?"is-invalid":""}`,placeholder:"Enter assignment title"}),x.title&&t.jsx("div",{className:"invalid-feedback",children:x.title})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assignment Type ",t.jsx("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("select",{name:"type",value:s.type,onChange:handleInputChange,className:`form-select form-select-lg ${x.type?"is-invalid":""}`,children:[t.jsx("option",{value:"",children:"Select Type"}),["Homework","Project","Quiz","Test","Essay","Presentation","Lab Report","Research Paper","Group Work","Oral Exam"].map(e=>t.jsx("option",{value:e,children:e},e))]}),x.type&&t.jsx("div",{className:"invalid-feedback",children:x.type})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Priority Level ",t.jsx("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("select",{name:"priority",value:s.priority,onChange:handleInputChange,className:`form-select form-select-lg ${x.priority?"is-invalid":""}`,children:[t.jsx("option",{value:"",children:"Select Priority"}),["Low","Medium","High","Urgent"].map(e=>t.jsx("option",{value:e,children:e},e))]}),x.priority&&t.jsx("div",{className:"invalid-feedback",children:x.priority})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Description ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("textarea",{name:"description",value:s.description,onChange:handleInputChange,className:`form-control form-control-lg ${x.description?"is-invalid":""}`,rows:3,placeholder:"Detailed description of the assignment..."}),x.description&&t.jsx("div",{className:"invalid-feedback",children:x.description})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:t.jsx(n.Z,{size:24,className:"text-primary"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Due Date & Scoring"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Due Date ",t.jsx("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[t.jsx("span",{className:"input-group-text bg-light border-end-0",children:t.jsx(c.Z,{size:18,className:"text-muted"})}),t.jsx("input",{type:"datetime-local",name:"dueDate",value:s.dueDate,onChange:handleInputChange,className:`form-control border-start-0 ${x.dueDate?"is-invalid":""}`}),x.dueDate&&t.jsx("div",{className:"invalid-feedback",children:x.dueDate})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Maximum Score ",t.jsx("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[t.jsx("span",{className:"input-group-text bg-light border-end-0",children:t.jsx(d.Z,{size:18,className:"text-muted"})}),t.jsx("input",{type:"number",name:"maxScore",value:s.maxScore,onChange:handleInputChange,className:`form-control border-start-0 ${x.maxScore?"is-invalid":""}`,placeholder:"e.g., 100",min:"1",max:"1000"}),x.maxScore&&t.jsx("div",{className:"invalid-feedback",children:x.maxScore})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:t.jsx(r.Z,{size:24,className:"text-info"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Instructions & Rubric"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Instructions for Students"}),t.jsx("textarea",{name:"instructions",value:s.instructions,onChange:handleInputChange,className:"form-control form-control-lg",rows:4,placeholder:"Step-by-step instructions for completing the assignment..."})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Grading Rubric"}),t.jsx("textarea",{name:"rubric",value:s.rubric,onChange:handleInputChange,className:"form-control form-control-lg",rows:4,placeholder:"Detailed grading criteria and rubric..."})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-secondary bg-opacity-10 p-3 rounded-circle",children:t.jsx(o.Z,{size:24,className:"text-secondary"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Tags & Categories"})]}),t.jsx("div",{className:"row g-4",children:(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Select Tags"}),t.jsx("div",{className:"border rounded p-4",children:t.jsx("div",{className:"row g-3",children:["Mathematics","Science","English","History","Geography","Computer Science","Art","Music","Physical Education","Critical Thinking"].map(e=>t.jsx("div",{className:"col-md-4 col-sm-6",children:(0,t.jsxs)("div",{className:"form-check",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:`tag-${e}`,checked:s.tags.includes(e),onChange:()=>handleTagChange(e)}),t.jsx("label",{className:"form-check-label",htmlFor:`tag-${e}`,children:e})]})},e))})})]})})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:t.jsx(m.Z,{size:24,className:"text-success"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Recurring Options"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[t.jsx("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-check form-switch",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",name:"isRecurring",checked:s.isRecurring,onChange:handleInputChange,id:"recurringSwitch"}),t.jsx("label",{className:"form-check-label fw-semibold",htmlFor:"recurringSwitch",children:"Make this assignment recurring"})]})}),s.isRecurring&&(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Recurring Pattern"}),(0,t.jsxs)("select",{name:"recurringPattern",value:s.recurringPattern,onChange:handleInputChange,className:"form-select form-select-lg",children:[t.jsx("option",{value:"",children:"Select Pattern"}),["Daily","Weekly","Bi-weekly","Monthly","Quarterly"].map(e=>t.jsx("option",{value:e,children:e},e))]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[t.jsx("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:t.jsx(h.Z,{size:24,className:"text-warning"})}),t.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Assignment Targets"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Assign to Classes"}),t.jsx("div",{className:"border rounded p-4",children:0===C.length?t.jsx("p",{className:"text-muted mb-0",children:"No classes available"}):t.jsx("div",{className:"row g-3",children:C.map(e=>t.jsx("div",{className:"col-md-6 col-sm-12",children:(0,t.jsxs)("div",{className:"form-check",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:`class-${e.id}`,checked:s.assignedClasses.includes(e.id),onChange:()=>handleClassChange(e.id)}),(0,t.jsxs)("label",{className:"form-check-label",htmlFor:`class-${e.id}`,children:["Class ",e.name||`${e.grade}-${e.section}`]})]})},e.id))})})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assign to Specific Students",A.length>0&&(0,t.jsxs)("span",{className:"badge bg-primary ms-2",children:[A.length," Students"]})]}),t.jsx("div",{className:"border rounded p-3",children:0===s.assignedClasses.length?(0,t.jsxs)("p",{className:"text-muted mb-0 small",children:[t.jsx("i",{className:"fas fa-info-circle me-2"}),"Please select classes first"]}):0===A.length?(0,t.jsxs)("p",{className:"text-muted mb-0 small",children:[t.jsx("i",{className:"fas fa-users-slash me-2"}),"No students in selected classes"]}):(0,t.jsxs)(t.Fragment,{children:[A.length>5&&(0,t.jsxs)("div",{className:"form-check mb-3 pb-3 border-bottom",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:"select-all-students",checked:s.assignedStudents.length===A.length&&A.length>0,onChange:()=>{s.assignedStudents.length===A.length?a(e=>({...e,assignedStudents:[]})):a(e=>({...e,assignedStudents:A.map(e=>e.id)}))}}),(0,t.jsxs)("label",{className:"form-check-label fw-bold",htmlFor:"select-all-students",children:[t.jsx("i",{className:"fas fa-check-double me-2"}),"Select All (",A.length," students)"]})]}),t.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:A.map(e=>(0,t.jsxs)("div",{className:"form-check mb-2",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:`student-${e.id}`,checked:s.assignedStudents.includes(e.id),onChange:()=>handleStudentChange(e.id)}),(0,t.jsxs)("label",{className:"form-check-label",htmlFor:`student-${e.id}`,children:[e.firstName," ",e.lastName,e.className&&(0,t.jsxs)("span",{className:"text-muted small",children:[" (",e.className,")"]})]})]},e.id))})]})})]}),x.assignment&&t.jsx("div",{className:"col-12",children:t.jsx("div",{className:"text-danger small",children:x.assignment})})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,t.jsxs)(u(),{href:"/teacher/tasks",className:"btn btn-secondary btn-lg px-5",children:[t.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]}),t.jsx("button",{type:"submit",disabled:f,className:"btn btn-primary btn-lg px-5",children:f?(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Creating Assignment..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("i",{className:"fas fa-plus me-2"}),"Create Assignment"]})})]})]})})})})})})]})}},61389:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>c});var t=a(95153);let l=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\teacher\tasks\create\page.tsx`),{__esModule:i,$$typeof:r}=l,n=l.default,c=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[659,1336,9675,3528,9300,4073,3937,656,5525,4133],()=>__webpack_exec__(33782));module.exports=a})();