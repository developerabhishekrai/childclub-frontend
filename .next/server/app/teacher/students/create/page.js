(()=>{var e={};e.id=4686,e.ids=[4686],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},10125:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>i,routeModule:()=>u,tree:()=>d});var l=s(67096),r=s(16132),t=s(37284),n=s.n(t),o=s(32564),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(a,c);let d=["",{children:["teacher",{children:["students",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,62572)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\students\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3539)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],i=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\teacher\\students\\create\\page.tsx"],m="/teacher/students/create/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new l.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/teacher/students/create/page",pathname:"/teacher/students/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},51530:(e,a,s)=>{Promise.resolve().then(s.bind(s,67993))},67993:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>CreateStudentPage});var l=s(30784),r=s(9885),t=s(57114),n=s(79803),o=s(93680),c=s(87094),d=s(91672),i=s(87371),m=s(52995),h=s(11440),u=s.n(h),p=s(19300);s(99973);var x=s(85525);function CreateStudentPage(){let e=(0,t.useRouter)(),[a,s]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[b,g]=(0,r.useState)({firstName:"",lastName:"",email:"",mobile:"",password:"",dateOfBirth:"",gender:"",bloodGroup:"",address:"",city:"",state:"",country:"India",postalCode:"",parentName:"",parentPhone:"",parentEmail:"",emergencyContact:"",previousSchool:"",enrollNumber:""}),handleInputChange=e=>{let{name:a,value:s}=e.target;g(e=>({...e,[a]:s}))};(0,r.useEffect)(()=>{let fetchTeacherData=async()=>{try{let a=localStorage.getItem("token"),s=localStorage.getItem("userId");if(!a||!s){e.push("/teacher/login");return}let l=await fetch(`${x.CT}/teachers/${s}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!l.ok)throw Error("Failed to fetch teacher data");let r=await l.json();f(r)}catch(e){console.error("Error fetching teacher data:",e),p.Z.fire("Error","Failed to load teacher data","error")}};fetchTeacherData()},[e]);let validateForm=()=>h?b.firstName.trim()?b.lastName.trim()?b.email.trim()?!b.password||b.password.length<6?(p.Z.fire("Error","Password must be at least 6 characters","error"),!1):!!b.enrollNumber.trim()||(p.Z.fire("Error","Enrollment number is required","error"),!1):(p.Z.fire("Error","Email is required","error"),!1):(p.Z.fire("Error","Last name is required","error"),!1):(p.Z.fire("Error","First name is required","error"),!1):(p.Z.fire("Error","Please wait for teacher data to load","error"),!1),handleSubmit=async a=>{if(a.preventDefault(),validateForm()){s(!0);try{let a=localStorage.getItem("token"),s=localStorage.getItem("userId");if(!a||!s)throw Error("Authentication required");if(!h)throw Error("Teacher data not loaded");if(!h.schoolId)throw Error("School information not found");if(!h.classId)throw Error("You must be assigned to a class to add students");let l={firstName:b.firstName,lastName:b.lastName,email:b.email,mobile:b.mobile||void 0,password:b.password,dateOfBirth:b.dateOfBirth||void 0,gender:b.gender||void 0,bloodGroup:b.bloodGroup||void 0,address:b.address||void 0,city:b.city||void 0,state:b.state||void 0,country:b.country,postalCode:b.postalCode||void 0,parentName:b.parentName||void 0,parentPhone:b.parentPhone||void 0,parentEmail:b.parentEmail||void 0,emergencyContact:b.emergencyContact||void 0,previousSchool:b.previousSchool||void 0,enrollNumber:b.enrollNumber,schoolId:parseInt(h.schoolId),classId:h.classId};console.log("Creating student:",l);let r=await fetch(`${x.CT}/students`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to create student")}let t=await r.json();console.log("Student created:",t),await p.Z.fire({icon:"success",title:"Success!",text:"Student added successfully",confirmButtonText:"OK"}),e.push("/teacher/students")}catch(e){console.error("Error creating student:",e),p.Z.fire({icon:"error",title:"Error",text:e.message||"Failed to create student. Please try again."})}finally{s(!1)}}};return(0,l.jsxs)("div",{className:"min-vh-100 bg-light",children:[l.jsx("div",{className:"bg-white shadow-sm border-bottom",children:l.jsx("div",{className:"container-fluid py-3",children:(0,l.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[l.jsx(u(),{href:"/teacher/students",className:"btn btn-outline-secondary",children:l.jsx(n.Z,{size:20})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[l.jsx("i",{className:"fas fa-user-plus me-2 text-primary"}),"Add New Student"]}),l.jsx("p",{className:"text-muted mb-0",children:"Fill in the student details below"})]})]})})}),l.jsx("div",{className:"container-fluid py-4",children:l.jsx("div",{className:"row justify-content-center",children:l.jsx("div",{className:"col-lg-10 col-xl-8",children:l.jsx("form",{onSubmit:handleSubmit,children:l.jsx("div",{className:"card border-0 shadow",children:(0,l.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[l.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:l.jsx(o.Z,{size:24,className:"text-primary"})}),l.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Personal Information"})]}),(0,l.jsxs)("div",{className:"row g-4",children:[(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"text",name:"firstName",value:b.firstName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter first name",required:!0})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"text",name:"lastName",value:b.lastName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter last name",required:!0})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["Email Address ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"email",name:"email",value:b.email,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter email address",required:!0})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["Password ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"password",name:"password",value:b.password,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter password (min 6 characters)",required:!0,minLength:6})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Mobile Number"}),l.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter mobile number"})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["Enrollment Number ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"text",name:"enrollNumber",value:b.enrollNumber,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter enrollment number",required:!0})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsxs)("label",{className:"form-label fw-semibold",children:["Assigned Class ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"text",value:h?.className||"Loading...",className:"form-control form-control-lg",disabled:!0}),l.jsx("small",{className:"text-muted",children:"Students will be assigned to your assigned class"})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Date of Birth"}),l.jsx("input",{type:"date",name:"dateOfBirth",value:b.dateOfBirth,onChange:handleInputChange,className:"form-control form-control-lg"})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Gender"}),(0,l.jsxs)("select",{name:"gender",value:b.gender,onChange:handleInputChange,className:"form-select form-select-lg",children:[l.jsx("option",{value:"",children:"Select Gender"}),["Male","Female","Other"].map(e=>l.jsx("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Blood Group"}),(0,l.jsxs)("select",{name:"bloodGroup",value:b.bloodGroup,onChange:handleInputChange,className:"form-select form-select-lg",children:[l.jsx("option",{value:"",children:"Select Blood Group"}),["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(e=>l.jsx("option",{value:e,children:e},e))]})]})]})]}),(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[l.jsx("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:l.jsx(c.Z,{size:24,className:"text-info"})}),l.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Address Information"})]}),(0,l.jsxs)("div",{className:"row g-4",children:[(0,l.jsxs)("div",{className:"col-12",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Address"}),l.jsx("textarea",{name:"address",value:b.address,onChange:handleInputChange,className:"form-control form-control-lg",rows:3,placeholder:"Enter complete address"})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"City"}),l.jsx("input",{type:"text",name:"city",value:b.city,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter city"})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"State"}),l.jsx("input",{type:"text",name:"state",value:b.state,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter state"})]}),(0,l.jsxs)("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Country"}),l.jsx("input",{type:"text",name:"country",value:b.country,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter country"})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Postal Code"}),l.jsx("input",{type:"text",name:"postalCode",value:b.postalCode,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter postal code"})]})]})]}),(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[l.jsx("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:l.jsx(d.Z,{size:24,className:"text-success"})}),l.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Parent/Guardian Information"})]}),(0,l.jsxs)("div",{className:"row g-4",children:[(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Parent Name"}),l.jsx("input",{type:"text",name:"parentName",value:b.parentName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent/guardian name"})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Parent Phone"}),l.jsx("input",{type:"tel",name:"parentPhone",value:b.parentPhone,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent phone number"})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Parent Email"}),l.jsx("input",{type:"email",name:"parentEmail",value:b.parentEmail,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent email"})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Emergency Contact"}),l.jsx("input",{type:"tel",name:"emergencyContact",value:b.emergencyContact,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter emergency contact number"})]})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[l.jsx("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:l.jsx(i.Z,{size:24,className:"text-warning"})}),l.jsx("h3",{className:"mb-0 fw-bold text-dark",children:"Additional Information"})]}),l.jsx("div",{className:"row g-4",children:(0,l.jsxs)("div",{className:"col-12",children:[l.jsx("label",{className:"form-label fw-semibold",children:"Previous School"}),l.jsx("input",{type:"text",name:"previousSchool",value:b.previousSchool,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter previous school name"})]})})]}),(0,l.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,l.jsxs)(u(),{href:"/teacher/students",className:"btn btn-secondary btn-lg px-5",children:[l.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]}),l.jsx("button",{type:"submit",disabled:a,className:"btn btn-primary btn-lg px-5",children:a?(0,l.jsxs)(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx(m.Z,{size:18,className:"me-2"}),"Add Student"]})})]})]})})})})})})]})}},62572:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>n,__esModule:()=>t,default:()=>c});var l=s(95153);let r=(0,l.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\teacher\students\create\page.tsx`),{__esModule:t,$$typeof:n}=r,o=r.default,c=o}};var a=require("../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),s=a.X(0,[659,1336,9675,3528,9300,8734,656,5525,4133],()=>__webpack_exec__(10125));module.exports=s})();