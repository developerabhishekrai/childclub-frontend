(()=>{var s={};s.id=5567,s.ids=[5567],s.modules={55403:s=>{"use strict";s.exports=require("next/dist/client/components/request-async-storage.external")},94749:s=>{"use strict";s.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:s=>{"use strict";s.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:s=>{"use strict";s.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:s=>{"use strict";s.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:s=>{"use strict";s.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:s=>{"use strict";s.exports=require("url")},59494:(s,e,a)=>{"use strict";a.d(e,{Z:()=>c});var t=a(3528);let c=(0,t.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},52889:(s,e,a)=>{"use strict";a.r(e),a.d(e,{GlobalError:()=>b.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>n,routeModule:()=>x,tree:()=>r});var t=a(67096),c=a(16132),d=a(37284),b=a.n(d),l=a(32564),i={};for(let s in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(s)&&(i[s]=()=>l[s]);a.d(e,i);let r=["",{children:["student",{children:["submissions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,16664)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\student\\submissions\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,10703)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\student\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],n=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\student\\submissions\\page.tsx"],o="/student/submissions/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:c.x.APP_PAGE,page:"/student/submissions/page",pathname:"/student/submissions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:r}})},40034:(s,e,a)=>{Promise.resolve().then(a.bind(a,40637))},40637:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>StudentSubmissionsPage});var t=a(30784),c=a(23745),d=a.n(c),b=a(9885),l=a(11440),i=a.n(l),r=a(15441),n=a(39546),o=a(28626),m=a(92032),x=a(81057),j=a(59494),h=a(95595),f=a(80443),u=a(79803),N=a(69518),g=a(85574),p=a(19300),v=a(85525);function StudentSubmissionsPage(){let[s,e]=(0,b.useState)(""),[a,c]=(0,b.useState)("all"),[l,y]=(0,b.useState)([]),[w,S]=(0,b.useState)(!0),[k,C]=(0,b.useState)(null),[D,A]=(0,b.useState)(!1),[Z,_]=(0,b.useState)(!1),[E,z]=(0,b.useState)(""),[F,P]=(0,b.useState)([]),[I,T]=(0,b.useState)(!1);(0,b.useEffect)(()=>{fetchSubmissions()},[]);let fetchSubmissions=async()=>{try{let s=localStorage.getItem("token"),e=localStorage.getItem("userId"),a=localStorage.getItem("user");if(!e&&a)try{let s=JSON.parse(a);(e=s.id?.toString())&&localStorage.setItem("userId",e)}catch(s){console.error("Error parsing user:",s)}if(!e||!s){console.error("No user ID or token found"),S(!1);return}console.log("Fetching submissions for student userId:",e);let t=await fetch(`${v.CT}/submissions/student/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(t.ok){let s=await t.json();console.log("Fetched submissions:",s),y(s)}else throw Error("Failed to fetch submissions")}catch(s){console.error("Error fetching submissions:",s),p.Z.fire("Error","Failed to fetch submissions","error")}finally{S(!1)}},q=l.filter(e=>{let t=e.task?.title.toLowerCase().includes(s.toLowerCase())||e.content?.toLowerCase().includes(s.toLowerCase())||e.task?.description?.toLowerCase().includes(s.toLowerCase()),c="all"===a||e.status===a;return t&&c}),handleViewSubmission=s=>{C(s),A(!0)},handleEditSubmission=s=>{C(s),z(s.content||""),P(s.attachments||[]),_(!0)},handleFileUpload=async s=>{let e=s.target.files;if(e&&0!==e.length){if(F.length+e.length>5){p.Z.fire("Error","Maximum 5 files allowed","error");return}T(!0);try{let s=localStorage.getItem("token"),a=Array.from(e).map(async e=>{if(e.size>10485760)throw Error(`File ${e.name} exceeds 10MB limit`);let a=new FormData;a.append("file",e);let t=await fetch(`${v.CT}/uploads/submission`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:a});if(t.ok)return await t.json();throw Error("Upload failed")}),t=await Promise.all(a);P(s=>[...s,...t]),p.Z.fire("Success","Files uploaded successfully!","success")}catch(s){console.error("Error uploading files:",s),p.Z.fire("Error",s.message||"Failed to upload files","error")}finally{T(!1)}}},handleRemoveFile=s=>{P(e=>e.filter((e,a)=>a!==s))},handleUpdateSubmission=async()=>{if(k)try{let s=localStorage.getItem("token"),e={content:E,attachments:F,status:"submitted",submittedAt:new Date().toISOString()},a=await fetch(`${v.CT}/submissions/${k.id}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)p.Z.fire("Success","Submission updated successfully!","success"),_(!1),fetchSubmissions();else throw Error("Failed to update submission")}catch(s){console.error("Error updating submission:",s),p.Z.fire("Error","Failed to update submission","error")}},getStatusBadge=s=>{let e={draft:{color:"bg-warning",text:"Draft",icon:r.Z},submitted:{color:"bg-info",text:"Submitted",icon:n.Z},reviewed:{color:"bg-primary",text:"Reviewed",icon:o.Z},approved:{color:"bg-success",text:"Approved",icon:m.Z},rejected:{color:"bg-danger",text:"Rejected",icon:x.Z},resubmit:{color:"bg-warning",text:"Resubmit",icon:j.Z}},a=e[s]||e.draft,c=a.icon;return(0,t.jsxs)("span",{className:`badge ${a.color} d-inline-flex align-items-center gap-1`,children:[t.jsx(c,{size:14}),a.text]})},getFileIcon=s=>{if(!s)return t.jsx(h.Z,{size:20});let e=s.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(e||"")?t.jsx(f.Z,{size:20}):t.jsx(h.Z,{size:20})},formatDate=s=>s?new Date(s).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",getDaysFromDue=(s,e)=>{if(!s||!e)return null;let a=new Date(s).getTime(),t=new Date(e).getTime();return Math.ceil((t-a)/864e5)};return w?t.jsx("div",{className:"container-fluid vh-100 d-flex justify-content-center align-items-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("h4",{className:"text-white mt-3",children:"Loading Submissions..."})]})}):(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},className:"jsx-b24258754c1bd3fb",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb container-fluid p-4",children:[t.jsx("div",{className:"jsx-b24258754c1bd3fb row mb-4",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb col-12",children:t.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-b24258754c1bd3fb card border-0 shadow-lg",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body text-white p-4",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,t.jsxs)(i(),{href:"/student/dashboard",className:"btn btn-light btn-sm mb-3",children:[t.jsx(u.Z,{size:16,className:"me-2"}),"Back to Dashboard"]}),t.jsx("h1",{className:"jsx-b24258754c1bd3fb display-5 fw-bold mb-2",children:"\uD83D\uDCE4 My Submissions"}),t.jsx("p",{className:"jsx-b24258754c1bd3fb mb-0 opacity-75",children:"View and manage all your submitted work"})]})})})})})}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb row g-3 mb-4",children:[t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Total"}),t.jsx("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:l.length})]}),t.jsx("div",{className:"jsx-b24258754c1bd3fb bg-primary bg-opacity-10 rounded-circle p-3",children:t.jsx(n.Z,{className:"text-primary",size:24})})]})})})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Submitted"}),t.jsx("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:l.filter(s=>"submitted"===s.status).length})]}),t.jsx("div",{className:"jsx-b24258754c1bd3fb bg-info bg-opacity-10 rounded-circle p-3",children:t.jsx(r.Z,{className:"text-info",size:24})})]})})})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Approved"}),t.jsx("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:l.filter(s=>"approved"===s.status).length})]}),t.jsx("div",{className:"jsx-b24258754c1bd3fb bg-success bg-opacity-10 rounded-circle p-3",children:t.jsx(m.Z,{className:"text-success",size:24})})]})})})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Avg Score"}),t.jsx("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:l.filter(s=>s.grade).length>0?(l.reduce((s,e)=>s+(e.grade||0),0)/l.filter(s=>s.grade).length).toFixed(1):"N/A"})]}),t.jsx("div",{className:"jsx-b24258754c1bd3fb bg-warning bg-opacity-10 rounded-circle p-3",children:t.jsx(n.Z,{className:"text-warning",size:24})})]})})})})]}),t.jsx("div",{className:"jsx-b24258754c1bd3fb row mb-4",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb col-12",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb row g-3",children:[t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-6",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb input-group",children:[t.jsx("span",{className:"jsx-b24258754c1bd3fb input-group-text bg-white",children:t.jsx(N.Z,{size:20})}),t.jsx("input",{type:"text",placeholder:"Search by assignment title or content...",value:s,onChange:s=>e(s.target.value),className:"jsx-b24258754c1bd3fb form-control"})]})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,t.jsxs)("select",{value:a,onChange:s=>c(s.target.value),className:"jsx-b24258754c1bd3fb form-select",children:[t.jsx("option",{value:"all",className:"jsx-b24258754c1bd3fb",children:"All Status"}),t.jsx("option",{value:"draft",className:"jsx-b24258754c1bd3fb",children:"Draft"}),t.jsx("option",{value:"submitted",className:"jsx-b24258754c1bd3fb",children:"Submitted"}),t.jsx("option",{value:"reviewed",className:"jsx-b24258754c1bd3fb",children:"Reviewed"}),t.jsx("option",{value:"approved",className:"jsx-b24258754c1bd3fb",children:"Approved"}),t.jsx("option",{value:"rejected",className:"jsx-b24258754c1bd3fb",children:"Rejected"}),t.jsx("option",{value:"resubmit",className:"jsx-b24258754c1bd3fb",children:"Resubmit Required"})]})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb col-md-3 text-end",children:t.jsx("button",{onClick:()=>{e(""),c("all")},className:"jsx-b24258754c1bd3fb btn btn-primary",children:"Clear Filters"})})]})})})})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb row",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb col-12",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb card-body",children:0===q.length?(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb text-center py-5",children:[t.jsx(n.Z,{size:64,className:"text-muted mb-3"}),t.jsx("h5",{className:"jsx-b24258754c1bd3fb text-muted",children:"No submissions found"}),t.jsx("p",{className:"jsx-b24258754c1bd3fb text-muted",children:s||"all"!==a?"Try adjusting your filters":"You haven't submitted any assignments yet"})]}):t.jsx("div",{className:"jsx-b24258754c1bd3fb table-responsive",children:(0,t.jsxs)("table",{className:"jsx-b24258754c1bd3fb table table-hover",children:[t.jsx("thead",{className:"jsx-b24258754c1bd3fb",children:(0,t.jsxs)("tr",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Assignment"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Subject"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Status"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Submitted At"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Grade"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Attachments"}),t.jsx("th",{className:"jsx-b24258754c1bd3fb",children:"Actions"})]})}),t.jsx("tbody",{className:"jsx-b24258754c1bd3fb",children:q.map(s=>{let e=getDaysFromDue(s.task?.dueDate||"",s.submittedAt);return(0,t.jsxs)("tr",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb mb-1",children:s.task?.title||"Untitled"}),(0,t.jsxs)("small",{className:"jsx-b24258754c1bd3fb text-muted",children:["Due: ",formatDate(s.task?.dueDate||"")]}),null!==e&&e>0&&(0,t.jsxs)("span",{className:"jsx-b24258754c1bd3fb badge bg-danger ms-2",children:[e," day",e>1?"s":""," late"]})]})}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:t.jsx("span",{className:"jsx-b24258754c1bd3fb badge bg-secondary",children:s.task?.subject?.name||s.task?.type||"General"})}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:getStatusBadge(s.status)}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:t.jsx("small",{className:"jsx-b24258754c1bd3fb",children:formatDate(s.submittedAt)})}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:null!==s.grade?(0,t.jsxs)("strong",{className:"jsx-b24258754c1bd3fb text-success",children:[s.grade,"/",s.task?.maxScore||20]}):t.jsx("span",{className:"jsx-b24258754c1bd3fb text-muted",children:"Not graded"})}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:s.attachments&&s.attachments.length>0?(0,t.jsxs)("span",{className:"jsx-b24258754c1bd3fb badge bg-info",children:[s.attachments.length," file",s.attachments.length>1?"s":""]}):t.jsx("span",{className:"jsx-b24258754c1bd3fb text-muted",children:"None"})}),t.jsx("td",{className:"jsx-b24258754c1bd3fb",children:(0,t.jsxs)("div",{role:"group",className:"jsx-b24258754c1bd3fb btn-group",children:[t.jsx("button",{onClick:()=>handleViewSubmission(s),title:"View Details",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-primary",children:t.jsx(o.Z,{size:16})}),("draft"===s.status||"resubmit"===s.status)&&t.jsx("button",{onClick:()=>handleEditSubmission(s),title:"Edit Submission",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-warning",children:t.jsx(j.Z,{size:16})})]})})]},s.id)})})]})})})})})})]}),D&&k&&t.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"jsx-b24258754c1bd3fb modal show d-block",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb modal-dialog modal-lg modal-dialog-scrollable",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-content",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-header",children:[t.jsx("h5",{className:"jsx-b24258754c1bd3fb modal-title",children:"Submission Details"}),t.jsx("button",{type:"button",onClick:()=>A(!1),className:"jsx-b24258754c1bd3fb btn-close"})]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-body",children:[t.jsx("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-primary mb-3",children:"\uD83D\uDCDD Assignment Information"}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb row",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Title:"})," ",k.task?.title]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Type:"})," ",k.task?.type]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Due Date:"})," ",formatDate(k.task?.dueDate||"")]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Max Score:"})," ",k.task?.maxScore||20]})]}),k.task?.description&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mt-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Description:"}),t.jsx("p",{className:"jsx-b24258754c1bd3fb mb-0 mt-1",children:k.task.description})]})]})}),t.jsx("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-success mb-3",children:"\uD83D\uDCE4 Your Submission"}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb row mb-3",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Status:"})," ",getStatusBadge(k.status)]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Submitted:"})," ",formatDate(k.submittedAt)]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Attempts:"})," ",k.attempts]})]}),k.content&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Content:"}),t.jsx("div",{className:"jsx-b24258754c1bd3fb p-3 bg-light rounded mt-2",children:k.content})]}),k.attachments&&k.attachments.length>0&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Attachments:"}),t.jsx("div",{className:"jsx-b24258754c1bd3fb list-group mt-2",children:k.attachments.map((s,e)=>(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb list-group-item d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex align-items-center",children:[getFileIcon(s.filename),t.jsx("span",{className:"jsx-b24258754c1bd3fb ms-2",children:s.filename})]}),t.jsx("a",{href:`${v.CT}${s.path}`,target:"_blank",rel:"noopener noreferrer",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-primary",children:t.jsx(g.Z,{size:16})})]},e))})]})]})}),(null!==k.grade||k.feedback)&&t.jsx("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[t.jsx("h6",{className:"jsx-b24258754c1bd3fb text-info mb-3",children:"\uD83D\uDCCA Teacher's Feedback"}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb row",children:[null!==k.grade&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Grade:"})," ",(0,t.jsxs)("span",{className:"jsx-b24258754c1bd3fb fs-4 text-success",children:[k.grade,"/",k.task?.maxScore||20]})]}),k.reviewedAt&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Reviewed At:"})," ",formatDate(k.reviewedAt)]})]}),k.feedback&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mt-2",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Feedback:"}),t.jsx("div",{className:"jsx-b24258754c1bd3fb p-3 bg-light rounded mt-2",children:k.feedback})]}),k.reviewer&&t.jsx("div",{className:"jsx-b24258754c1bd3fb mt-2",children:(0,t.jsxs)("small",{className:"jsx-b24258754c1bd3fb text-muted",children:["Reviewed by: ",k.reviewer.firstName," ",k.reviewer.lastName]})})]})})]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-footer",children:[t.jsx("button",{type:"button",onClick:()=>A(!1),className:"jsx-b24258754c1bd3fb btn btn-secondary",children:"Close"}),("draft"===k.status||"resubmit"===k.status)&&(0,t.jsxs)("button",{type:"button",onClick:()=>{A(!1),handleEditSubmission(k)},className:"jsx-b24258754c1bd3fb btn btn-primary",children:[t.jsx(j.Z,{size:16,className:"me-2"}),"Edit Submission"]})]})]})})}),Z&&k&&t.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"jsx-b24258754c1bd3fb modal show d-block",children:t.jsx("div",{className:"jsx-b24258754c1bd3fb modal-dialog modal-lg modal-dialog-scrollable",children:(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-content",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-header",children:[(0,t.jsxs)("h5",{className:"jsx-b24258754c1bd3fb modal-title",children:["Edit Submission - ",k.task?.title]}),t.jsx("button",{type:"button",onClick:()=>_(!1),className:"jsx-b24258754c1bd3fb btn-close"})]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-body",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[t.jsx("label",{className:"jsx-b24258754c1bd3fb form-label",children:t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Content:"})}),t.jsx("textarea",{rows:6,value:E,onChange:s=>z(s.target.value),placeholder:"Enter your submission content here...",className:"jsx-b24258754c1bd3fb form-control"})]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[t.jsx("label",{className:"jsx-b24258754c1bd3fb form-label",children:t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Attachments:"})}),t.jsx("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx",onChange:handleFileUpload,disabled:I||F.length>=5,className:"jsx-b24258754c1bd3fb form-control"}),t.jsx("small",{className:"jsx-b24258754c1bd3fb text-muted",children:"Max 5 files, 10MB each. Supported: Images, PDF, Word, Excel"})]}),F.length>0&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[t.jsx("strong",{className:"jsx-b24258754c1bd3fb",children:"Uploaded Files:"}),t.jsx("div",{className:"jsx-b24258754c1bd3fb list-group mt-2",children:F.map((s,e)=>(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb list-group-item d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex align-items-center",children:[getFileIcon(s.filename),t.jsx("span",{className:"jsx-b24258754c1bd3fb ms-2",children:s.filename})]}),t.jsx("button",{onClick:()=>handleRemoveFile(e),className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-danger",children:"Remove"})]},e))})]}),I&&(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb text-center",children:[t.jsx("div",{role:"status",className:"jsx-b24258754c1bd3fb spinner-border text-primary",children:t.jsx("span",{className:"jsx-b24258754c1bd3fb visually-hidden",children:"Uploading..."})}),t.jsx("p",{className:"jsx-b24258754c1bd3fb mt-2",children:"Uploading files..."})]})]}),(0,t.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-footer",children:[t.jsx("button",{type:"button",onClick:()=>_(!1),className:"jsx-b24258754c1bd3fb btn btn-secondary",children:"Cancel"}),(0,t.jsxs)("button",{type:"button",onClick:handleUpdateSubmission,disabled:I,className:"jsx-b24258754c1bd3fb btn btn-primary",children:[t.jsx(m.Z,{size:16,className:"me-2"}),"Update & Submit"]})]})]})})}),t.jsx(d(),{id:"b24258754c1bd3fb",children:".modal.jsx-b24258754c1bd3fb{display:block;overflow-y:auto}.table.jsx-b24258754c1bd3fb th.jsx-b24258754c1bd3fb{background-color:#f8f9fa;font-weight:600}.card.jsx-b24258754c1bd3fb{-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease}.card.jsx-b24258754c1bd3fb:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}"})]})}},16664:(s,e,a)=>{"use strict";a.r(e),a.d(e,{$$typeof:()=>b,__esModule:()=>d,default:()=>i});var t=a(95153);let c=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\student\submissions\page.tsx`),{__esModule:d,$$typeof:b}=c,l=c.default,i=l}};var e=require("../../../webpack-runtime.js");e.C(s);var __webpack_exec__=s=>e(e.s=s),a=e.X(0,[659,1336,9675,3528,9300,1812,5621,656,5525,4171],()=>__webpack_exec__(52889));module.exports=a})();