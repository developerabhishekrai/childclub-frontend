(()=>{var e={};e.id=62,e.ids=[62],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},28809:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>b,pages:()=>c,routeModule:()=>x,tree:()=>o});var t=s(67096),l=s(16132),r=s(37284),d=s.n(r),n=s(32564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(a,i);let o=["",{children:["school-admin",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,66908)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\calendar\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\calendar\\page.tsx"],b="/school-admin/calendar/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/school-admin/calendar/page",pathname:"/school-admin/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10909:(e,a,s)=>{Promise.resolve().then(s.bind(s,10725))},10725:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>SchoolAdminCalendar});var t=s(30784),l=s(23745),r=s.n(l),d=s(9885),n=s(517),i=s(22385),o=s(51831),c=s(59494),b=s(26303),m=s(15441),x=s(87094);s(99973);var j=s(19300),h=s(85525);let u=[{value:"academic",label:"Academic",color:"#007bff"},{value:"event",label:"Event",color:"#17a2b8"},{value:"activity",label:"Activity",color:"#28a745"},{value:"exam",label:"Exam",color:"#dc3545"},{value:"holiday",label:"Holiday",color:"#6c757d"},{value:"meeting",label:"Meeting",color:"#ffc107"}],p=[{value:"low",label:"Low",badge:"secondary"},{value:"medium",label:"Medium",badge:"primary"},{value:"high",label:"High",badge:"danger"}];function SchoolAdminCalendar(){let[e,a]=(0,d.useState)([]),[s,l]=(0,d.useState)(!0),[v,f]=(0,d.useState)(!1),[y,N]=(0,d.useState)(!1),[g,w]=(0,d.useState)(null),[C,D]=(0,d.useState)("all"),[E,k]=(0,d.useState)({title:"",description:"",eventType:"event",startDate:"",endDate:"",allDay:!1,location:"",color:"#007bff",priority:"medium"});(0,d.useEffect)(()=>{fetchEvents()},[]);let fetchEvents=async()=>{try{l(!0);let e=localStorage.getItem("token");if(!e){j.Z.fire("Error","Please login again","error");return}let s=await fetch(`${h.CT}/calendar`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();a(e)}else console.error("Failed to fetch events")}catch(e){console.error("Error fetching events:",e)}finally{l(!1)}},handleSubmit=async e=>{e.preventDefault();try{let e=localStorage.getItem("token"),a=y&&g?`${h.CT}/calendar/${g.id}`:`${h.CT}/calendar`,s=await fetch(a,{method:y?"PATCH":"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(E)});if(s.ok)j.Z.fire({icon:"success",title:y?"Event Updated!":"Event Created!",text:`Calendar event has been ${y?"updated":"created"} successfully`,confirmButtonColor:"#28a745"}),fetchEvents(),handleCloseModal();else{let e=await s.json();j.Z.fire("Error",e.message||"Failed to save event","error")}}catch(e){console.error("Error saving event:",e),j.Z.fire("Error","Failed to save event","error")}},handleEdit=e=>{N(!0),w(e),k({title:e.title,description:e.description||"",eventType:e.eventType,startDate:e.startDate?new Date(e.startDate).toISOString().slice(0,16):"",endDate:e.endDate?new Date(e.endDate).toISOString().slice(0,16):"",allDay:1===e.allDay,location:e.location||"",color:e.color||"#007bff",priority:e.priority}),f(!0)},handleDelete=async e=>{let a=await j.Z.fire({title:"Are you sure?",text:"Do you want to delete this event?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"});if(a.isConfirmed)try{let a=localStorage.getItem("token"),s=await fetch(`${h.CT}/calendar/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});s.ok?(j.Z.fire("Deleted!","Event has been deleted.","success"),fetchEvents()):j.Z.fire("Error","Failed to delete event","error")}catch(e){console.error("Error deleting event:",e),j.Z.fire("Error","Failed to delete event","error")}},handleCloseModal=()=>{f(!1),N(!1),w(null),k({title:"",description:"",eventType:"event",startDate:"",endDate:"",allDay:!1,location:"",color:"#007bff",priority:"medium"})},formatDate=e=>{let a=new Date(e);return a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},S="all"===C?e:e.filter(e=>e.eventType===C);return(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 container-fluid py-4",children:[t.jsx(r(),{id:"a18bbde57805e211",children:".event-card.jsx-a18bbde57805e211{-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;border-left:4px solid;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem}.event-card.jsx-a18bbde57805e211:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.15);-moz-box-shadow:0 4px 12px rgba(0,0,0,.15);box-shadow:0 4px 12px rgba(0,0,0,.15)}.filter-btn.jsx-a18bbde57805e211{-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;-webkit-border-radius:2rem;-moz-border-radius:2rem;border-radius:2rem;padding:.5rem 1.5rem}.filter-btn.jsx-a18bbde57805e211:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.modal-content.jsx-a18bbde57805e211{-webkit-border-radius:1rem;-moz-border-radius:1rem;border-radius:1rem}.priority-badge.jsx-a18bbde57805e211{font-size:.75rem;padding:.25rem .75rem;-webkit-border-radius:1rem;-moz-border-radius:1rem;border-radius:1rem}"}),t.jsx("div",{className:"jsx-a18bbde57805e211 row mb-4",children:t.jsx("div",{className:"jsx-a18bbde57805e211 col-12",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211",children:[(0,t.jsxs)("h2",{className:"jsx-a18bbde57805e211 mb-1",children:[t.jsx(n.Z,{className:"me-2",size:32,style:{display:"inline"}}),"School Calendar"]}),t.jsx("p",{className:"jsx-a18bbde57805e211 text-muted",children:"Manage school events and activities"})]}),(0,t.jsxs)("button",{onClick:()=>{N(!1),w(null),f(!0)},className:"jsx-a18bbde57805e211 btn btn-primary d-flex align-items-center",children:[t.jsx(i.Z,{size:20,className:"me-2"}),"Add Event"]})]})})}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 row mb-4",children:[t.jsx("div",{className:"jsx-a18bbde57805e211 col-md-3",children:t.jsx("div",{className:"jsx-a18bbde57805e211 card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 card-body text-center",children:[t.jsx("h3",{className:"jsx-a18bbde57805e211 mb-0",children:e.length}),t.jsx("small",{className:"jsx-a18bbde57805e211 text-muted",children:"Total Events"})]})})}),t.jsx("div",{className:"jsx-a18bbde57805e211 col-md-3",children:t.jsx("div",{className:"jsx-a18bbde57805e211 card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 card-body text-center",children:[t.jsx("h3",{className:"jsx-a18bbde57805e211 mb-0",children:e.filter(e=>"exam"===e.eventType).length}),t.jsx("small",{className:"jsx-a18bbde57805e211 text-muted",children:"Exams"})]})})}),t.jsx("div",{className:"jsx-a18bbde57805e211 col-md-3",children:t.jsx("div",{className:"jsx-a18bbde57805e211 card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 card-body text-center",children:[t.jsx("h3",{className:"jsx-a18bbde57805e211 mb-0",children:e.filter(e=>"activity"===e.eventType).length}),t.jsx("small",{className:"jsx-a18bbde57805e211 text-muted",children:"Activities"})]})})}),t.jsx("div",{className:"jsx-a18bbde57805e211 col-md-3",children:t.jsx("div",{className:"jsx-a18bbde57805e211 card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 card-body text-center",children:[t.jsx("h3",{className:"jsx-a18bbde57805e211 mb-0",children:e.filter(e=>"holiday"===e.eventType).length}),t.jsx("small",{className:"jsx-a18bbde57805e211 text-muted",children:"Holidays"})]})})})]}),t.jsx("div",{className:"jsx-a18bbde57805e211 row mb-4",children:t.jsx("div",{className:"jsx-a18bbde57805e211 col-12",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex gap-2 flex-wrap",children:[t.jsx("button",{onClick:()=>D("all"),className:`jsx-a18bbde57805e211 filter-btn btn ${"all"===C?"btn-primary":"btn-outline-primary"}`,children:"All Events"}),u.map(e=>t.jsx("button",{onClick:()=>D(e.value),className:`jsx-a18bbde57805e211 filter-btn btn ${C===e.value?"btn-primary":"btn-outline-primary"}`,children:e.label},e.value))]})})}),t.jsx("div",{className:"jsx-a18bbde57805e211 row",children:t.jsx("div",{className:"jsx-a18bbde57805e211 col-12",children:s?t.jsx("div",{className:"jsx-a18bbde57805e211 text-center py-5",children:t.jsx("div",{role:"status",className:"jsx-a18bbde57805e211 spinner-border text-primary",children:t.jsx("span",{className:"jsx-a18bbde57805e211 visually-hidden",children:"Loading..."})})}):0===S.length?(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 alert alert-info",children:[t.jsx(o.Z,{className:"me-2",size:20,style:{display:"inline"}}),'No events found. Click "Add Event" to create your first event.']}):t.jsx("div",{className:"jsx-a18bbde57805e211 row",children:S.map(e=>t.jsx("div",{className:"jsx-a18bbde57805e211 col-md-6 col-lg-4 mb-3",children:t.jsx("div",{style:{borderLeftColor:e.color},className:"jsx-a18bbde57805e211 card event-card border-0 shadow-sm h-100",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 card-body",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex justify-content-between align-items-start mb-2",children:[t.jsx("h5",{className:"jsx-a18bbde57805e211 card-title mb-0",children:e.title}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex gap-1",children:[t.jsx("button",{onClick:()=>handleEdit(e),className:"jsx-a18bbde57805e211 btn btn-sm btn-outline-primary",children:t.jsx(c.Z,{size:16})}),t.jsx("button",{onClick:()=>handleDelete(e.id),className:"jsx-a18bbde57805e211 btn btn-sm btn-outline-danger",children:t.jsx(b.Z,{size:16})})]})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 mb-2",children:[t.jsx("span",{className:`jsx-a18bbde57805e211 badge bg-${p.find(a=>a.value===e.priority)?.badge} priority-badge me-2`,children:e.priority.toUpperCase()}),t.jsx("span",{className:"jsx-a18bbde57805e211 badge bg-secondary priority-badge",children:e.eventType.toUpperCase()})]}),e.description&&t.jsx("p",{className:"jsx-a18bbde57805e211 card-text text-muted small mb-2",children:e.description}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 mt-3",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex align-items-start mb-2",children:[t.jsx(m.Z,{size:16,className:"me-2 text-muted mt-1"}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 flex-grow-1",children:[(0,t.jsxs)("small",{className:"jsx-a18bbde57805e211 text-muted d-block",children:[t.jsx("strong",{className:"jsx-a18bbde57805e211",children:"Start:"})," ",formatDate(e.startDate)]}),e.endDate&&(0,t.jsxs)("small",{className:"jsx-a18bbde57805e211 text-muted d-block",children:[t.jsx("strong",{className:"jsx-a18bbde57805e211",children:"End:"})," ",formatDate(e.endDate)]})]})]}),e.location&&(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 d-flex align-items-center",children:[t.jsx(x.Z,{size:16,className:"me-2 text-muted"}),t.jsx("small",{className:"jsx-a18bbde57805e211 text-muted",children:e.location})]})]})]})})},e.id))})})}),v&&t.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"jsx-a18bbde57805e211 modal show d-block",children:t.jsx("div",{className:"jsx-a18bbde57805e211 modal-dialog modal-lg modal-dialog-centered",children:(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 modal-content",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 modal-header",children:[t.jsx("h5",{className:"jsx-a18bbde57805e211 modal-title",children:y?"Edit Event":"Add New Event"}),t.jsx("button",{type:"button",onClick:handleCloseModal,className:"jsx-a18bbde57805e211 btn-close"})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"jsx-a18bbde57805e211",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 modal-body",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 row",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Event Title *"}),t.jsx("input",{type:"text",value:E.title,onChange:e=>k({...E,title:e.target.value}),required:!0,className:"jsx-a18bbde57805e211 form-control"})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Event Type *"}),t.jsx("select",{value:E.eventType,onChange:e=>{let a=u.find(a=>a.value===e.target.value);k({...E,eventType:e.target.value,color:a?.color||"#007bff"})},required:!0,className:"jsx-a18bbde57805e211 form-select",children:u.map(e=>t.jsx("option",{value:e.value,className:"jsx-a18bbde57805e211",children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Description"}),t.jsx("textarea",{rows:3,value:E.description,onChange:e=>k({...E,description:e.target.value}),className:"jsx-a18bbde57805e211 form-control"})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 row",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Start Date & Time *"}),t.jsx("input",{type:"datetime-local",value:E.startDate,onChange:e=>k({...E,startDate:e.target.value}),required:!0,className:"jsx-a18bbde57805e211 form-control"})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"End Date & Time"}),t.jsx("input",{type:"datetime-local",value:E.endDate,onChange:e=>k({...E,endDate:e.target.value}),className:"jsx-a18bbde57805e211 form-control"})]})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 row",children:[(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Location"}),t.jsx("input",{type:"text",value:E.location,onChange:e=>k({...E,location:e.target.value}),placeholder:"e.g., School Hall",className:"jsx-a18bbde57805e211 form-control"})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 col-md-6 mb-3",children:[t.jsx("label",{className:"jsx-a18bbde57805e211 form-label",children:"Priority *"}),t.jsx("select",{value:E.priority,onChange:e=>k({...E,priority:e.target.value}),required:!0,className:"jsx-a18bbde57805e211 form-select",children:p.map(e=>t.jsx("option",{value:e.value,className:"jsx-a18bbde57805e211",children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 form-check mb-3",children:[t.jsx("input",{type:"checkbox",id:"allDay",checked:E.allDay,onChange:e=>k({...E,allDay:e.target.checked}),className:"jsx-a18bbde57805e211 form-check-input"}),t.jsx("label",{htmlFor:"allDay",className:"jsx-a18bbde57805e211 form-check-label",children:"All Day Event"})]})]}),(0,t.jsxs)("div",{className:"jsx-a18bbde57805e211 modal-footer",children:[t.jsx("button",{type:"button",onClick:handleCloseModal,className:"jsx-a18bbde57805e211 btn btn-secondary",children:"Cancel"}),t.jsx("button",{type:"submit",className:"jsx-a18bbde57805e211 btn btn-primary",children:y?"Update Event":"Create Event"})]})]})]})})})]})}},66908:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>d,__esModule:()=>r,default:()=>i});var t=s(95153);let l=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\calendar\page.tsx`),{__esModule:r,$$typeof:d}=l,n=l.default,i=n}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),s=a.X(0,[659,1336,9675,3528,4301,4154,9300,950,1037,656,5525,7565],()=>__webpack_exec__(28809));module.exports=s})();