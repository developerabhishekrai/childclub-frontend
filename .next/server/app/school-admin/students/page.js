(()=>{var e={};e.id=6187,e.ids=[6187],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},38846:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=t(67096),n=t(16132),l=t(37284),r=t.n(l),i=t(32564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["school-admin",{children:["students",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,95350)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\students\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\students\\page.tsx"],m="/school-admin/students/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/school-admin/students/page",pathname:"/school-admin/students",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},88113:(e,s,t)=>{Promise.resolve().then(t.bind(t,84409))},84409:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>StudentsPage});var a=t(30784),n=t(9885),l=t(79803),r=t(85574),i=t(22385),d=t(69518),c=t(12029),o=t(91672),m=t(28626),h=t(59494),u=t(26303),x=t(11440),p=t.n(x),j=t(85525);function StudentsPage(){let[e,s]=(0,n.useState)([]),[t,x]=(0,n.useState)([]),[g,b]=(0,n.useState)(!0),[N,f]=(0,n.useState)(""),[v,y]=(0,n.useState)("all"),[w,S]=(0,n.useState)("all");(0,n.useEffect)(()=>{fetchStudents()},[]);let fetchStudents=async()=>{try{b(!0);let e=localStorage.getItem("token");if(!e){console.error("No authentication token found");return}let t={Authorization:`Bearer ${e}`,"Content-Type":"application/json"},a=await fetch(`${j.CT}/students`,{headers:t});if(a.ok){let e=await a.json();console.log("Students fetched:",e),s(e),x(e)}else console.error("Failed to fetch students:",a.status,a.statusText),s([]),x([])}catch(e){console.error("Error fetching students:",e),s([]),x([])}finally{b(!1)}};(0,n.useEffect)(()=>{let s=e;N&&(s=s.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(N.toLowerCase())||e.email.toLowerCase().includes(N.toLowerCase())||e.mobile?.includes(N))),"all"!==v&&(s=s.filter(e=>e.status===v)),"all"!==w&&(s=s.filter(e=>e.currentClassId===parseInt(w))),x(s)},[e,N,v,w]);let handleDeleteStudent=async e=>{if(confirm("⚠️ Are you sure you want to delete this student? This action cannot be undone."))try{let t=localStorage.getItem("token");if(!t){alert("Authentication required. Please login again.");return}let a=await fetch(`${j.CT}/students/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(a.ok)s(s=>s.filter(s=>s.id!==e)),alert("✅ Student deleted successfully!"),fetchStudents();else{let e=await a.json().catch(()=>({}));alert(`❌ Failed to delete student: ${e.message||"Unknown error"}`)}}catch(e){console.error("Error deleting student:",e),alert("❌ Error deleting student. Please try again.")}},formatDate=e=>{let s=new Date(e);return s.toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})},getYearsSinceEnrollment=e=>{let s=new Date(e),t=new Date,a=t.getFullYear()-s.getFullYear();return 1===a?"1 year":`${a} years`},getInitials=(e,s)=>`${e.charAt(0)}${s.charAt(0)}`.toUpperCase(),getStatusBadgeClass=e=>{switch(e?.toLowerCase()){case"active":return"bg-success";case"inactive":default:return"bg-secondary";case"graduated":return"bg-primary";case"transferred":return"bg-info";case"suspended":return"bg-danger"}},formatStatus=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"Unknown";return g?a.jsx("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-3 text-muted",children:"Loading students..."})]})}):(0,a.jsxs)("div",{className:"min-vh-100 bg-light",children:[a.jsx("div",{className:"bg-white shadow-sm border-bottom",children:(0,a.jsxs)("div",{className:"container-fluid py-3",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[a.jsx(p(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary",children:a.jsx(l.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[a.jsx("i",{className:"fas fa-users me-2 text-primary"}),"Students Management"]}),a.jsx("p",{className:"text-muted mb-0",children:"Manage all students in your school"})]})]}),(0,a.jsxs)("div",{className:"ms-auto",children:[(0,a.jsxs)(p(),{href:"/school-admin/students/export",className:"btn btn-outline-primary me-2",children:[a.jsx(r.Z,{size:18,className:"me-2"}),"Export"]}),(0,a.jsxs)(p(),{href:"/school-admin/add-student",className:"btn btn-primary",children:[a.jsx(i.Z,{size:18,className:"me-2"}),"+ Add New Student"]})]})]})}),(0,a.jsxs)("div",{className:"container-fluid py-4",children:[(0,a.jsxs)("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-4",children:(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-white border-end-0",children:a.jsx(d.Z,{size:18,className:"text-muted"})}),a.jsx("input",{type:"text",className:"form-control border-start-0",placeholder:"Search students...",value:N,onChange:e=>f(e.target.value)})]})}),a.jsx("div",{className:"col-md-2",children:(0,a.jsxs)("select",{className:"form-select",value:v,onChange:e=>y(e.target.value),children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"graduated",children:"Graduated"}),a.jsx("option",{value:"transferred",children:"Transferred"}),a.jsx("option",{value:"suspended",children:"Suspended"})]})}),a.jsx("div",{className:"col-md-2",children:(0,a.jsxs)("select",{className:"form-select",value:w,onChange:e=>S(e.target.value),children:[a.jsx("option",{value:"all",children:"All Classes"}),a.jsx("option",{value:"1",children:"Class 1A"}),a.jsx("option",{value:"2",children:"Class 2A"}),a.jsx("option",{value:"3",children:"Class 3A"}),a.jsx("option",{value:"4",children:"Class 4A"}),a.jsx("option",{value:"5",children:"Class 5A"})]})}),a.jsx("div",{className:"col-md-2",children:(0,a.jsxs)("button",{className:"btn btn-outline-secondary w-100",children:[a.jsx(c.Z,{size:18,className:"me-2"}),"Filters"]})})]}),(0,a.jsxs)("div",{className:"card border-0 shadow",children:[a.jsx("div",{className:"card-header bg-white border-0 py-3",children:a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:(0,a.jsxs)("h5",{className:"mb-0 fw-bold text-dark",children:["Students List",(0,a.jsxs)("span",{className:"badge bg-primary ms-2",children:[t.length," students"]})]})})}),a.jsx("div",{className:"card-body p-0",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[a.jsx(o.Z,{size:48,className:"text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:"No students found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your search or filters"}),(0,a.jsxs)(p(),{href:"/school-admin/add-student",className:"btn btn-primary",children:[a.jsx(i.Z,{size:18,className:"me-2"}),"Add First Student"]})]}):a.jsx("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[a.jsx("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"border-0",children:"Student"}),a.jsx("th",{className:"border-0",children:"Contact"}),a.jsx("th",{className:"border-0",children:"Class"}),a.jsx("th",{className:"border-0",children:"Status"}),a.jsx("th",{className:"border-0",children:"Enrollment Date"}),a.jsx("th",{className:"border-0",children:"Guardian"}),a.jsx("th",{className:"border-0",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px"},children:a.jsx("span",{className:"text-primary fw-bold",children:getInitials(e.firstName,e.lastName)})}),a.jsx("div",{children:(0,a.jsxs)("div",{className:"fw-semibold",children:[e.firstName," ",e.lastName]})})]})}),(0,a.jsxs)("td",{children:[a.jsx("div",{className:"text-muted",children:e.email}),a.jsx("small",{className:"text-muted",children:e.mobile||"No mobile"})]}),a.jsx("td",{children:e.className?a.jsx("span",{className:"badge bg-primary",children:e.className}):a.jsx("span",{className:"badge bg-secondary",children:"No Class"})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${getStatusBadgeClass(e.status)}`,children:formatStatus(e.status)})}),(0,a.jsxs)("td",{children:[a.jsx("div",{children:formatDate(e.enrollmentDate)}),a.jsx("small",{className:"text-muted",children:getYearsSinceEnrollment(e.enrollmentDate)})]}),(0,a.jsxs)("td",{children:[a.jsx("div",{className:"text-muted",children:e.parentName||"Not specified"}),a.jsx("small",{className:"text-muted",children:e.parentEmail||"No email"})]}),a.jsx("td",{children:(0,a.jsxs)("div",{className:"btn-group",role:"group",children:[a.jsx(p(),{href:`/school-admin/students/${e.id}`,className:"btn btn-sm btn-outline-primary",children:a.jsx(m.Z,{size:16})}),a.jsx(p(),{href:`/school-admin/students/${e.id}/edit`,className:"btn btn-sm btn-outline-warning",children:a.jsx(h.Z,{size:16})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>handleDeleteStudent(e.id),children:a.jsx(u.Z,{size:16})})]})})]},e.id))})]})})})]}),t.length>0&&(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-muted",children:["Showing ",t.length," of ",e.length," students"]}),a.jsx("nav",{children:(0,a.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:"page-item disabled",children:a.jsx("a",{className:"page-link",href:"#",tabIndex:-1,children:"Previous"})}),a.jsx("li",{className:"page-item active",children:a.jsx("a",{className:"page-link",href:"#",children:"1"})}),a.jsx("li",{className:"page-item",children:a.jsx("a",{className:"page-link",href:"#",children:"2"})}),a.jsx("li",{className:"page-item",children:a.jsx("a",{className:"page-link",href:"#",children:"3"})}),a.jsx("li",{className:"page-item",children:a.jsx("a",{className:"page-link",href:"#",children:"Next"})})]})})]})]})]})}},95350:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>l,default:()=>d});var a=t(95153);let n=(0,a.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\students\page.tsx`),{__esModule:l,$$typeof:r}=n,i=n.default,d=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[659,1336,9675,3528,4301,4154,950,8553,656,5525,7565],()=>__webpack_exec__(38846));module.exports=t})();