(()=>{var e={};e.id=9068,e.ids=[9068],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},31427:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var o=t(67096),r=t(16132),a=t(37284),l=t.n(a),n=t(32564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(s,i);let c=["",{children:["school-admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,91668)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\login\\page.tsx"],m="/school-admin/login/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new o.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/school-admin/login/page",pathname:"/school-admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},90264:(e,s,t)=>{Promise.resolve().then(t.bind(t,85816))},85816:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>SchoolAdminLogin});var o=t(30784),r=t(9885);t(99973);var a=t(85525);function SchoolAdminLogin(){let[e,s]=(0,r.useState)({email:"",password:""}),[t,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),handleSubmit=async s=>{s.preventDefault(),i(!0),d("");try{let s=await fetch(`${a.CT}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,role:"school_admin"})});if(s.ok){let t=await s.json();if(console.log("=== Login Response ==="),console.log("Full response:",t),console.log("User data:",t.user),console.log("School ID:",t.user?.schoolId),!t.user){d("❌ Backend error: User data missing in response. Please contact admin."),console.error("❌ CRITICAL: data.user is missing from backend response!");return}if(!t.user.schoolId){d("❌ School ID missing. Your school may not be approved yet."),console.error("❌ WARNING: data.user.schoolId is missing!");return}(0,a.mB)(t.access_token),(0,a.c7)(t.user),localStorage.setItem("userRole","school_admin"),localStorage.setItem("userEmail",e.email),console.log("✅ Data stored in localStorage"),console.log("Token stored:",localStorage.getItem("token")?"Yes":"No"),console.log("User stored:",localStorage.getItem("user"));let o=localStorage.getItem("user");if(!o){d("❌ Failed to store user data. Browser storage may be disabled."),console.error("❌ CRITICAL: localStorage.setItem failed!");return}let r=JSON.parse(o);console.log("✅ Verification passed - School ID:",r.schoolId),setTimeout(()=>{console.log("\uD83D\uDD04 Redirecting to dashboard..."),window.location.href="/school-admin/dashboard"},100)}else{let e=await s.json();d(e.message||"Login failed")}}catch(e){d("Network error. Please try again.")}finally{i(!1)}},handleChange=t=>{s({...e,[t.target.name]:t.target.value})};return o.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center py-5",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:(0,o.jsxs)("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5",children:[(0,o.jsxs)("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"mb-3",children:o.jsx("span",{style:{fontSize:"4rem"},children:"\uD83C\uDFEB"})}),o.jsx("h2",{className:"text-white fw-bold mb-2",children:"School Admin Portal"}),o.jsx("p",{className:"text-white-50",children:"Access your school management dashboard"})]}),o.jsx("div",{className:"card border-0 shadow-lg",children:(0,o.jsxs)("div",{className:"card-body p-4 p-md-5",children:[c&&(0,o.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[o.jsx("strong",{children:"Error:"})," ",c,o.jsx("button",{type:"button",className:"btn-close",onClick:()=>d("")})]}),(0,o.jsxs)("form",{onSubmit:handleSubmit,children:[(0,o.jsxs)("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"email",className:"form-label fw-semibold text-dark",children:"\uD83D\uDCE7 Email Address"}),o.jsx("input",{type:"email",className:"form-control form-control-lg border-2",id:"email",name:"email",placeholder:"admin@school.com",value:e.email,onChange:handleChange,required:!0,style:{borderRadius:"10px",transition:"all 0.3s ease"}})]}),(0,o.jsxs)("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"password",className:"form-label fw-semibold text-dark",children:"\uD83D\uDD12 Password"}),(0,o.jsxs)("div",{className:"input-group",children:[o.jsx("input",{type:t?"text":"password",className:"form-control form-control-lg border-2",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:handleChange,required:!0,style:{borderRadius:"10px 0 0 10px",transition:"all 0.3s ease"}}),o.jsx("button",{className:"btn btn-outline-secondary border-2",type:"button",onClick:()=>l(!t),style:{borderRadius:"0 10px 10px 0"},children:t?"\uD83D\uDE48":"\uD83D\uDC41️"})]})]}),o.jsx("button",{type:"submit",className:"btn btn-lg w-100 mb-3 text-white fw-bold",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",border:"none"},disabled:n,children:n?(0,o.jsxs)(o.Fragment,{children:[o.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):"\uD83D\uDE80 Sign In to Dashboard"}),o.jsx("div",{className:"text-center",children:o.jsx("a",{href:"#",className:"text-decoration-none text-muted",children:"Forgot your password?"})})]})]})}),(0,o.jsxs)("div",{className:"text-center mt-4",children:[o.jsx("p",{className:"text-white mb-3",children:"Don't have a school account?"}),o.jsx("a",{href:"/school-admin/register",className:"btn btn-light btn-sm px-4 mb-3",style:{borderRadius:"20px"},children:"\uD83D\uDCDD Register Your School"}),o.jsx("p",{className:"text-white mb-2 mt-3",children:"Other Portals:"}),(0,o.jsxs)("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[o.jsx("a",{href:"/teacher/login",className:"btn btn-light btn-sm px-4",style:{borderRadius:"20px"},children:"\uD83D\uDC68‍\uD83C\uDFEB Teacher"}),o.jsx("a",{href:"/student/login",className:"btn btn-light btn-sm px-4",style:{borderRadius:"20px"},children:"\uD83C\uDF93 Student"})]})]}),o.jsx("div",{className:"text-center mt-3",children:o.jsx("a",{href:"/",className:"text-decoration-none text-white",children:o.jsx("small",{children:"← Back to Home"})})})]})})})})}},91668:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});var o=t(95153);let r=(0,o.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\login\page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default,i=n},99973:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[659,1336,9675,3528,4301,4154,656,5525,7565],()=>__webpack_exec__(31427));module.exports=t})();