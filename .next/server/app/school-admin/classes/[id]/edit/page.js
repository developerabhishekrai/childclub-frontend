(()=>{var e={};e.id=7586,e.ids=[7586],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},79803:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});var t=a(3528);let l=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},52995:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});var t=a(3528);let l=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6553:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>c.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d});var t=a(67096),l=a(16132),r=a(37284),c=a.n(r),n=a(32564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);a.d(s,i);let d=["",{children:["school-admin",{children:["classes",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,92753)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\classes\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\classes\\[id]\\edit\\page.tsx"],m="/school-admin/classes/[id]/edit/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/school-admin/classes/[id]/edit/page",pathname:"/school-admin/classes/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},93261:(e,s,a)=>{Promise.resolve().then(a.bind(a,6749))},6749:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>EditClassPage});var t=a(30784),l=a(9885),r=a(57114),c=a(11440),n=a.n(c),i=a(79803),d=a(52995),o=a(85525);function EditClassPage(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),a=e.id,[c,m]=(0,l.useState)(!0),[u,h]=(0,l.useState)(!1),[x,p]=(0,l.useState)(""),[j,b]=(0,l.useState)([]),[g,v]=(0,l.useState)(!0),[f,N]=(0,l.useState)({name:"",grade:"",section:"",academicYear:"",maxStudents:30,description:"",subjects:"",syllabus:"",rules:"",classTeacherId:"",startDate:"",endDate:"",status:"ACTIVE"});(0,l.useEffect)(()=>{let fetchTeachers=async()=>{try{let e=(0,o.hV)();if(!e)return;let s=await (0,o.R1)("/teachers",{token:e});b(s)}catch(e){console.error("Error fetching teachers:",e)}finally{v(!1)}};fetchTeachers()},[]),(0,l.useEffect)(()=>{let fetchClassDetails=async()=>{try{m(!0);let e=(0,o.hV)();if(!e)throw Error("Authentication required");let s=await (0,o.R1)(`/classes/${a}`,{token:e}),t="";s.subjects&&(t=Array.isArray(s.subjects)?s.subjects.join(", "):"object"==typeof s.subjects?Object.values(s.subjects).join(", "):s.subjects),N({name:s.name||"",grade:s.grade||"",section:s.section||"",academicYear:s.academicYear||"",maxStudents:s.maxStudents||30,description:s.description||"",subjects:t,syllabus:s.syllabus||"",rules:s.rules||"",classTeacherId:s.classTeacherId?s.classTeacherId.toString():"",startDate:s.startDate?s.startDate.split("T")[0]:"",endDate:s.endDate?s.endDate.split("T")[0]:"",status:s.status||"ACTIVE"})}catch(e){console.error("Error fetching class details:",e),p(e?.message||"Failed to fetch class details")}finally{m(!1)}};a&&fetchClassDetails()},[a]);let handleSubmit=async e=>{e.preventDefault();try{h(!0);let e=(0,o.hV)();if(!e)throw Error("Authentication required");let t={name:f.name,grade:f.grade,section:f.section,academicYear:f.academicYear,maxStudents:parseInt(f.maxStudents.toString()),description:f.description,syllabus:f.syllabus,rules:f.rules,status:f.status};if(f.subjects)try{t.subjects=JSON.parse(f.subjects)}catch{t.subjects=f.subjects.split(",").map(e=>e.trim())}f.startDate&&(t.startDate=new Date(f.startDate)),f.endDate&&(t.endDate=new Date(f.endDate)),f.classTeacherId&&(t.classTeacherId=parseInt(f.classTeacherId));let l=await fetch(`${o.CT}/classes/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!l.ok){let e=await l.json();throw Error(e.message||"Failed to update class")}alert("Class updated successfully!"),s.push("/school-admin/classes")}catch(e){console.error("Error updating class:",e),alert(e?.message||"Failed to update class")}finally{h(!1)}};return c?t.jsx("div",{className:"container-fluid",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-3 text-muted",children:"Loading class details..."})]})}):x?t.jsx("div",{className:"container-fluid",children:(0,t.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[t.jsx("h5",{className:"alert-heading",children:"Error"}),t.jsx("p",{children:x}),t.jsx("hr",{}),t.jsx(n(),{href:"/school-admin/classes",className:"btn btn-outline-danger",children:"Back to Classes"})]})}):(0,t.jsxs)("div",{className:"container-fluid",children:[t.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx(n(),{href:"/school-admin/classes",className:"btn btn-outline-secondary me-3",children:t.jsx(i.Z,{size:20})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"h3 mb-0",children:"Edit Class"}),t.jsx("p",{className:"text-muted mb-0",children:"Update class information"})]})]})}),t.jsx("div",{className:"row justify-content-center",children:t.jsx("div",{className:"col-lg-10",children:t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-body p-4",children:t.jsx("form",{onSubmit:handleSubmit,children:(0,t.jsxs)("div",{className:"row g-4",children:[t.jsx("div",{className:"col-12",children:t.jsx("h5",{className:"border-bottom pb-2 mb-3",children:"Basic Information"})}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label",children:["Class Name ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",value:f.name,onChange:e=>N({...f,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"col-md-3",children:[(0,t.jsxs)("label",{className:"form-label",children:["Grade ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",value:f.grade,onChange:e=>N({...f,grade:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"col-md-3",children:[(0,t.jsxs)("label",{className:"form-label",children:["Section ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",value:f.section,onChange:e=>N({...f,section:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label",children:"Academic Year"}),t.jsx("input",{type:"text",className:"form-control",placeholder:"e.g., 2024-2025",value:f.academicYear,onChange:e=>N({...f,academicYear:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label",children:["Max Students ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"number",className:"form-control",value:f.maxStudents,onChange:e=>N({...f,maxStudents:parseInt(e.target.value)}),required:!0})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label",children:"Description"}),t.jsx("textarea",{className:"form-control",rows:3,value:f.description,onChange:e=>N({...f,description:e.target.value})})]}),t.jsx("div",{className:"col-12 mt-4",children:t.jsx("h5",{className:"border-bottom pb-2 mb-3",children:"Academic Details"})}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label",children:"Subjects (comma-separated or JSON)"}),t.jsx("textarea",{className:"form-control",rows:2,placeholder:"e.g., Math, Science, English",value:f.subjects,onChange:e=>N({...f,subjects:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label",children:"Syllabus"}),t.jsx("textarea",{className:"form-control",rows:3,value:f.syllabus,onChange:e=>N({...f,syllabus:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label",children:"Rules"}),t.jsx("textarea",{className:"form-control",rows:3,value:f.rules,onChange:e=>N({...f,rules:e.target.value})})]}),t.jsx("div",{className:"col-12 mt-4",children:t.jsx("h5",{className:"border-bottom pb-2 mb-3",children:"Teacher & Schedule"})}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label",children:"Class Teacher"}),(0,t.jsxs)("select",{className:"form-select",value:f.classTeacherId,onChange:e=>N({...f,classTeacherId:e.target.value}),disabled:g,children:[t.jsx("option",{value:"",children:g?"Loading teachers...":"Select Class Teacher (Optional)"}),j.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label",children:"Status"}),(0,t.jsxs)("select",{className:"form-select",value:f.status,onChange:e=>N({...f,status:e.target.value}),children:[t.jsx("option",{value:"ACTIVE",children:"Active"}),t.jsx("option",{value:"INACTIVE",children:"Inactive"}),t.jsx("option",{value:"COMPLETED",children:"Completed"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label",children:"Start Date"}),t.jsx("input",{type:"date",className:"form-control",value:f.startDate,onChange:e=>N({...f,startDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label",children:"End Date"}),t.jsx("input",{type:"date",className:"form-control",value:f.endDate,onChange:e=>N({...f,endDate:e.target.value})})]}),t.jsx("div",{className:"col-12 mt-4",children:(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[t.jsx(n(),{href:"/school-admin/classes",className:"btn btn-secondary",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Updating..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{size:16,className:"me-2"}),"Update Class"]})})]})})]})})})})})})]})}},92753:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>c,__esModule:()=>r,default:()=>i});var t=a(95153);let l=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\classes\[id]\edit\page.tsx`),{__esModule:r,$$typeof:c}=l,n=l.default,i=n}};var s=require("../../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[659,1336,9675,3528,4301,4154,656,5525,7565],()=>__webpack_exec__(6553));module.exports=a})();