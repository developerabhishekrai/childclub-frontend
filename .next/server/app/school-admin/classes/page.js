(()=>{var e={};e.id=6335,e.ids=[6335],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},29481:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var t=a(67096),l=a(16132),c=a(37284),i=a.n(c),n=a(32564),r={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>n[e]);a.d(s,r);let d=["",{children:["school-admin",{children:["classes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4920)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\classes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\classes\\page.tsx"],m="/school-admin/classes/page",h={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/school-admin/classes/page",pathname:"/school-admin/classes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94350:(e,s,a)=>{Promise.resolve().then(a.bind(a,3850))},3850:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ClassesPage});var t=a(30784),l=a(9885),c=a(11440),i=a.n(c),n=a(79803),r=a(85574),d=a(22385),o=a(69518),m=a(12029),h=a(78937),x=a(15441),u=a(87094),j=a(517),p=a(91672),g=a(28626),b=a(59494),N=a(26303),v=a(85525),y=a(82925);function ClassesPage(){let[e,s]=(0,l.useState)(""),[a,c]=(0,l.useState)("all"),[f,C]=(0,l.useState)("all"),[w,S]=(0,l.useState)([]),[P,D]=(0,l.useState)(!0),[_,A]=(0,l.useState)(""),[E,$]=(0,l.useState)(null);(0,l.useEffect)(()=>{let fetchClasses=async()=>{try{D(!0),A("");let e=(0,v.hV)();if(!e)throw Error("Authentication required. Please login again.");let s=await (0,v.R1)("/classes",{token:e});S(s),console.log("Classes fetched:",s)}catch(e){console.error("Error fetching classes:",e),A(e?.message||"Failed to fetch classes")}finally{D(!1)}};fetchClasses()},[]);let[z]=(0,l.useState)([{id:"6",name:"Grade 6"},{id:"7",name:"Grade 7"},{id:"8",name:"Grade 8"},{id:"9",name:"Grade 9"},{id:"10",name:"Grade 10"},{id:"11",name:"Grade 11"},{id:"12",name:"Grade 12"}]),Z=w.filter(s=>{let t=s.name.toLowerCase().includes(e.toLowerCase())||s.description&&s.description.toLowerCase().includes(e.toLowerCase())||s.subjects&&s.subjects.some(s=>s.toLowerCase().includes(e.toLowerCase())),l="all"===a||s.status.toLowerCase()===a,c="all"===f||s.grade===f;return t&&l&&c}),getStatusBadge=e=>t.jsx("span",{className:{ACTIVE:"badge bg-success",INACTIVE:"badge bg-secondary",COMPLETED:"badge bg-info"}[e],children:e.toLowerCase()}),getCapacityBadge=e=>e>=90?t.jsx("span",{className:"badge bg-success",children:"Excellent"}):e>=80?t.jsx("span",{className:"badge bg-warning",children:"Good"}):e>=70?t.jsx("span",{className:"badge bg-info",children:"Fair"}):t.jsx("span",{className:"badge bg-danger",children:"Poor"}),getGradeBadge=e=>(0,t.jsxs)("span",{className:`badge ${{6:"bg-primary",7:"bg-info",8:"bg-success",9:"bg-warning",10:"bg-danger",11:"bg-secondary",12:"bg-dark"}[e]||"bg-secondary"}`,children:["Grade ",e]}),handleDeleteClass=async e=>{let s=w.find(s=>s.id===e),a=s?`${s.grade}-${s.section}`:"this class",t=await (0,y.i0)("Delete Class",`Are you sure you want to delete ${a}? This action cannot be undone and will remove all associated data.`,"Yes, Delete It!","Cancel");if(t.isConfirmed)try{$(e),(0,y.QP)("Deleting Class","Please wait while we delete the class...");let s=(0,v.hV)();if(!s){(0,y.$q)(),await (0,y.x2)("Authentication Error","Please login again to continue.");return}await (0,v.QW)(`/classes/${e}`,{token:s}),S(s=>s.filter(s=>s.id!==e)),(0,y.$q)(),await (0,y.s$)("Class Deleted Successfully! \uD83D\uDDD1ï¸",`${a} has been permanently deleted from the system.`)}catch(e){console.error("Error deleting class:",e),(0,y.$q)(),await (0,y.x2)("Failed to Delete Class",e?.message||"Failed to delete class. Please try again.")}finally{$(null)}},handleExportClasses=async()=>{try{(0,y.QP)("Exporting Classes","Preparing your data for download...");let e=Z.map(e=>[e.name,e.grade,e.section,e.academicYear||"N/A",e.currentStudents,e.maxStudents,e.status,e.classTeacher?`${e.classTeacher.firstName} ${e.classTeacher.lastName}`:"No teacher"]),s=["Class Name,Grade,Section,Academic Year,Current Students,Max Students,Status,Class Teacher",...e.map(e=>e.join(","))].join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),l=URL.createObjectURL(a);t.setAttribute("href",l),t.setAttribute("download",`classes_${new Date().toISOString().split("T")[0]}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),(0,y.$q)(),await (0,y.s$)("Export Successful! \uD83D\uDCCA",`Classes data has been exported successfully. The file contains ${Z.length} classes.`)}catch(e){console.error("Error exporting classes:",e),(0,y.$q)(),await (0,y.x2)("Export Failed","Failed to export classes. Please try again.")}},handleViewClass=e=>{window.location.href=`/school-admin/classes/${e}`},handleEditClass=e=>{window.location.href=`/school-admin/classes/${e}/edit`},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx(i(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary me-3",children:t.jsx(n.Z,{size:20})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"h3 mb-0",children:"Classes Management"}),t.jsx("p",{className:"text-muted mb-0",children:"Manage all classes and academic sections in your school"})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-outline-primary",onClick:handleExportClasses,children:[t.jsx(r.Z,{size:16,className:"me-2"}),"Export"]}),(0,t.jsxs)(i(),{href:"/school-admin/create-class",className:"btn btn-primary",children:[t.jsx(d.Z,{size:16,className:"me-2"}),"Create New Class"]})]})]}),t.jsx("div",{className:"card mb-4",children:t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[t.jsx("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx(o.Z,{size:16})}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Search classes, subjects...",value:e,onChange:e=>s(e.target.value)})]})}),t.jsx("div",{className:"col-md-3",children:(0,t.jsxs)("select",{className:"form-select",value:a,onChange:e=>c(e.target.value),children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"completed",children:"Completed"})]})}),t.jsx("div",{className:"col-md-3",children:(0,t.jsxs)("select",{className:"form-select",value:f,onChange:e=>C(e.target.value),children:[t.jsx("option",{value:"all",children:"All Grades"}),z.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})}),t.jsx("div",{className:"col-md-2",children:(0,t.jsxs)("button",{className:"btn btn-outline-secondary w-100",children:[t.jsx(m.Z,{size:16,className:"me-2"}),"Filters"]})})]})})}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("h5",{className:"mb-0",children:"Classes List"}),(0,t.jsxs)("span",{className:"badge bg-primary",children:[Z.length," classes"]})]})}),(0,t.jsxs)("div",{className:"card-body p-0",children:[P&&(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-3 text-muted",children:"Loading classes..."})]}),_&&!P&&(0,t.jsxs)("div",{className:"alert alert-danger m-4",role:"alert",children:[t.jsx("h5",{className:"alert-heading",children:"Error Loading Classes"}),t.jsx("p",{children:_}),t.jsx("hr",{}),t.jsx("button",{className:"btn btn-outline-danger",onClick:()=>window.location.reload(),children:"Try Again"})]}),!P&&!_&&t.jsx("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover mb-0",children:[t.jsx("thead",{className:"table-light",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Class Details"}),t.jsx("th",{children:"Academic Info"}),t.jsx("th",{children:"Students & Capacity"}),t.jsx("th",{children:"Schedule & Location"}),t.jsx("th",{children:"Performance"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:Z.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("div",{className:"avatar-sm bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",children:t.jsx(h.Z,{size:20,className:"text-info"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"fw-bold",children:e.name}),t.jsx("div",{className:"mt-1",children:getGradeBadge(e.grade)}),(0,t.jsxs)("small",{className:"text-muted",children:["Section ",e.section]})]})]})}),(0,t.jsxs)("td",{children:[t.jsx("div",{className:"mb-2",children:t.jsx("strong",{children:"Subjects:"})}),t.jsx("div",{className:"mb-2",children:e.subjects&&e.subjects.length>0?t.jsx("span",{className:"text-dark",children:Array.isArray(e.subjects)?e.subjects.join(", "):"object"==typeof e.subjects?Object.values(e.subjects).join(", "):e.subjects}):t.jsx("span",{className:"text-muted",children:"No subjects assigned"})}),t.jsx("div",{className:"mt-2",children:(0,t.jsxs)("small",{className:"text-muted",children:[t.jsx(h.Z,{size:12,className:"me-1"}),e.syllabus||"No syllabus"]})})]}),(0,t.jsxs)("td",{children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("strong",{children:[e.currentStudents,"/",e.maxStudents]})," students"]}),t.jsx("div",{className:"progress mb-2",style:{height:"8px"},children:t.jsx("div",{className:"progress-bar",style:{width:`${e.currentStudents/e.maxStudents*100}%`}})}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("small",{className:"text-muted",children:"Capacity"}),getCapacityBadge(e.currentStudents/e.maxStudents*100)]})]}),(0,t.jsxs)("td",{children:[t.jsx("div",{className:"mb-2",children:(0,t.jsxs)("small",{className:"text-muted",children:[t.jsx(x.Z,{size:12,className:"me-1"}),e.schedule||"No schedule"]})}),t.jsx("div",{className:"mb-2",children:(0,t.jsxs)("small",{className:"text-muted",children:[t.jsx(u.Z,{size:12,className:"me-1"}),e.roomNumber||"No room assigned"]})}),t.jsx("div",{children:(0,t.jsxs)("small",{className:"text-muted",children:[t.jsx(j.Z,{size:12,className:"me-1"}),e.startDate&&e.endDate?`${formatDate(e.startDate)} - ${formatDate(e.endDate)}`:"No dates set"]})})]}),(0,t.jsxs)("td",{children:[t.jsx("div",{className:"mb-2",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("strong",{className:"me-2",children:"Score:"}),t.jsx("span",{className:"badge bg-primary",children:"N/A"})]})}),t.jsx("div",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("strong",{className:"me-2",children:"Attendance:"}),t.jsx("span",{className:"badge bg-success",children:"N/A"})]})})]}),(0,t.jsxs)("td",{children:[getStatusBadge(e.status),t.jsx("div",{className:"mt-2",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx(p.Z,{size:14,className:"me-1 text-primary"}),t.jsx("span",{className:"fw-semibold text-dark",children:e.classTeacher?`${e.classTeacher.firstName} ${e.classTeacher.lastName}`:t.jsx("span",{className:"text-muted fst-italic",children:"No teacher assigned"})})]})})]}),t.jsx("td",{children:(0,t.jsxs)("div",{className:"btn-group",role:"group",children:[t.jsx("button",{className:"btn btn-sm btn-outline-primary",title:"View Details",onClick:()=>handleViewClass(e.id),children:t.jsx(g.Z,{size:14})}),t.jsx("button",{className:"btn btn-sm btn-outline-warning",title:"Edit Class",onClick:()=>handleEditClass(e.id),children:t.jsx(b.Z,{size:14})}),t.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Delete Class",onClick:()=>handleDeleteClass(e.id),disabled:E===e.id,children:E===e.id?t.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):t.jsx(N.Z,{size:14})})]})})]},e.id))})]})}),!P&&!_&&0===Z.length&&(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"text-muted mb-3",children:t.jsx(o.Z,{size:48})}),t.jsx("h5",{children:"No classes found"}),t.jsx("p",{className:"text-muted",children:"Try adjusting your search criteria or create a new class."}),(0,t.jsxs)(i(),{href:"/school-admin/create-class",className:"btn btn-primary",children:[t.jsx(d.Z,{size:16,className:"me-2"}),"Create New Class"]})]})]})]}),!P&&!_&&(0,t.jsxs)("div",{className:"row g-4 mt-4",children:[t.jsx("div",{className:"col-md-3",children:t.jsx("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[t.jsx("div",{className:"bg-success bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:t.jsx(h.Z,{size:24,className:"text-success"})}),t.jsx("h4",{className:"mb-1",children:w.filter(e=>"ACTIVE"===e.status).length}),t.jsx("p",{className:"text-muted mb-0",children:"Active Classes"})]})})}),t.jsx("div",{className:"col-md-3",children:t.jsx("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[t.jsx("div",{className:"bg-info bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:t.jsx(p.Z,{size:24,className:"text-info"})}),t.jsx("h4",{className:"mb-1",children:w.reduce((e,s)=>e+s.currentStudents,0)}),t.jsx("p",{className:"text-muted mb-0",children:"Total Students"})]})})}),t.jsx("div",{className:"col-md-3",children:t.jsx("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[t.jsx("div",{className:"bg-warning bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:t.jsx(j.Z,{size:24,className:"text-warning"})}),t.jsx("h4",{className:"mb-1",children:new Set(w.map(e=>e.grade)).size}),t.jsx("p",{className:"text-muted mb-0",children:"Grade Levels"})]})})}),t.jsx("div",{className:"col-md-3",children:t.jsx("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[t.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:t.jsx(o.Z,{size:24,className:"text-primary"})}),t.jsx("h4",{className:"mb-1",children:w.length}),t.jsx("p",{className:"text-muted mb-0",children:"Total Classes"})]})})})]}),!P&&!_&&Z.length>0&&(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,t.jsxs)("div",{className:"text-muted",children:["Showing ",Z.length," of ",w.length," classes"]}),t.jsx("nav",{"aria-label":"Classes pagination",children:(0,t.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[t.jsx("li",{className:"page-item disabled",children:t.jsx("span",{className:"page-link",children:"Previous"})}),t.jsx("li",{className:"page-item active",children:t.jsx("span",{className:"page-link",children:"1"})}),t.jsx("li",{className:"page-item",children:t.jsx("span",{className:"page-link",children:"2"})}),t.jsx("li",{className:"page-item",children:t.jsx("span",{className:"page-link",children:"3"})}),t.jsx("li",{className:"page-item",children:t.jsx("span",{className:"page-link",children:"Next"})})]})})]})]})}},4920:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>c,default:()=>r});var t=a(95153);let l=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\classes\page.tsx`),{__esModule:c,$$typeof:i}=l,n=l.default,r=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[659,1336,9675,3528,4301,4154,9300,950,5663,656,5525,7565,2925],()=>__webpack_exec__(29481));module.exports=a})();