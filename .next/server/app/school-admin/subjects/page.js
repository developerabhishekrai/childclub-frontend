(()=>{var e={};e.id=876,e.ids=[876],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},11213:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d});var t=a(67096),l=a(16132),r=a(37284),n=a.n(r),i=a(32564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let d=["",{children:["school-admin",{children:["subjects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,72664)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\subjects\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\subjects\\page.tsx"],m="/school-admin/subjects/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/school-admin/subjects/page",pathname:"/school-admin/subjects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50553:(e,s,a)=>{Promise.resolve().then(a.bind(a,82701))},82701:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>SubjectsPage});var t=a(30784),l=a(9885),r=a(79803),n=a(78937),i=a(22385),c=a(69518),d=a(12029),o=a(59494),m=a(26303),u=a(52995),h=a(11440),x=a.n(h),b=a(85525),p=a(82925);let j={name:"",code:"",description:"",gradeLevel:"",totalMarks:"100",passingMarks:"33",isElective:!1,color:"#3B82F6",icon:"\uD83D\uDCDA",status:"active"},g=["All Grades","Nursery","LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],v=["\uD83D\uDCDA","\uD83D\uDCD6","✏️","\uD83D\uDD2C","\uD83E\uDDEE","\uD83C\uDF0D","\uD83C\uDFA8","\uD83C\uDFB5","⚽","\uD83D\uDCBB","\uD83D\uDD2D","\uD83D\uDCD0","\uD83E\uDDEA","\uD83D\uDCDD","\uD83C\uDFAD","\uD83C\uDFC3"],f=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"];function SubjectsPage(){let[e,s]=(0,l.useState)([]),[a,h]=(0,l.useState)([]),[N,C]=(0,l.useState)(!0),[k,y]=(0,l.useState)(""),[w,D]=(0,l.useState)("all"),[S,M]=(0,l.useState)("all"),[E,P]=(0,l.useState)(!1),[_,A]=(0,l.useState)("create"),[F,L]=(0,l.useState)(null),[$,q]=(0,l.useState)(j),[I,z]=(0,l.useState)({}),[B,G]=(0,l.useState)(!1),fetchSubjects=async()=>{try{C(!0);let e=(0,b.hV)();if(!e){await (0,p.x2)("Authentication Required","Please login again.");return}let a=await (0,b.R1)("/subjects",{token:e});s(a),h(a)}catch(e){console.error("Error fetching subjects:",e),await (0,p.x2)("Failed to Load Subjects",e?.message||"Unable to fetch subjects.")}finally{C(!1)}};(0,l.useEffect)(()=>{fetchSubjects()},[]),(0,l.useEffect)(()=>{let s=[...e];k&&(s=s.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())||e.code.toLowerCase().includes(k.toLowerCase()))),"all"!==w&&(s=s.filter(e=>e.status===w)),"all"!==S&&(s="All Grades"===S?s.filter(e=>!e.gradeLevel||"All Grades"===e.gradeLevel):s.filter(e=>e.gradeLevel===S)),h(s)},[e,k,w,S]);let handleCreateClick=()=>{A("create"),L(null),q(j),z({}),P(!0)},handleEditClick=e=>{A("edit"),L(e),q({name:e.name,code:e.code,description:e.description||"",gradeLevel:e.gradeLevel||"",totalMarks:e.totalMarks?.toString()||"100",passingMarks:e.passingMarks?.toString()||"33",isElective:!!e.isElective,color:e.color||"#3B82F6",icon:e.icon||"\uD83D\uDCDA",status:e.status}),z({}),P(!0)},handleInputChange=e=>{let{name:s,value:a,type:t}=e.target,l=e.target.checked;q(e=>({...e,[s]:"checkbox"===t?l:a})),I[s]&&z(e=>({...e,[s]:""}))},validateForm=()=>{let e={};if($.name.trim()||(e.name="Subject name is required"),$.code.trim()||(e.code="Subject code is required"),$.totalMarks&&0>=parseInt($.totalMarks)&&(e.totalMarks="Total marks must be greater than 0"),$.passingMarks&&$.totalMarks){let s=parseInt($.passingMarks),a=parseInt($.totalMarks);s>a&&(e.passingMarks="Passing marks cannot be greater than total marks")}return z(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){G(!0);try{let e=(0,b.hV)();if(!e){await (0,p.x2)("Authentication Error","Please login again.");return}let s={name:$.name,code:$.code,description:$.description||void 0,gradeLevel:$.gradeLevel||void 0,totalMarks:$.totalMarks?parseInt($.totalMarks):void 0,passingMarks:$.passingMarks?parseInt($.passingMarks):void 0,isElective:$.isElective,color:$.color,icon:$.icon,status:$.status};(0,p.QP)("create"===_?"Creating Subject":"Updating Subject","Please wait..."),"create"===_?(await (0,b.sg)("/subjects",s,{token:e}),(0,p.$q)(),await (0,p.s$)("Subject Created!",`${$.name} has been added successfully.`)):F&&(await (0,b.pE)(`/subjects/${F.id}`,s,{token:e}),(0,p.$q)(),await (0,p.s$)("Subject Updated!",`${$.name} has been updated successfully.`)),P(!1),fetchSubjects()}catch(e){(0,p.$q)(),console.error("Error saving subject:",e),await (0,p.x2)("Failed to Save Subject",e?.message||"Unable to save subject. Please try again.")}finally{G(!1)}}},handleDelete=async e=>{let s=await (0,p.i0)("Delete Subject?",`Are you sure you want to delete "${e.name}"? This action cannot be undone.`);if(s)try{let s=(0,b.hV)();if(!s){await (0,p.x2)("Authentication Required","Please login again.");return}(0,p.QP)("Deleting Subject","Please wait..."),await (0,b.QW)(`/subjects/${e.id}`,{token:s}),(0,p.$q)(),await (0,p.s$)("Subject Deleted!",`${e.name} has been deleted successfully.`),fetchSubjects()}catch(e){(0,p.$q)(),console.error("Error deleting subject:",e),await (0,p.x2)("Failed to Delete Subject",e?.message||"Unable to delete subject.")}};return N?t.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-3 text-muted",children:"Loading subjects..."})]})}):(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[t.jsx("div",{className:"bg-white shadow-sm border-bottom",children:t.jsx("div",{className:"container-fluid py-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[t.jsx(x(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary",children:t.jsx(r.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[t.jsx(n.Z,{size:28,className:"me-2 text-primary"}),"Subjects Management"]}),t.jsx("p",{className:"text-muted mb-0",children:"Create and manage subjects for your school"})]})]}),(0,t.jsxs)("button",{onClick:handleCreateClick,className:"btn btn-primary btn-lg d-flex align-items-center gap-2",children:[t.jsx(i.Z,{size:20}),"Add New Subject"]})]})})}),(0,t.jsxs)("div",{className:"container-fluid py-4",children:[t.jsx("div",{className:"card border-0 shadow-sm mb-4",children:t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[t.jsx("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text bg-light border-0",children:t.jsx(c.Z,{size:18,className:"text-muted"})}),t.jsx("input",{type:"text",className:"form-control border-0",placeholder:"Search subjects...",value:k,onChange:e=>y(e.target.value)})]})}),t.jsx("div",{className:"col-md-3",children:(0,t.jsxs)("select",{className:"form-select",value:w,onChange:e=>D(e.target.value),children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})}),t.jsx("div",{className:"col-md-3",children:(0,t.jsxs)("select",{className:"form-select",value:S,onChange:e=>M(e.target.value),children:[t.jsx("option",{value:"all",children:"All Grades"}),g.map(e=>t.jsx("option",{value:e,children:e},e))]})}),t.jsx("div",{className:"col-md-2",children:(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 h-100",children:[t.jsx(d.Z,{size:18,className:"text-muted"}),(0,t.jsxs)("span",{className:"text-muted",children:[a.length," subject",1!==a.length?"s":""]})]})})]})})}),0===a.length?t.jsx("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center py-5",children:[t.jsx(n.Z,{size:64,className:"text-muted mb-3"}),t.jsx("h4",{className:"text-muted",children:"No subjects found"}),t.jsx("p",{className:"text-muted",children:k||"all"!==w||"all"!==S?"Try adjusting your filters":"Get started by creating your first subject"}),!k&&"all"===w&&"all"===S&&(0,t.jsxs)("button",{onClick:handleCreateClick,className:"btn btn-primary mt-3",children:[t.jsx(i.Z,{size:18,className:"me-2"}),"Create First Subject"]})]})}):t.jsx("div",{className:"row g-4",children:a.map(e=>t.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:t.jsx("div",{className:"card border-0 shadow-sm h-100",style:{borderLeft:`4px solid ${e.color||"#3B82F6"}`,transition:"transform 0.3s ease, box-shadow 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-5px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.12)"},children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[t.jsx("div",{className:"p-3 rounded-circle",style:{backgroundColor:`${e.color||"#3B82F6"}20`,fontSize:"2rem"},children:e.icon||"\uD83D\uDCDA"}),t.jsx("span",{className:`badge ${"active"===e.status?"bg-success":"bg-secondary"}`,children:e.status})]}),t.jsx("h5",{className:"fw-bold mb-2",children:e.name}),(0,t.jsxs)("p",{className:"text-muted small mb-2",children:["Code: ",e.code]}),e.description&&t.jsx("p",{className:"text-muted small mb-3",style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description}),(0,t.jsxs)("div",{className:"d-flex flex-wrap gap-2 mb-3",children:[e.gradeLevel&&(0,t.jsxs)("span",{className:"badge bg-light text-dark",children:["Grade: ",e.gradeLevel]}),e.isElective?t.jsx("span",{className:"badge bg-warning text-dark",children:"Elective"}):t.jsx("span",{className:"badge bg-info text-dark",children:"Core"}),e.totalMarks&&(0,t.jsxs)("span",{className:"badge bg-light text-dark",children:["Marks: ",e.totalMarks]})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>handleEditClick(e),className:"btn btn-sm btn-outline-primary flex-grow-1",children:[t.jsx(o.Z,{size:14,className:"me-1"}),"Edit"]}),t.jsx("button",{onClick:()=>handleDelete(e),className:"btn btn-sm btn-outline-danger",children:t.jsx(m.Z,{size:14})})]})]})})},e.id))})]}),E&&t.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>P(!1),children:t.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"modal-content border-0 shadow-lg",children:[(0,t.jsxs)("div",{className:"modal-header border-0 pb-0",children:[t.jsx("h5",{className:"modal-title fw-bold",children:"create"===_?(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.Z,{size:24,className:"me-2 text-primary"}),"Create New Subject"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.Z,{size:24,className:"me-2 text-warning"}),"Edit Subject"]})}),t.jsx("button",{type:"button",className:"btn-close",onClick:()=>P(!1)})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[t.jsx("div",{className:"modal-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Subject Name ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:$.name,onChange:handleInputChange,className:`form-control ${I.name?"is-invalid":""}`,placeholder:"e.g., Mathematics"}),I.name&&t.jsx("div",{className:"invalid-feedback",children:I.name})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Subject Code ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"code",value:$.code,onChange:handleInputChange,className:`form-control ${I.code?"is-invalid":""}`,placeholder:"e.g., MATH101"}),I.code&&t.jsx("div",{className:"invalid-feedback",children:I.code})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Grade Level"}),(0,t.jsxs)("select",{name:"gradeLevel",value:$.gradeLevel,onChange:handleInputChange,className:"form-select",children:[t.jsx("option",{value:"",children:"All Grades"}),g.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Status"}),(0,t.jsxs)("select",{name:"status",value:$.status,onChange:handleInputChange,className:"form-select",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Total Marks"}),t.jsx("input",{type:"number",name:"totalMarks",value:$.totalMarks,onChange:handleInputChange,className:`form-control ${I.totalMarks?"is-invalid":""}`,placeholder:"100",min:"0"}),I.totalMarks&&t.jsx("div",{className:"invalid-feedback",children:I.totalMarks})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Passing Marks"}),t.jsx("input",{type:"number",name:"passingMarks",value:$.passingMarks,onChange:handleInputChange,className:`form-control ${I.passingMarks?"is-invalid":""}`,placeholder:"33",min:"0"}),I.passingMarks&&t.jsx("div",{className:"invalid-feedback",children:I.passingMarks})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Type"}),(0,t.jsxs)("div",{className:"form-check form-switch mt-2",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",name:"isElective",checked:$.isElective,onChange:handleInputChange,id:"isElective"}),t.jsx("label",{className:"form-check-label",htmlFor:"isElective",children:$.isElective?"Elective":"Core"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Icon"}),t.jsx("div",{className:"d-flex flex-wrap gap-2",children:v.map(e=>t.jsx("button",{type:"button",className:`btn ${$.icon===e?"btn-primary":"btn-outline-secondary"}`,onClick:()=>q(s=>({...s,icon:e})),style:{fontSize:"1.5rem",padding:"0.5rem 1rem"},children:e},e))})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Color"}),t.jsx("div",{className:"d-flex flex-wrap gap-2",children:f.map(e=>t.jsx("button",{type:"button",className:"btn p-0 border",onClick:()=>q(s=>({...s,color:e})),style:{width:"40px",height:"40px",backgroundColor:e,border:$.color===e?"3px solid #000":"1px solid #ddd",borderRadius:"8px"}},e))})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label fw-semibold",children:"Description"}),t.jsx("textarea",{name:"description",value:$.description,onChange:handleInputChange,className:"form-control",rows:3,placeholder:"Brief description of the subject..."})]})]})}),(0,t.jsxs)("div",{className:"modal-footer border-0",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>P(!1),disabled:B,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:B,children:B?(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(u.Z,{size:18,className:"me-2"}),"create"===_?"Create Subject":"Update Subject"]})})]})]})]})})})]})}},72664:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>c});var t=a(95153);let l=(0,t.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\subjects\page.tsx`),{__esModule:r,$$typeof:n}=l,i=l.default,c=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[659,1336,9675,3528,4301,4154,9300,950,3383,656,5525,7565,2925],()=>__webpack_exec__(11213));module.exports=a})();