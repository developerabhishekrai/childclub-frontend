(()=>{var e={};e.id=5717,e.ids=[5717],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},85574:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var a=t(3528);let l=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},26303:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var a=t(3528);let l=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},99349:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>c.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>i});var a=t(67096),l=t(16132),n=t(37284),c=t.n(n),d=t(32564),r={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>d[e]);t.d(s,r);let i=["",{children:["school-admin",{children:["attendance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,96985)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\attendance\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25803)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,79113)),"C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\xampp\\htdocs\\childclub\\childclub-frontend\\src\\app\\school-admin\\attendance\\page.tsx"],m="/school-admin/attendance/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/school-admin/attendance/page",pathname:"/school-admin/attendance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},69962:(e,s,t)=>{Promise.resolve().then(t.bind(t,30827))},30827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>SchoolAdminAttendancePage});var a=t(30784),l=t(23745),n=t.n(l),c=t(9885),d=t(92032),r=t(81057),i=t(15441),o=t(517),m=t(85574),x=t(91672),h=t(26303),b=t(19300),u=t(85525);function SchoolAdminAttendancePage(){let[e,s]=(0,c.useState)(!0),[t,l]=(0,c.useState)([]),[j,f]=(0,c.useState)(null),[p,g]=(0,c.useState)([]),[N,y]=(0,c.useState)(new Date().toISOString().split("T")[0]),[v,w]=(0,c.useState)([]),[k,S]=(0,c.useState)({totalDays:0,present:0,absent:0,late:0,excused:0,attendancePercentage:0}),[A,C]=(0,c.useState)("daily"),[$,D]=(0,c.useState)(new Date().getMonth()),[M,P]=(0,c.useState)(new Date().getFullYear());(0,c.useEffect)(()=>{fetchClasses()},[]),(0,c.useEffect)(()=>{j&&(fetchClassStudents(),fetchDailyAttendance(),"monthly"===A&&fetchMonthlyStats())},[j,N,A,$,M]);let fetchClasses=async()=>{try{let e=localStorage.getItem("token"),s=await fetch(`${u.CT}/classes`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();l(e)}}catch(e){console.error("Error fetching classes:",e)}finally{s(!1)}},fetchClassStudents=async()=>{if(j)try{let e=localStorage.getItem("token"),s=await fetch(`${u.CT}/students/class/${j}`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();console.log("Fetched students for class:",j,"Count:",e.length),g(e)}}catch(e){console.error("Error fetching students:",e)}},fetchDailyAttendance=async()=>{if(j)try{let e=localStorage.getItem("token"),s=await fetch(`${u.CT}/attendance/class/${j}?date=${N}`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();console.log("Fetched attendance records:",e),console.log("For class:",j,"Date:",N),w(e)}else console.error("Failed to fetch attendance:",s.status)}catch(e){console.error("Error fetching attendance:",e)}},fetchMonthlyStats=async()=>{if(j)try{let e=localStorage.getItem("token"),s=new Date(M,$,1).toISOString().split("T")[0],t=new Date(M,$+1,0).toISOString().split("T")[0],a=await fetch(`${u.CT}/attendance/class/${j}?startDate=${s}&endDate=${t}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();w(e)}}catch(e){console.error("Error fetching monthly attendance:",e)}},handleMarkAttendance=async()=>{if(!j||0===p.length){b.Z.fire({icon:"warning",title:"Warning",text:"Please select a class with students"});return}let e=await b.Z.fire({title:"Mark Attendance",html:`
        <div class="text-start">
          <p><strong>Class:</strong> ${t.find(e=>e.id===j)?.name}</p>
          <p><strong>Date:</strong> ${N}</p>
          <p><strong>Students:</strong> ${p.length}</p>
          <hr />
          <p class="text-muted small">Mark all students as present by default?</p>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Mark All Present",cancelButtonText:"Custom Entry",showDenyButton:!0,denyButtonText:"Cancel"});if(e.isConfirmed){let e=p.map(e=>({studentId:e.userId,status:"present"}));await submitAttendance(e)}else"cancel"===e.dismiss&&showCustomAttendanceForm()},showCustomAttendanceForm=()=>{let e=p.map(e=>`
      <div class="d-flex align-items-center justify-content-between mb-3 p-2 border rounded">
        <div class="flex-grow-1">
          <strong>${e.firstName} ${e.lastName}</strong>
          <br />
          <small class="text-muted">Roll: ${e.enrollmentNumber||"N/A"}</small>
        </div>
        <select class="form-select form-select-sm w-auto student-status" data-student-id="${e.userId}">
          <option value="present">Present</option>
          <option value="absent">Absent</option>
          <option value="late">Late</option>
          <option value="excused">Excused</option>
        </select>
      </div>
    `).join("");b.Z.fire({title:"Mark Attendance",html:`
        <div class="text-start" style="max-height: 400px; overflow-y: auto;">
          ${e}
        </div>
      `,width:"600px",showCancelButton:!0,confirmButtonText:"Submit",preConfirm:()=>{let e=document.querySelectorAll(".student-status"),s=[];return e.forEach(e=>{s.push({studentId:parseInt(e.dataset.studentId),status:e.value})}),s}}).then(e=>{e.isConfirmed&&e.value&&submitAttendance(e.value)})},submitAttendance=async e=>{try{let s=localStorage.getItem("token"),t={classId:j,date:N,attendance:e};console.log("Submitting attendance:",t);let a=await fetch(`${u.CT}/attendance`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)}),l=await a.json();if(console.log("Attendance response:",l),a.ok)b.Z.fire({icon:"success",title:"Success",text:"Attendance marked successfully!",timer:2e3,showConfirmButton:!1}),fetchDailyAttendance();else throw Error(l.message||"Failed to mark attendance")}catch(e){console.error("Error submitting attendance:",e),b.Z.fire({icon:"error",title:"Error",text:e.message||"Failed to mark attendance"})}},handleDeleteRecord=async e=>{let s=await b.Z.fire({title:"Delete Record?",text:"Are you sure you want to delete this attendance record?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it"});if(s.isConfirmed)try{let s=localStorage.getItem("token"),t=await fetch(`${u.CT}/attendance/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});t.ok&&(b.Z.fire({icon:"success",title:"Deleted!",text:"Record deleted successfully",timer:2e3,showConfirmButton:!1}),fetchDailyAttendance())}catch(e){console.error("Error deleting record:",e),b.Z.fire({icon:"error",title:"Error",text:"Failed to delete record"})}},getStatusColor=e=>{switch(e){case"present":return"success";case"absent":return"danger";case"late":return"warning";case"excused":return"info";default:return"secondary"}},getStatusIcon=e=>{switch(e){case"present":return a.jsx(d.Z,{size:18});case"absent":return a.jsx(r.Z,{size:18});case"late":return a.jsx(i.Z,{size:18});case"excused":return a.jsx(o.Z,{size:18});default:return null}},I=(()=>{let e={present:0,absent:0,late:0,excused:0,total:v.length,attendancePercentage:0};return v.forEach(s=>{switch(s.status){case"present":e.present++;break;case"absent":e.absent++;break;case"late":e.late++;break;case"excused":e.excused++}}),e.total>0&&(e.attendancePercentage=Math.round((e.present+e.late)/e.total*100)),e})();if(e)return a.jsx("div",{className:"container-fluid vh-100 d-flex justify-content-center align-items-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",style:{width:"4rem",height:"4rem"},children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("h4",{className:"mt-3",children:"Loading Attendance..."})]})});let _=["January","February","March","April","May","June","July","August","September","October","November","December"];return(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},className:"jsx-d104eb44e71cef75",children:[(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 container-fluid p-4",children:[a.jsx("div",{className:"jsx-d104eb44e71cef75 row mb-4",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 col-12",children:a.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-d104eb44e71cef75 card border-0 shadow-lg",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 card-body text-white p-4",children:[(0,a.jsxs)("h1",{className:"jsx-d104eb44e71cef75 display-5 fw-bold mb-2",children:[a.jsx(o.Z,{size:50,className:"me-3"}),"Attendance Management"]}),a.jsx("p",{className:"jsx-d104eb44e71cef75 mb-0 opacity-75",children:"Manage and track student attendance"})]})})})}),a.jsx("div",{className:"jsx-d104eb44e71cef75 row mb-4",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 col-12",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 card border-0 shadow",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 card-body",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 row g-3 align-items-end",children:[(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-3",children:[a.jsx("label",{className:"jsx-d104eb44e71cef75 form-label fw-semibold",children:"Select Class"}),(0,a.jsxs)("select",{value:j||"",onChange:e=>f(Number(e.target.value)),className:"jsx-d104eb44e71cef75 form-select",children:[a.jsx("option",{value:"",className:"jsx-d104eb44e71cef75",children:"Choose a class..."}),t.map(e=>a.jsx("option",{value:e.id,className:"jsx-d104eb44e71cef75",children:e.name},e.id))]})]}),"daily"===A?(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-3",children:[a.jsx("label",{className:"jsx-d104eb44e71cef75 form-label fw-semibold",children:"Date"}),a.jsx("input",{type:"date",value:N,onChange:e=>y(e.target.value),className:"jsx-d104eb44e71cef75 form-control"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-2",children:[a.jsx("label",{className:"jsx-d104eb44e71cef75 form-label fw-semibold",children:"Month"}),a.jsx("select",{value:$,onChange:e=>D(Number(e.target.value)),className:"jsx-d104eb44e71cef75 form-select",children:_.map((e,s)=>a.jsx("option",{value:s,className:"jsx-d104eb44e71cef75",children:e},s))})]}),(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-2",children:[a.jsx("label",{className:"jsx-d104eb44e71cef75 form-label fw-semibold",children:"Year"}),a.jsx("select",{value:M,onChange:e=>P(Number(e.target.value)),className:"jsx-d104eb44e71cef75 form-select",children:[2023,2024,2025,2026].map(e=>a.jsx("option",{value:e,className:"jsx-d104eb44e71cef75",children:e},e))})]})]}),(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-2",children:[a.jsx("label",{className:"jsx-d104eb44e71cef75 form-label fw-semibold",children:"View"}),(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 btn-group w-100",children:[a.jsx("button",{onClick:()=>C("daily"),className:`jsx-d104eb44e71cef75 btn ${"daily"===A?"btn-primary":"btn-outline-primary"}`,children:"Daily"}),a.jsx("button",{onClick:()=>C("monthly"),className:`jsx-d104eb44e71cef75 btn ${"monthly"===A?"btn-primary":"btn-outline-primary"}`,children:"Stats"})]})]}),a.jsx("div",{className:"jsx-d104eb44e71cef75 col-12 col-md-4",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 d-flex gap-2",children:[(0,a.jsxs)("button",{onClick:handleMarkAttendance,disabled:!j,className:"jsx-d104eb44e71cef75 btn btn-success flex-grow-1",children:[a.jsx(d.Z,{size:18,className:"me-2"}),"Mark Attendance"]}),a.jsx("button",{onClick:()=>{if(0===v.length){b.Z.fire({icon:"warning",title:"No Data",text:"No attendance records to export"});return}let e=[["Date","Student Name","Roll Number","Status","Mood","Remarks"],...v.map(e=>[e.date,`${e.student?.firstName||""} ${e.student?.lastName||""}`,e.student?.enrollmentNumber||"N/A",e.status,e.mood||"",e.remarks||""])].map(e=>e.join(",")).join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`attendance-${N}.csv`,a.click(),window.URL.revokeObjectURL(t)},disabled:!j||0===v.length,className:"jsx-d104eb44e71cef75 btn btn-outline-primary",children:a.jsx(m.Z,{size:18})})]})})]})})})})}),j&&p.length>0&&a.jsx("div",{className:"jsx-d104eb44e71cef75 row mb-4",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 col-12",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 card border-0 shadow",children:[a.jsx("div",{className:"jsx-d104eb44e71cef75 card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("h5",{className:"jsx-d104eb44e71cef75 mb-0 fw-bold",children:[a.jsx(x.Z,{size:24,className:"me-2"}),"Students - ",t.find(e=>e.id===j)?.name]}),(0,a.jsxs)("span",{className:"jsx-d104eb44e71cef75 badge bg-primary fs-6",children:[p.length," Students"]})]})}),a.jsx("div",{className:"jsx-d104eb44e71cef75 card-body p-0",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 table-responsive",children:(0,a.jsxs)("table",{className:"jsx-d104eb44e71cef75 table table-hover mb-0",children:[a.jsx("thead",{className:"jsx-d104eb44e71cef75 bg-light",children:(0,a.jsxs)("tr",{className:"jsx-d104eb44e71cef75",children:[a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"S.No"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Student Name"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Enrollment Number"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Attendance Status"})]})}),a.jsx("tbody",{className:"jsx-d104eb44e71cef75",children:p.map((e,s)=>{let t=v.find(s=>s.studentId===e.userId);return 0===s&&(console.log("Debug - Students:",p.map(e=>({id:e.id,userId:e.userId,name:e.firstName}))),console.log("Debug - Attendance Records:",v.map(e=>({studentId:e.studentId,status:e.status}))),console.log("Debug - Looking for student userId:",e.userId),console.log("Debug - Found record:",t)),(0,a.jsxs)("tr",{className:"jsx-d104eb44e71cef75",children:[a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:s+1}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 fw-semibold",children:[e.firstName," ",e.lastName]})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:a.jsx("span",{className:"jsx-d104eb44e71cef75 badge bg-light text-dark",children:e.enrollmentNumber||"N/A"})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:t?(0,a.jsxs)("span",{style:{width:"fit-content"},className:`jsx-d104eb44e71cef75 badge bg-${getStatusColor(t.status)} d-flex align-items-center gap-1`,children:[getStatusIcon(t.status),t.status.toUpperCase()]}):a.jsx("span",{className:"jsx-d104eb44e71cef75 badge bg-secondary",children:"Not Marked"})})]},e.id)})})]})})})]})})}),j&&(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 card border-0 shadow mb-4",children:[a.jsx("div",{className:"jsx-d104eb44e71cef75 card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("h5",{className:"jsx-d104eb44e71cef75 mb-0 fw-bold",children:[a.jsx(o.Z,{className:"me-2 text-primary",size:20}),"Attendance Calendar"]}),(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 d-flex gap-2",children:[a.jsx("button",{onClick:()=>C("daily"),className:`jsx-d104eb44e71cef75 btn btn-sm ${"daily"===A?"btn-primary":"btn-outline-primary"}`,children:"Daily View"}),a.jsx("button",{onClick:()=>C("monthly"),className:`jsx-d104eb44e71cef75 btn btn-sm ${"monthly"===A?"btn-primary":"btn-outline-primary"}`,children:"Monthly View"})]})]})}),a.jsx("div",{className:"jsx-d104eb44e71cef75 card-body",children:(()=>{if("daily"===A)return a.jsx("div",{className:"text-center py-4",children:(0,a.jsxs)("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-12 col-md-6 col-lg-3",children:a.jsx("div",{className:"card border-0 shadow h-100",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:(0,a.jsxs)("div",{className:"card-body text-white",children:[a.jsx("h6",{className:"card-subtitle mb-2",children:"Attendance Rate"}),(0,a.jsxs)("h2",{className:"card-title display-4 fw-bold",children:[I.attendancePercentage,"%"]}),(0,a.jsxs)("p",{className:"card-text small",children:["For ",N]})]})})}),a.jsx("div",{className:"col-12 col-md-6 col-lg-3",children:a.jsx("div",{className:"card border-0 shadow h-100",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:(0,a.jsxs)("div",{className:"card-body text-white",children:[a.jsx("h6",{className:"card-subtitle mb-2",children:"Present"}),a.jsx("h2",{className:"card-title display-4 fw-bold",children:I.present}),(0,a.jsxs)("p",{className:"card-text small",children:["Out of ",I.total," students"]})]})})}),a.jsx("div",{className:"col-12 col-md-6 col-lg-3",children:a.jsx("div",{className:"card border-0 shadow h-100",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"},children:(0,a.jsxs)("div",{className:"card-body text-white",children:[a.jsx("h6",{className:"card-subtitle mb-2",children:"Absent"}),a.jsx("h2",{className:"card-title display-4 fw-bold",children:I.absent}),(0,a.jsxs)("p",{className:"card-text small",children:["Late: ",I.late]})]})})}),a.jsx("div",{className:"col-12 col-md-6 col-lg-3",children:a.jsx("div",{className:"card border-0 shadow h-100",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,a.jsxs)("div",{className:"card-body text-white",children:[a.jsx("h6",{className:"card-subtitle mb-2",children:"Excused"}),a.jsx("h2",{className:"card-title display-4 fw-bold",children:I.excused}),a.jsx("p",{className:"card-text small",children:"Medical/Leave"})]})})})]})});let e=new Date(M,$+1,0).getDate(),s=new Date(M,$,1).getDay(),t=[];for(let e=0;e<s;e++)t.push(a.jsx("div",{className:"calendar-cell empty-cell"},`empty-${e}`));for(let s=1;s<=e;s++){let e=`${M}-${String($+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,l=v.filter(s=>s.date.startsWith(e)),n=new Date().toDateString()===new Date(e).toDateString(),c=0===new Date(M,$,s).getDay(),d="",r="";if(l.length>0){let e=l.filter(e=>"present"===e.status).length,s=l.filter(e=>"absent"===e.status).length;l.filter(e=>"late"===e.status).length,l.filter(e=>"excused"===e.status).length;let t=p.length;e===t?(d="bg-success text-white",r="All Present"):s===t?(d="bg-danger text-white",r="All Absent"):(d=e>s?"bg-success bg-opacity-75 text-white":"bg-warning bg-opacity-75 text-dark",r=`${e}/${t}`)}else c?(d="bg-light text-muted",r="Sunday"):(d="bg-light text-muted",r="No Data");t.push(a.jsx("div",{className:`calendar-cell ${d} ${n?"border border-primary border-3":""}`,style:{minHeight:"80px",padding:"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>{c||(y(e),C("daily"))},children:(0,a.jsxs)("div",{className:"d-flex flex-column h-100",children:[a.jsx("div",{className:"fw-bold mb-1",children:s}),a.jsx("div",{className:"small text-center flex-grow-1 d-flex align-items-center justify-content-center",children:r})]})},s))}return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{0===$?(D(11),P(M-1)):D($-1)},children:"← Previous"}),(0,a.jsxs)("h4",{className:"mb-0 fw-bold",children:[_[$]," ",M]}),a.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{11===$?(D(0),P(M+1)):D($+1)},children:"Next →"})]}),(0,a.jsxs)("div",{className:"calendar-grid",style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",marginBottom:"20px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>a.jsx("div",{className:"text-center fw-bold text-muted py-2",children:e},e)),t]}),(0,a.jsxs)("div",{className:"d-flex flex-wrap gap-3 justify-content-center",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-success rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"All Present"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-success bg-opacity-75 rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"Mostly Present"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-warning bg-opacity-75 rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"Low Attendance"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-danger rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"All Absent"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-light rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"No Data"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("div",{className:"bg-light text-muted rounded",style:{width:"20px",height:"20px"}}),a.jsx("small",{children:"Sunday (Holiday)"})]})]})]})})()})]}),"daily"===A&&a.jsx("div",{className:"jsx-d104eb44e71cef75 row",children:a.jsx("div",{className:"jsx-d104eb44e71cef75 col-12",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 card border-0 shadow",children:[a.jsx("div",{className:"jsx-d104eb44e71cef75 card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("h5",{className:"jsx-d104eb44e71cef75 mb-0 fw-bold",children:["Attendance for ",N,j&&` - ${t.find(e=>e.id===j)?.name}`]}),(0,a.jsxs)("span",{className:"jsx-d104eb44e71cef75 badge bg-primary",children:[v.length," / ",p.length," students"]})]})}),a.jsx("div",{className:"jsx-d104eb44e71cef75 card-body p-0",children:j?0===v.length?(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 text-center py-5 text-muted",children:[a.jsx(o.Z,{size:60,style:{opacity:.3}}),a.jsx("p",{className:"jsx-d104eb44e71cef75 mt-3",children:"No attendance records for this date"}),a.jsx("button",{onClick:handleMarkAttendance,className:"jsx-d104eb44e71cef75 btn btn-primary mt-2",children:"Mark Attendance Now"})]}):a.jsx("div",{className:"jsx-d104eb44e71cef75 table-responsive",children:(0,a.jsxs)("table",{className:"jsx-d104eb44e71cef75 table table-hover mb-0",children:[a.jsx("thead",{className:"jsx-d104eb44e71cef75 bg-light",children:(0,a.jsxs)("tr",{className:"jsx-d104eb44e71cef75",children:[a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Student Name"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Roll Number"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Status"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Mood"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Remarks"}),a.jsx("th",{className:"jsx-d104eb44e71cef75 border-0 py-3",children:"Actions"})]})}),a.jsx("tbody",{className:"jsx-d104eb44e71cef75",children:v.map(e=>(0,a.jsxs)("tr",{className:"jsx-d104eb44e71cef75",children:[a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 fw-semibold",children:[e.student?.firstName," ",e.student?.lastName]})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:e.student?.enrollmentNumber||"N/A"}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:(0,a.jsxs)("span",{style:{width:"fit-content"},className:`jsx-d104eb44e71cef75 badge bg-${getStatusColor(e.status)} d-flex align-items-center gap-1`,children:[getStatusIcon(e.status),e.status.toUpperCase()]})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:e.mood&&a.jsx("span",{className:"jsx-d104eb44e71cef75 badge bg-light text-dark",children:e.mood})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:a.jsx("span",{className:"jsx-d104eb44e71cef75 text-muted small",children:e.remarks||"-"})}),a.jsx("td",{className:"jsx-d104eb44e71cef75 py-3",children:a.jsx("button",{onClick:()=>handleDeleteRecord(e.id),className:"jsx-d104eb44e71cef75 btn btn-sm btn-outline-danger",children:a.jsx(h.Z,{size:16})})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"jsx-d104eb44e71cef75 text-center py-5 text-muted",children:[a.jsx(x.Z,{size:60,style:{opacity:.3}}),a.jsx("p",{className:"jsx-d104eb44e71cef75 mt-3",children:"Please select a class to view attendance"})]})})]})})})]}),a.jsx(n(),{id:"d104eb44e71cef75",children:".card.jsx-d104eb44e71cef75{-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease}.card.jsx-d104eb44e71cef75:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}"})]})}},96985:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>c,__esModule:()=>n,default:()=>r});var a=t(95153);let l=(0,a.createProxy)(String.raw`C:\xampp\htdocs\childclub\childclub-frontend\src\app\school-admin\attendance\page.tsx`),{__esModule:n,$$typeof:c}=l,d=l.default,r=d}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[659,1336,9675,3528,4301,4154,9300,1812,656,5525,7565],()=>__webpack_exec__(99349));module.exports=t})();