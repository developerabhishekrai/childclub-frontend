(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7328],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:i,children:l,...d},o)=>(0,a.createElement)("svg",{ref:o,...n,width:r,height:r,stroke:t,strokeWidth:i?24*Number(c)/Number(r):c,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${e}`,t}},3021:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},9865:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3344:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},6142:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9617:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5367:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5790:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5750:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2898);let n=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9386:function(e,s,t){Promise.resolve().then(t.bind(t,7412))},7412:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SchoolAdminDashboard}});var a=t(7437),n=t(2265),r=t(1827),c=t(3021),i=t(9883),l=t(6142),d=t(9617),o=t(5750),m=t(5790),h=t(3344),u=t(9865),x=t(3008),b=t(8203),g=t(6141),p=t(2898);let j=(0,p.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),v=(0,p.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var f=t(5367);t(8117);var N=t(1396),y=t.n(N),w=t(6454);function SchoolAdminDashboard(){let[e,s]=(0,n.useState)({totalStudents:0,totalTeachers:0,totalClasses:0,activeClasses:0,pendingTasks:0,upcomingEvents:0,attendanceRate:0,averageScore:0}),[t,p]=(0,n.useState)({name:"",city:"",state:"",status:"",establishedYear:0,type:"",rating:""}),[N,k]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[T,A]=(0,n.useState)([]),[E,Z]=(0,n.useState)([]),[z,D]=(0,n.useState)([]),[I,q]=(0,n.useState)([]),[R,L]=(0,n.useState)(!0),[P,M]=(0,n.useState)(""),[U,O]=(0,n.useState)("all"),B=(0,n.useCallback)(async()=>{try{L(!0);let e=(0,w.hV)(),t=(0,w.vF)()||{},a=t.schoolId||1;if(console.log("Frontend Dashboard - Data Check:",{token:e?"Present":"Missing",tokenLength:e?e.length:0,userData:t,schoolId:a,schoolIdType:typeof a,localStorageKeys:Object.keys(localStorage)}),!e||!a){console.error("No token or schoolId found:",{token:!!e,schoolId:a});return}let n={Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},r=await fetch("".concat(w.CT,"/dashboard/stats"),{headers:n});if(r.ok){let e=await r.json();console.log("Dashboard Stats Response:",e),s({totalStudents:e.totalStudents||0,totalTeachers:e.totalTeachers||0,totalClasses:e.totalClasses||0,activeClasses:e.activeClasses||0,pendingTasks:e.pendingTasks||0,upcomingEvents:e.upcomingEvents||0,attendanceRate:e.attendanceRate||0,averageScore:e.averageScore||0})}else console.error("Stats API Error:",r.status,r.statusText),console.log("Using fallback data"),s({totalStudents:3,totalTeachers:2,totalClasses:1,activeClasses:1,pendingTasks:0,upcomingEvents:0,attendanceRate:94.5,averageScore:87.2});let c=await fetch("".concat(w.CT,"/schools/me"),{headers:n});if(c.ok){let e=await c.json();console.log("School Info Response:",e),p({name:e.name||"",city:e.city||"",state:e.state||"",status:e.status||"",establishedYear:e.establishedYear||0,type:e.type||"",rating:"4.8/5"})}else console.error("School API Error:",c.status,c.statusText);let i=await fetch("".concat(w.CT,"/students"),{headers:n});if(i.ok){let e=await i.json();console.log("Students Response:",e),k(e.data||e||[])}else console.error("Students API Error:",i.status,i.statusText);let l=await fetch("".concat(w.CT,"/teachers"),{headers:n});if(l.ok){let e=await l.json();console.log("Teachers Response:",e),C(e.data||e||[])}else console.error("Teachers API Error:",l.status,l.statusText);let d=await fetch("".concat(w.CT,"/classes"),{headers:n});if(d.ok){let e=await d.json();console.log("Classes Response:",e),A(e.data||e||[])}else console.error("Classes API Error:",d.status,d.statusText);let o=await fetch("".concat(w.CT,"/calendar/upcoming?limit=5"),{headers:n});if(o.ok){let e=await o.json();console.log("Calendar Events Response:",e),D(e||[])}else console.error("Calendar Events API Error:",o.status,o.statusText)}catch(e){console.error("Error fetching dashboard data:",e),console.error("Error details:",{message:e.message,stack:e.stack,name:e.name})}finally{L(!1)}},[]);(0,n.useEffect)(()=>{console.log("Dashboard useEffect triggered"),B()},[]);let handleStudentStatusChange=async(e,t)=>{try{let a=localStorage.getItem("token");if(!a){alert("Authentication required");return}let n=await fetch("".concat(w.CT,"/students/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({status:t})});n.ok&&(k(s=>s.map(s=>s.id===e?{...s,status:t}:s)),s(e=>({...e,totalStudents:"active"===t?e.totalStudents+1:e.totalStudents-1})),alert("Student status updated to ".concat(t)))}catch(e){console.error("Error updating student status:",e),alert("Failed to update student status")}},handleDeleteStudent=async e=>{if(confirm("⚠️ Are you sure you want to delete this student?"))try{let t=localStorage.getItem("token");if(!t){alert("Authentication required");return}let a=await fetch("".concat(w.CT,"/students/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});a.ok?(k(s=>s.filter(s=>s.id!==e)),s(e=>({...e,totalStudents:e.totalStudents-1})),alert("✅ Student deleted successfully!"),B()):alert("❌ Failed to delete student")}catch(e){console.error("Error deleting student:",e),alert("❌ Error deleting student")}},handleDeleteTeacher=async e=>{if(confirm("⚠️ Are you sure you want to delete this teacher?"))try{let t=localStorage.getItem("token");if(!t){alert("Authentication required");return}let a=await fetch("".concat(w.CT,"/teachers/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});a.ok?(C(s=>s.filter(s=>s.id!==e)),s(e=>({...e,totalTeachers:e.totalTeachers-1})),alert("✅ Teacher deleted successfully!"),B()):alert("❌ Failed to delete teacher")}catch(e){console.error("Error deleting teacher:",e),alert("❌ Error deleting teacher")}},handleTeacherStatusChange=async(e,t)=>{try{let a=localStorage.getItem("token");if(!a){alert("Authentication required");return}let n=await fetch("".concat(w.CT,"/teachers/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({status:t})});n.ok&&(C(s=>s.map(s=>s.id===e?{...s,status:t}:s)),s(e=>({...e,totalTeachers:"active"===t?e.totalTeachers+1:e.totalTeachers-1})),alert("Teacher status updated to ".concat(t)))}catch(e){console.error("Error updating teacher status:",e),alert("Failed to update teacher status")}},H=N.filter(e=>{var s,t,a;let n=e.firstName||(null===(s=e.user)||void 0===s?void 0:s.firstName)||"",r=e.lastName||(null===(t=e.user)||void 0===t?void 0:t.lastName)||"",c=e.email||(null===(a=e.user)||void 0===a?void 0:a.email)||"",i=n.toLowerCase().includes(P.toLowerCase())||r.toLowerCase().includes(P.toLowerCase())||c.toLowerCase().includes(P.toLowerCase()),l="all"===U||e.status===U;return i&&l}),V=S.filter(e=>{let s=e.firstName||"",t=e.lastName||"",a=e.email||"",n=s.toLowerCase().includes(P.toLowerCase())||t.toLowerCase().includes(P.toLowerCase())||a.toLowerCase().includes(P.toLowerCase()),r="all"===U||e.status===U;return n&&r}),formatEventTime=e=>{let s=new Date(e),t=new Date,a=s.getTime()-t.getTime(),n=Math.ceil(a/864e5);return 0===n?"Today":1===n?"Tomorrow":n<=7?"In ".concat(n," days"):n<=14?"Next week":n<=21?"In 2 weeks":"In 3 weeks"},getEventTypeColor=e=>({meeting:"bg-primary",event:"bg-success",exam:"bg-warning",curriculum:"bg-info",activity:"bg-warning",academic:"bg-info",holiday:"bg-secondary"})[e]||"bg-secondary";return R?(0,a.jsx)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-3 text-muted",children:"Loading dashboard data..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"\n  .stat-card {\n    transition: all 0.3s ease;\n    border: none;\n    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\n    border-radius: 1rem;\n    overflow: hidden;\n  }\n  \n  .stat-card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.15);\n  }\n  \n  .quick-action-btn {\n    transition: all 0.3s ease;\n    border: 2px solid transparent;\n    border-radius: 1rem;\n    min-height: 140px;\n  }\n  \n  .quick-action-btn:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.15);\n  }\n  \n  .activity-item {\n    transition: all 0.3s ease;\n    border-radius: 0.75rem;\n    padding: 1rem;\n    margin: 0.5rem 0;\n  }\n  \n  .activity-item:hover {\n    background-color: #f8f9fa;\n    transform: translateX(5px);\n  }\n  \n  .school-info-card {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border-radius: 1.5rem;\n    overflow: hidden;\n  }\n  \n  .school-info-card .text-muted {\n    color: rgba(255, 255, 255, 0.8) !important;\n  }\n  \n  .search-box {\n    transition: all 0.3s ease;\n    border-radius: 2rem;\n  }\n  \n  .search-box:focus-within {\n    transform: scale(1.02);\n    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);\n  }\n  \n  .dashboard-card {\n    border: none;\n    border-radius: 1rem;\n    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\n    transition: all 0.3s ease;\n  }\n  \n  .dashboard-card:hover {\n    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1);\n  }\n  \n  .stat-icon {\n    width: 70px;\n    height: 70px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0 auto 1rem;\n  }\n  \n  .quick-overview-item {\n    background: #f8f9fa;\n    border-radius: 0.75rem;\n    padding: 1rem;\n    margin-bottom: 0.75rem;\n    transition: all 0.3s ease;\n  }\n  \n  .quick-overview-item:hover {\n    background: #e9ecef;\n    transform: translateX(3px);\n  }\n  \n  .event-dot {\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    display: inline-block;\n    margin-right: 0.5rem;\n  }\n\n  .status-badge {\n    font-size: 0.75rem;\n    padding: 0.25rem 0.5rem;\n  }\n\n  .action-btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.875rem;\n  }\n"}),(0,a.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,a.jsx)("div",{className:"container-fluid py-4",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-4",children:[(0,a.jsxs)("h3",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-tachometer-alt me-2 text-primary"}),"School Admin Dashboard"]}),(0,a.jsxs)("span",{className:"badge fs-6 px-3 py-2 ".concat("approved"===t.status?"bg-success":"bg-warning"),children:[(0,a.jsx)("i",{className:"fas fa-".concat("approved"===t.status?"check-circle":"clock"," me-2")}),"approved"===t.status?"Active School":"Pending Approval"]})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsxs)("div",{className:"position-relative search-box",children:[(0,a.jsx)("input",{type:"text",className:"form-control form-control-lg border-0 shadow-sm",placeholder:"Search students, teachers, classes...",value:P,onChange:e=>M(e.target.value),style:{width:"300px",paddingLeft:"1rem",paddingRight:"3rem"}}),(0,a.jsx)(r.Z,{size:20,className:"position-absolute top-50 end-0 translate-middle-y text-muted me-3"})]}),(0,a.jsxs)("select",{className:"form-select form-select-lg border-0 shadow-sm",value:U,onChange:e=>O(e.target.value),style:{width:"150px"},children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"pending",children:"Pending"})]}),(0,a.jsxs)("button",{className:"btn btn-outline-primary btn-lg position-relative",children:[(0,a.jsx)(c.Z,{size:20,className:"me-2"}),"Notifications",(0,a.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger fs-6",children:"3"})]}),(0,a.jsxs)("button",{className:"btn btn-primary btn-lg d-flex align-items-center gap-2",children:[(0,a.jsx)(i.Z,{size:20}),"Quick Add"]})]})]})})}),(0,a.jsxs)("div",{className:"container-fluid py-5",children:[(0,a.jsx)("div",{className:"row mb-5",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"card school-info-card border-0 shadow",children:(0,a.jsx)("div",{className:"card-body p-5",children:(0,a.jsxs)("div",{className:"row align-items-center",children:[(0,a.jsxs)("div",{className:"col-md-8",children:[(0,a.jsxs)("h2",{className:"fw-bold text-white mb-3",children:[(0,a.jsx)("i",{className:"fas fa-school me-3"}),t.name]}),(0,a.jsxs)("p",{className:"text-muted mb-3 fs-5",children:[(0,a.jsx)(l.Z,{size:20,className:"me-2"}),t.city,", ",t.state]}),(0,a.jsxs)("div",{className:"d-flex gap-4",children:[(0,a.jsxs)("span",{className:"text-muted fs-6",children:[(0,a.jsx)("i",{className:"fas fa-calendar-alt me-2"}),(0,a.jsx)("strong",{children:"Established:"})," ",t.establishedYear]}),(0,a.jsxs)("span",{className:"text-muted fs-6",children:[(0,a.jsx)("i",{className:"fas fa-graduation-cap me-2"}),(0,a.jsx)("strong",{children:"Type:"})," ",t.type]}),(0,a.jsxs)("span",{className:"text-muted fs-6",children:[(0,a.jsx)("i",{className:"fas fa-star me-2"}),(0,a.jsx)("strong",{children:"Rating:"})," ",t.rating]})]})]}),(0,a.jsx)("div",{className:"col-md-4 text-end",children:(0,a.jsxs)(y(),{href:"/school-admin/profile/edit",className:"btn btn-light btn-lg",children:[(0,a.jsx)(d.Z,{size:20,className:"me-2"}),"Edit Profile"]})})]})})})})}),(0,a.jsxs)("div",{className:"row mb-5",children:[(0,a.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:(0,a.jsx)("div",{className:"card stat-card border-0 shadow h-100",children:(0,a.jsxs)("div",{className:"card-body text-center p-4",children:[(0,a.jsx)("div",{className:"stat-icon bg-primary bg-opacity-10 text-primary mx-auto mb-3",children:(0,a.jsx)(o.Z,{size:35})}),(0,a.jsx)("h3",{className:"fw-bold text-dark mb-2",children:e.totalStudents}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Total Students"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("span",{className:"badge bg-success-subtle text-success me-2",children:[(0,a.jsx)(m.Z,{size:14,className:"me-1"}),"+12% this month"]})})]})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:(0,a.jsx)("div",{className:"card stat-card border-0 shadow h-100",children:(0,a.jsxs)("div",{className:"card-body text-center p-4",children:[(0,a.jsx)("div",{className:"stat-icon bg-success bg-opacity-10 text-success mx-auto mb-3",children:(0,a.jsx)(h.Z,{size:35})}),(0,a.jsx)("h3",{className:"fw-bold text-dark mb-2",children:e.totalTeachers}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Total Teachers"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("span",{className:"badge bg-success-subtle text-success me-2",children:[(0,a.jsx)(m.Z,{size:14,className:"me-1"}),"+5% this month"]})})]})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:(0,a.jsx)("div",{className:"card stat-card border-0 shadow h-100",children:(0,a.jsxs)("div",{className:"card-body text-center p-4",children:[(0,a.jsx)("div",{className:"stat-icon bg-warning bg-opacity-10 text-warning mx-auto mb-3",children:(0,a.jsx)(u.Z,{size:35})}),(0,a.jsx)("h3",{className:"fw-bold text-dark mb-2",children:e.totalClasses}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Total Classes"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("span",{className:"badge bg-warning-subtle text-warning me-2",children:[(0,a.jsx)(x.Z,{size:14,className:"me-1"}),e.activeClasses," Active"]})})]})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:(0,a.jsx)("div",{className:"card stat-card border-0 shadow h-100",children:(0,a.jsxs)("div",{className:"card-body text-center p-4",children:[(0,a.jsx)("div",{className:"stat-icon bg-info bg-opacity-10 text-info mx-auto mb-3",children:(0,a.jsx)(b.Z,{size:35})}),(0,a.jsx)("h3",{className:"fw-bold text-dark mb-2",children:e.upcomingEvents}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Upcoming Events"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("span",{className:"badge bg-info-subtle text-info me-2",children:[(0,a.jsx)(g.Z,{size:14,className:"me-1"}),e.pendingTasks," Pending"]})})]})})})]}),(0,a.jsx)("div",{className:"row mb-5",children:(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("h4",{className:"fw-bold text-dark mb-4",children:[(0,a.jsx)("i",{className:"fas fa-bolt me-2 text-warning"}),"Quick Actions"]}),(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsx)("div",{className:"col-xl-3 col-md-6",children:(0,a.jsx)(y(),{href:"/school-admin/add-student",className:"text-decoration-none",children:(0,a.jsx)("div",{className:"card quick-action-btn border-0 shadow h-100 text-center p-4 bg-primary bg-opacity-10 border-primary",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"bg-primary text-white rounded-circle mx-auto mb-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(o.Z,{size:30})}),(0,a.jsx)("h5",{className:"fw-bold text-primary mb-2",children:"Add Student"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Register new student"})]})})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6",children:(0,a.jsx)(y(),{href:"/school-admin/add-teacher",className:"text-decoration-none",children:(0,a.jsx)("div",{className:"card quick-action-btn border-0 shadow h-100 text-center p-4 bg-success bg-opacity-10 border-success",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"bg-success text-white rounded-circle mx-auto mb-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(h.Z,{size:30})}),(0,a.jsx)("h5",{className:"fw-bold text-success mb-2",children:"Add Teacher"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Hire new teacher"})]})})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6",children:(0,a.jsx)(y(),{href:"/school-admin/submissions",className:"text-decoration-none",children:(0,a.jsx)("div",{className:"card quick-action-btn border-0 shadow h-100 text-center p-4 bg-danger bg-opacity-10 border-danger",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"bg-danger text-white rounded-circle mx-auto mb-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(x.Z,{size:30})}),(0,a.jsx)("h5",{className:"fw-bold text-danger mb-2",children:"View Submissions"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Review student work"})]})})})}),(0,a.jsx)("div",{className:"col-xl-3 col-md-6",children:(0,a.jsx)(y(),{href:"/school-admin/create-assignment",className:"text-decoration-none",children:(0,a.jsx)("div",{className:"card quick-action-btn border-0 shadow h-100 text-center p-4 bg-info bg-opacity-10 border-info",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"bg-info text-white rounded-circle mx-auto mb-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(b.Z,{size:30})}),(0,a.jsx)("h5",{className:"fw-bold text-info mb-2",children:"Create Assignment"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Assign new task"})]})})})})]})]})}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-xl-8",children:[(0,a.jsxs)("div",{className:"card dashboard-card border-0 shadow mb-4",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("h5",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-users me-2 text-primary"}),"Recent Students (",H.length,")"]}),(0,a.jsx)(y(),{href:"/school-admin/students",className:"btn btn-outline-primary btn-sm",children:"View All"})]})}),(0,a.jsx)("div",{className:"card-body p-0",children:(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Email"}),(0,a.jsx)("th",{children:"Class"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:H.slice(0,5).map(e=>{var s,t,n;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 text-primary rounded-circle me-3",style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(o.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fw-semibold",children:[e.firstName||(null===(s=e.user)||void 0===s?void 0:s.firstName)||"N/A"," ",e.lastName||(null===(t=e.user)||void 0===t?void 0:t.lastName)||""]}),(0,a.jsxs)("small",{className:"text-muted",children:["Enrolled: ",e.enrollmentDate?new Date(e.enrollmentDate).toLocaleDateString():"N/A"]})]})]})}),(0,a.jsx)("td",{children:e.email||(null===(n=e.user)||void 0===n?void 0:n.email)||"N/A"}),(0,a.jsx)("td",{children:e.className?(0,a.jsx)("span",{className:"badge bg-primary",children:e.className}):(0,a.jsx)("span",{className:"badge bg-secondary",children:"No Class"})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge status-badge ".concat("active"===e.status?"bg-success":"inactive"===e.status?"bg-danger":"bg-warning"),children:e.status})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"btn-group",role:"group",children:[(0,a.jsx)("button",{className:"btn btn-sm btn-outline-primary action-btn",onClick:()=>handleStudentStatusChange(e.id,"active"===e.status?"inactive":"active"),title:"active"===e.status?"Deactivate":"Activate",children:"active"===e.status?(0,a.jsx)(j,{size:14}):(0,a.jsx)(v,{size:14})}),(0,a.jsx)(y(),{href:"/school-admin/students/".concat(e.id,"/edit"),className:"btn btn-sm btn-outline-warning action-btn",children:(0,a.jsx)(d.Z,{size:14})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-danger action-btn",onClick:()=>handleDeleteStudent(e.id),title:"Delete Student",children:(0,a.jsx)(f.Z,{size:14})})]})})]},e.id)})})]})})})]}),(0,a.jsxs)("div",{className:"card dashboard-card border-0 shadow mb-4",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("h5",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-chalkboard-teacher me-2 text-success"}),"Recent Teachers (",V.length,")"]}),(0,a.jsx)(y(),{href:"/school-admin/teachers",className:"btn btn-outline-success btn-sm",children:"View All"})]})}),(0,a.jsx)("div",{className:"card-body p-0",children:(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Department"}),(0,a.jsx)("th",{children:"Subjects"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:V.slice(0,5).map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"bg-success bg-opacity-10 text-success rounded-circle me-3",style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(h.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fw-semibold",children:[e.firstName||"N/A"," ",e.lastName||""]}),(0,a.jsx)("small",{className:"text-muted",children:e.email||"N/A"})]})]})}),(0,a.jsx)("td",{children:e.department||"N/A"}),(0,a.jsxs)("td",{children:[(e.subjects||[]).slice(0,2).map((e,s)=>(0,a.jsx)("span",{className:"badge bg-light text-dark me-1",children:e},s)),(e.subjects||[]).length>2&&(0,a.jsxs)("span",{className:"badge bg-secondary",children:["+",(e.subjects||[]).length-2]})]}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge status-badge ".concat("active"===e.status?"bg-success":"inactive"===e.status?"bg-danger":"bg-warning"),children:e.status})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"btn-group",role:"group",children:[(0,a.jsx)("button",{className:"btn btn-sm btn-outline-success action-btn",onClick:()=>handleTeacherStatusChange(e.id,"active"===e.status?"inactive":"active"),title:"active"===e.status?"Deactivate":"Activate",children:"active"===e.status?(0,a.jsx)(j,{size:14}):(0,a.jsx)(v,{size:14})}),(0,a.jsx)(y(),{href:"/school-admin/teachers/".concat(e.id,"/edit"),className:"btn btn-sm btn-outline-warning action-btn",children:(0,a.jsx)(d.Z,{size:14})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-danger action-btn",onClick:()=>handleDeleteTeacher(e.id),title:"Delete Teacher",children:(0,a.jsx)(f.Z,{size:14})})]})})]},e.id))})]})})})]})]}),(0,a.jsxs)("div",{className:"col-xl-4",children:[(0,a.jsxs)("div",{className:"card dashboard-card border-0 shadow mb-4",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("h5",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-calendar-alt me-2 text-info"}),"Upcoming Events"]}),(0,a.jsx)(y(),{href:"/school-admin/calendar",className:"btn btn-outline-info btn-sm",children:"View All"})]})}),(0,a.jsx)("div",{className:"card-body p-0",children:(0,a.jsx)("div",{className:"list-group list-group-flush",children:(()=>{let e=new Date,s=new Date(e.getTime()+2592e6);return z.filter(t=>{let a=new Date(t.startDate);return a>=e&&a<=s}).sort((e,s)=>new Date(e.startDate).getTime()-new Date(s.startDate).getTime()).slice(0,5)})().map(e=>(0,a.jsx)("div",{className:"list-group-item border-0 py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-start",children:[(0,a.jsx)("div",{className:"event-dot ".concat(getEventTypeColor(e.eventType))}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("h6",{className:"fw-semibold mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-muted small mb-1",children:e.description}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsxs)("small",{className:"text-muted",children:[(0,a.jsx)(g.Z,{size:14,className:"me-1"}),formatEventTime(e.startDate)]}),(0,a.jsxs)("small",{className:"text-muted",children:[(0,a.jsx)(l.Z,{size:14,className:"me-1"}),e.location]})]})]})]})},e.id))})})]}),(0,a.jsxs)("div",{className:"card dashboard-card border-0 shadow mb-4",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsxs)("h5",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-chart-pie me-2 text-warning"}),"Quick Overview"]})}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"quick-overview-item",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsx)("span",{className:"text-muted",children:"Attendance Rate"}),(0,a.jsxs)("span",{className:"fw-bold text-success",children:[e.attendanceRate,"%"]})]}),(0,a.jsx)("div",{className:"progress mt-2",style:{height:"6px"},children:(0,a.jsx)("div",{className:"progress-bar bg-success",style:{width:"".concat(e.attendanceRate,"%")}})})]}),(0,a.jsxs)("div",{className:"quick-overview-item",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsx)("span",{className:"text-muted",children:"Average Score"}),(0,a.jsxs)("span",{className:"fw-bold text-primary",children:[e.averageScore,"%"]})]}),(0,a.jsx)("div",{className:"progress mt-2",style:{height:"6px"},children:(0,a.jsx)("div",{className:"progress-bar bg-primary",style:{width:"".concat(e.averageScore,"%")}})})]}),(0,a.jsxs)("div",{className:"quick-overview-item",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsx)("span",{className:"text-muted",children:"Active Classes"}),(0,a.jsxs)("span",{className:"fw-bold text-warning",children:[e.activeClasses,"/",e.totalClasses]})]}),(0,a.jsx)("div",{className:"progress mt-2",style:{height:"6px"},children:(0,a.jsx)("div",{className:"progress-bar bg-warning",style:{width:"".concat(e.activeClasses/e.totalClasses*100,"%")}})})]}),(0,a.jsx)("div",{className:"quick-overview-item",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsx)("span",{className:"text-muted",children:"Pending Tasks"}),(0,a.jsx)("span",{className:"fw-bold text-danger",children:e.pendingTasks})]})})]})]}),(0,a.jsxs)("div",{className:"card dashboard-card border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsxs)("h5",{className:"fw-bold text-dark mb-0",children:[(0,a.jsx)("i",{className:"fas fa-history me-2 text-secondary"}),"Recent Activities"]})}),(0,a.jsx)("div",{className:"card-body p-0",children:(0,a.jsx)("div",{className:"list-group list-group-flush",children:I.slice(0,5).map((e,s)=>(0,a.jsx)("div",{className:"list-group-item border-0 py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-start",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 text-primary rounded-circle me-3",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("i",{className:"fas fa-".concat(e.icon," fa-sm")})}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("p",{className:"mb-1 small",children:e.description}),(0,a.jsx)("small",{className:"text-muted",children:e.time})]})]})},s))})})]})]})]})]})]})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:n,headers:r,...c}=s,i="".concat(a).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(i+="?".concat(e))}let l={"Content-Type":"application/json",...r};t&&(l.Authorization="Bearer ".concat(t));try{let e=await fetch(i,{...c,headers:l}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){}},function(e){e.O(0,[6685,1176,2971,2472,1744],function(){return e(e.s=9386)}),_N_E=e.O()}]);