(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1482],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return createLucideIcon}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:o,children:i,...c},d)=>(0,a.createElement)("svg",{ref:d,...n,width:r,height:r,stroke:s,strokeWidth:o?24*Number(l)/Number(r):l,className:`lucide lucide-${toKebabCase(e)}`,...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(i)?i:[i])||[]]));return s.displayName=`${e}`,s}},3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},2442:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6224:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7216:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},774:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},6142:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4280:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6245:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9779:function(e,t,s){Promise.resolve().then(s.bind(s,2251))},2251:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return StudentEditPage}});var a=s(7437),n=s(2265),r=s(3067),l=s(7972),o=s(774),i=s(7216),c=s(9670),d=s(4280),m=s(2442),u=s(6224),h=s(6142),f=s(5750),p=s(9865),g=s(6245),x=s(1396),b=s.n(x),N=s(4033),j=s(6454),v=s(1376),y=s(6820),w=s.n(y);function StudentEditPage(){let e=(0,N.useParams)(),t=(0,N.useRouter)(),s=e.id,[x,y]=(0,n.useState)(null),[C,k]=(0,n.useState)({firstName:"",lastName:"",email:"",mobile:"",dateOfBirth:"",gender:"other",address:"",city:"",state:"",country:"India",postalCode:"",enrollNumber:"",parentName:"",parentPhone:"",parentEmail:"",emergencyContact:"",previousSchool:"",classId:"",status:"active"}),[S,E]=(0,n.useState)(!0),[P,I]=(0,n.useState)(!1),[Z,M]=(0,n.useState)(""),[q,A]=(0,n.useState)(""),[T,z]=(0,n.useState)([]),[O,L]=(0,n.useState)(!0),[B,R]=(0,n.useState)(""),[D,U]=(0,n.useState)(!1),[F,G]=(0,n.useState)(!1),[V,H]=(0,n.useState)(null),[$,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s&&(fetchStudent(),fetchClasses())},[s]);let fetchClasses=async()=>{try{L(!0);let e=(0,j.hV)();if(!e){console.error("No authentication token found");return}let t=await fetch("".concat(j.CT,"/classes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();if(Array.isArray(s)){let e=s.filter(e=>"ACTIVE"===e.status||"active"===e.status);z(e)}else z([])}catch(e){console.error("Error fetching classes:",e),z([])}finally{L(!1)}},fetchStudent=async()=>{try{E(!0),M("");let e=(0,j.hV)();if(!e)throw Error("Authentication required. Please login again.");let t=await (0,j.R1)("/students/".concat(s),{token:e});y(t),k({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",mobile:t.mobile||"",dateOfBirth:t.dateOfBirth?t.dateOfBirth.split("T")[0]:"",gender:t.gender||"other",address:t.address||"",city:t.city||"",state:t.state||"",country:t.country||"India",postalCode:t.postalCode||"",enrollNumber:t.enrollNumber||"",parentName:t.parentName||"",parentPhone:t.parentPhone||"",parentEmail:t.parentEmail||"",emergencyContact:t.emergencyContact||"",previousSchool:t.previousSchool||"",classId:t.currentClassId?t.currentClassId.toString():"",status:t.status||"active"}),console.log("Student fetched:",t)}catch(e){console.error("Error fetching student:",e),M((null==e?void 0:e.message)||"Failed to fetch student details")}finally{E(!1)}},handleInputChange=e=>{let{name:t,value:s}=e.target;k(e=>({...e,[t]:s})),Z&&M(""),q&&A("")},handleCopyPassword=async()=>{if(B)try{await navigator.clipboard.writeText(B),G(!0),setTimeout(()=>G(!1),2e3)}catch(e){console.error("Failed to copy password:",e)}},handleResetPassword=async()=>{if(!B){w().fire({icon:"warning",title:"No Password",text:"Please generate or enter a password first"});return}let e=(0,v.uo)(B);if(!e.isValid){w().fire({icon:"error",title:"Weak Password",html:'<div class="text-start">\n          <p>Password requirements not met:</p>\n          <ul>'.concat(e.errors.map(e=>"<li>".concat(e,"</li>")).join(""),"</ul>\n        </div>")});return}let t=await w().fire({icon:"question",title:"Reset Password?",html:"\n        <p>Are you sure you want to reset the password for <strong>".concat(null==x?void 0:x.firstName," ").concat(null==x?void 0:x.lastName,'</strong>?</p>\n        <div class="alert alert-warning mt-3">\n          <i class="fas fa-exclamation-triangle me-2"></i>\n          The student will need to use the new password to login.\n        </div>\n      '),showCancelButton:!0,confirmButtonText:"Yes, Reset Password",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545"});if(t.isConfirmed){_(!0);try{let e=(0,j.hV)();if(!e)throw Error("Authentication required");let t=await fetch("".concat(j.CT,"/students/").concat(s,"/reset-password"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({newPassword:B})});if(!t.ok)throw Error("Failed to reset password");await w().fire({icon:"success",title:"Password Reset Successful!",html:"\n          <p>Password has been successfully reset for ".concat(null==x?void 0:x.firstName," ").concat(null==x?void 0:x.lastName,'</p>\n          <div class="alert alert-info mt-3">\n            <strong>New Password:</strong> <code>').concat(B,'</code>\n            <button class="btn btn-sm btn-outline-primary ms-2" onclick="navigator.clipboard.writeText(\'').concat(B,'\')">\n              <i class="fas fa-copy"></i> Copy\n            </button>\n          </div>\n          <p class="text-muted small">Make sure to share this password with the student and parent securely.</p>\n        '),confirmButtonText:"OK"}),R(""),H(null),U(!1)}catch(e){console.error("Error resetting password:",e),w().fire({icon:"error",title:"Error",text:(null==e?void 0:e.message)||"Failed to reset password. Please try again."})}finally{_(!1)}}},validateForm=()=>{let e={};return C.firstName.trim()||(e.firstName="First name is required"),C.lastName.trim()||(e.lastName="Last name is required"),C.email.trim()||(e.email="Email is required"),M(Object.values(e).join(", ")),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){I(!0),M(""),A("");try{let e=(0,j.hV)();if(!e)throw Error("Authentication required. Please login again.");let a=(0,j.vF)();if(!a){let e=localStorage.getItem("user");if(e)try{a=JSON.parse(e)}catch(e){console.error("Failed to parse user from localStorage:",e)}}if(!a||!a.schoolId)throw Error("School ID not found. Please login again.");let n={firstName:C.firstName,lastName:C.lastName,email:C.email,mobile:C.mobile||null,dateOfBirth:C.dateOfBirth||null,gender:C.gender,address:C.address||null,city:C.city||null,state:C.state||null,country:C.country,postalCode:C.postalCode||null,enrollNumber:C.enrollNumber||null,parentName:C.parentName||null,parentPhone:C.parentPhone||null,parentEmail:C.parentEmail||null,emergencyContact:C.emergencyContact||null,previousSchool:C.previousSchool||null,classId:C.classId||null,status:C.status};console.log("Updating student:",n);let r=await (0,j.pE)("/students/".concat(s),n,{token:e});console.log("Student updated successfully:",r),A("Student updated successfully!"),await w().fire({icon:"success",title:"Success!",text:"Student information has been updated successfully.",timer:1500,showConfirmButton:!1}),t.push("/school-admin/students")}catch(t){console.error("Error updating student:",t);let e=(null==t?void 0:t.message)||"Error updating student. Please try again.";e.includes("Enrollment number already exists")&&(e="This enrollment number already exists in the selected class. Please use a different enrollment number."),M(e),w().fire({icon:"error",title:"Error",text:e})}finally{I(!1)}}};return S?(0,a.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-3 text-muted",children:"Loading student details..."})]})}):Z&&!x?(0,a.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,a.jsx)("h5",{className:"alert-heading",children:"Error Loading Student"}),(0,a.jsx)("p",{children:Z}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,a.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>window.location.reload(),children:"Try Again"}),(0,a.jsx)(b(),{href:"/school-admin/students",className:"btn btn-secondary",children:"Back to Students"})]})]})})}):(0,a.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,a.jsx)("div",{className:"container-fluid py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)(b(),{href:"/school-admin/students",className:"btn btn-outline-secondary",children:(0,a.jsx)(r.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,a.jsx)("i",{className:"fas fa-user-edit me-2 text-primary"}),"Edit Student"]}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Update student information and profile"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(b(),{href:"/school-admin/students",className:"btn btn-outline-secondary me-2",children:"Cancel"})})]})})}),(0,a.jsx)("div",{className:"container-fluid py-4",children:(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-10 col-xl-8",children:(0,a.jsx)("div",{className:"card border-0 shadow",children:(0,a.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[q&&(0,a.jsxs)("div",{className:"alert alert-success d-flex align-items-center",role:"alert",children:[(0,a.jsx)("i",{className:"fas fa-check-circle me-2"}),(0,a.jsx)("div",{children:q})]}),Z&&(0,a.jsxs)("div",{className:"alert alert-danger d-flex align-items-center",role:"alert",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle me-2"}),(0,a.jsx)("div",{children:Z})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,children:[(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(l.Z,{size:24,className:"text-primary"})}),(0,a.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Personal Information"})]}),(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"firstName",value:C.firstName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter first name",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"lastName",value:C.lastName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter last name",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold",children:["Email Address ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"email",name:"email",value:C.email,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter email address",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Mobile Number"}),(0,a.jsx)("input",{type:"tel",name:"mobile",value:C.mobile,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter mobile number"})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Date of Birth"}),(0,a.jsx)("input",{type:"date",name:"dateOfBirth",value:C.dateOfBirth,onChange:handleInputChange,className:"form-control form-control-lg"})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Gender"}),(0,a.jsxs)("select",{name:"gender",value:C.gender,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,a.jsx)("option",{value:"male",children:"Male"}),(0,a.jsx)("option",{value:"female",children:"Female"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:C.status,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"graduated",children:"Graduated"}),(0,a.jsx)("option",{value:"transferred",children:"Transferred"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Enrollment Number"}),(0,a.jsx)("input",{type:"text",name:"enrollNumber",value:C.enrollNumber,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter enrollment number"}),(0,a.jsxs)("small",{className:"text-muted d-block mt-2",children:[(0,a.jsx)("i",{className:"fas fa-info-circle me-1"}),"Enrollment number must be unique within the selected class"]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Previous School"}),(0,a.jsx)("input",{type:"text",name:"previousSchool",value:C.previousSchool,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter previous school name"})]})]})]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-danger bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(o.Z,{size:24,className:"text-danger"})}),(0,a.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Password Reset"})]}),(0,a.jsx)("div",{className:"card bg-light border-warning",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"alert alert-warning d-flex align-items-start mb-3",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-triangle me-2 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Security Notice:"})," Reset the student's password if they forgot it or for security reasons. Make sure to share the new password securely with the student and parent."]})]}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"New Password"}),(0,a.jsxs)("div",{className:"input-group input-group-lg",children:[(0,a.jsx)("input",{type:D?"text":"password",value:B,onChange:e=>{let t=e.target.value;R(t);let s=(0,v.uo)(t);H(s)},className:"form-control",placeholder:"Enter new password or generate one"}),(0,a.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>U(!D),title:D?"Hide password":"Show password",children:D?(0,a.jsx)(i.Z,{size:18}):(0,a.jsx)(c.Z,{size:18})}),(0,a.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{let e=(0,v.G$)(12);R(e);let t=(0,v.uo)(e);H(t),U(!0)},title:"Generate secure password",children:[(0,a.jsx)(d.Z,{size:18})," Generate"]}),B&&(0,a.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:handleCopyPassword,title:"Copy password",children:F?(0,a.jsx)(m.Z,{size:18}):(0,a.jsx)(u.Z,{size:18})})]}),V&&B&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,a.jsx)("small",{className:"text-muted",children:"Password Strength:"}),(0,a.jsx)("small",{className:"text-".concat((0,v.zU)(V.strength)," fw-bold"),children:(0,v.sO)(V.strength)})]}),(0,a.jsx)("div",{className:"progress",style:{height:"6px"},children:(0,a.jsx)("div",{className:"progress-bar bg-".concat((0,v.zU)(V.strength)),role:"progressbar",style:{width:"".concat(V.score,"%")}})})]}),(0,a.jsxs)("small",{className:"text-muted d-block mt-2",children:[(0,a.jsx)("i",{className:"fas fa-info-circle me-1"}),"Password must contain: uppercase, lowercase, number, and special character"]})]}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("button",{type:"button",onClick:handleResetPassword,disabled:$||!B,className:"btn btn-danger btn-lg w-100",children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Resetting Password..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{size:18,className:"me-2"}),"Reset Password"]})})})]})]})})]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(h.Z,{size:24,className:"text-info"})}),(0,a.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Address Information"})]}),(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Address"}),(0,a.jsx)("textarea",{name:"address",value:C.address,onChange:handleInputChange,className:"form-control form-control-lg",rows:3,placeholder:"Enter complete address"})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"City"}),(0,a.jsx)("input",{type:"text",name:"city",value:C.city,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter city"})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"State"}),(0,a.jsx)("input",{type:"text",name:"state",value:C.state,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter state"})]}),(0,a.jsxs)("div",{className:"col-md-4",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Country"}),(0,a.jsx)("input",{type:"text",name:"country",value:C.country,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter country"})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Postal Code"}),(0,a.jsx)("input",{type:"text",name:"postalCode",value:C.postalCode,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter postal code"})]})]})]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(f.Z,{size:24,className:"text-success"})}),(0,a.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Parent/Guardian Information"})]}),(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Parent/Guardian Name"}),(0,a.jsx)("input",{type:"text",name:"parentName",value:C.parentName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent/guardian name"})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Parent Phone"}),(0,a.jsx)("input",{type:"tel",name:"parentPhone",value:C.parentPhone,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent phone number"})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Parent Email"}),(0,a.jsx)("input",{type:"email",name:"parentEmail",value:C.parentEmail,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent email address"})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Emergency Contact"}),(0,a.jsx)("input",{type:"tel",name:"emergencyContact",value:C.emergencyContact,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter emergency contact number"})]})]})]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(p.Z,{size:24,className:"text-warning"})}),(0,a.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Class Assignment"})]}),(0,a.jsx)("div",{className:"row g-4",children:(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold",children:["Assign to Class",O&&(0,a.jsx)("span",{className:"spinner-border spinner-border-sm ms-2",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),(0,a.jsxs)("select",{name:"classId",value:C.classId,onChange:handleInputChange,className:"form-select form-select-lg",disabled:O,children:[(0,a.jsx)("option",{value:"",children:O?"Loading classes...":0===T.length?"No classes available":"Select a class (optional)"}),!O&&T.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),!O&&0===T.length&&(0,a.jsxs)("small",{className:"text-muted mt-2 d-block",children:[(0,a.jsx)("i",{className:"fas fa-info-circle me-1"}),"No classes available. Please create classes first from the"," ",(0,a.jsx)(b(),{href:"/school-admin/create-class",className:"text-primary",children:"Create Class"})," ","page."]})]})})]}),(0,a.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,a.jsxs)(b(),{href:"/school-admin/students",className:"btn btn-secondary btn-lg px-5",children:[(0,a.jsx)("i",{className:"fas fa-times me-2"}),"Cancel"]}),(0,a.jsx)("button",{type:"submit",disabled:P,className:"btn btn-primary btn-lg px-5",children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Updating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{size:18,className:"me-2"}),"Update Student"]})})]})]})]})})})})})]})}},6454:function(e,t,s){"use strict";s.d(t,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,s){super(t),this.status=e,this.message=t,this.data=s,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,params:n,headers:r,...l}=t,o="".concat(a).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,t)=>{let[s,a]=t;return null!=a&&(e[s]=String(a)),e},{})).toString();e&&(o+="?".concat(e))}let i={"Content-Type":"application/json",...r};s&&(i.Authorization="Bearer ".concat(s));try{let e=await fetch(o,{...l,headers:i}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,s){return apiRequest(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,s){return apiRequest(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,s){return apiRequest(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},1376:function(e,t,s){"use strict";s.d(t,{G$:function(){return generateSecurePassword},GB:function(){return validatePasswordComprehensive},sO:function(){return getStrengthLabel},uo:function(){return validatePassword},zU:function(){return getStrengthColor}});let a={minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumber:!0,requireSpecial:!0};function validatePassword(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s=[],n=0;return t.minLength&&e.length<t.minLength?s.push("Password must be at least ".concat(t.minLength," characters long")):n+=20,t.requireUppercase&&!/[A-Z]/.test(e)?s.push("Password must contain at least one uppercase letter"):/[A-Z]/.test(e)&&(n+=20),t.requireLowercase&&!/[a-z]/.test(e)?s.push("Password must contain at least one lowercase letter"):/[a-z]/.test(e)&&(n+=20),t.requireNumber&&!/[0-9]/.test(e)?s.push("Password must contain at least one number"):/[0-9]/.test(e)&&(n+=20),t.requireSpecial&&!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)?s.push("Password must contain at least one special character (!@#$%^&*...)"):/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)&&(n+=20),e.length>=12&&(n+=10),e.length>=16&&(n+=10),{isValid:0===s.length,errors:s,strength:n<40?"weak":n<60?"medium":n<80?"strong":"very-strong",score:Math.min(n,100)}}function passwordsMatch(e,t){return e===t}function getStrengthColor(e){switch(e){case"weak":return"danger";case"medium":return"warning";case"strong":return"info";case"very-strong":return"success";default:return"secondary"}}function getStrengthLabel(e){switch(e){case"weak":return"Weak \uD83D\uDE1F";case"medium":return"Medium \uD83D\uDE10";case"strong":return"Strong \uD83D\uDE42";case"very-strong":return"Very Strong \uD83D\uDE03";default:return""}}let n=["password","12345678","123456789","qwerty","abc123","password123","admin","letmein","welcome","monkey"];function isCommonPassword(e){return n.includes(e.toLowerCase())}function validatePasswordComprehensive(e,t,s){let a=[],n=validatePassword(e,s);return a.push(...n.errors),passwordsMatch(e,t)||a.push("Passwords do not match"),isCommonPassword(e)&&a.push("This password is too common. Please choose a more unique password"),{isValid:0===a.length,errors:a}}function generateSecurePassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="abcdefghijklmnopqrstuvwxyz",a="0123456789",n="!@#$%^&*()_+-=[]{}|;:,.<>?",r="";r+=t[Math.floor(Math.random()*t.length)]+s[Math.floor(Math.random()*s.length)]+a[Math.floor(Math.random()*a.length)]+n[Math.floor(Math.random()*n.length)];let l=t+s+a+n;for(let t=r.length;t<e;t++)r+=l[Math.floor(Math.random()*l.length)];return r.split("").sort(()=>Math.random()-.5).join("")}},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=9779)}),_N_E=e.O()}]);