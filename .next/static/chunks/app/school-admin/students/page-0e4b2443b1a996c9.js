(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6187],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return createLucideIcon}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:c,...o},d)=>(0,a.createElement)("svg",{ref:d,...n,width:r,height:r,stroke:s,strokeWidth:l?24*Number(i)/Number(r):i,className:`lucide lucide-${toKebabCase(e)}`,...o},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return s.displayName=`${e}`,s}},3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5817:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2482:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5367:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);let n=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6805:function(e,t,s){Promise.resolve().then(s.bind(s,5391))},5391:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return StudentsPage}});var a=s(7437),n=s(2265),r=s(3067),i=s(5817),l=s(9883),c=s(1827),o=s(2482),d=s(5750),u=s(9670),h=s(9617),m=s(5367),x=s(1396),f=s.n(x),p=s(6454);function StudentsPage(){let[e,t]=(0,n.useState)([]),[s,x]=(0,n.useState)([]),[g,j]=(0,n.useState)(!0),[N,v]=(0,n.useState)(""),[y,b]=(0,n.useState)("all"),[k,w]=(0,n.useState)("all");(0,n.useEffect)(()=>{fetchStudents()},[]);let fetchStudents=async()=>{try{j(!0);let e=localStorage.getItem("token");if(!e){console.error("No authentication token found");return}let s=await fetch("".concat(p.CT,"/students"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();console.log("Students fetched:",e),t(e),x(e)}else console.error("Failed to fetch students:",s.status,s.statusText),t([]),x([])}catch(e){console.error("Error fetching students:",e),t([]),x([])}finally{j(!1)}};(0,n.useEffect)(()=>{let t=e;N&&(t=t.filter(e=>{var t;return"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(N.toLowerCase())||e.email.toLowerCase().includes(N.toLowerCase())||(null===(t=e.mobile)||void 0===t?void 0:t.includes(N))})),"all"!==y&&(t=t.filter(e=>e.status===y)),"all"!==k&&(t=t.filter(e=>e.currentClassId===parseInt(k))),x(t)},[e,N,y,k]);let handleDeleteStudent=async e=>{if(confirm("⚠️ Are you sure you want to delete this student? This action cannot be undone."))try{let s=localStorage.getItem("token");if(!s){alert("Authentication required. Please login again.");return}let a=await fetch("".concat(p.CT,"/students/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(a.ok)t(t=>t.filter(t=>t.id!==e)),alert("✅ Student deleted successfully!"),fetchStudents();else{let e=await a.json().catch(()=>({}));alert("❌ Failed to delete student: ".concat(e.message||"Unknown error"))}}catch(e){console.error("Error deleting student:",e),alert("❌ Error deleting student. Please try again.")}},formatDate=e=>{let t=new Date(e);return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})},getYearsSinceEnrollment=e=>{let t=new Date(e),s=new Date,a=s.getFullYear()-t.getFullYear();return 1===a?"1 year":"".concat(a," years")},getInitials=(e,t)=>"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase(),getStatusBadgeClass=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-success";case"inactive":default:return"bg-secondary";case"graduated":return"bg-primary";case"transferred":return"bg-info";case"suspended":return"bg-danger"}},formatStatus=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"Unknown";return g?(0,a.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-3 text-muted",children:"Loading students..."})]})}):(0,a.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,a.jsxs)("div",{className:"container-fluid py-3",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)(f(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary",children:(0,a.jsx)(r.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,a.jsx)("i",{className:"fas fa-users me-2 text-primary"}),"Students Management"]}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Manage all students in your school"})]})]}),(0,a.jsxs)("div",{className:"ms-auto",children:[(0,a.jsxs)(f(),{href:"/school-admin/students/export",className:"btn btn-outline-primary me-2",children:[(0,a.jsx)(i.Z,{size:18,className:"me-2"}),"Export"]}),(0,a.jsxs)(f(),{href:"/school-admin/add-student",className:"btn btn-primary",children:[(0,a.jsx)(l.Z,{size:18,className:"me-2"}),"+ Add New Student"]})]})]})}),(0,a.jsxs)("div",{className:"container-fluid py-4",children:[(0,a.jsxs)("div",{className:"row g-3 mb-4",children:[(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text bg-white border-end-0",children:(0,a.jsx)(c.Z,{size:18,className:"text-muted"})}),(0,a.jsx)("input",{type:"text",className:"form-control border-start-0",placeholder:"Search students...",value:N,onChange:e=>v(e.target.value)})]})}),(0,a.jsx)("div",{className:"col-md-2",children:(0,a.jsxs)("select",{className:"form-select",value:y,onChange:e=>b(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"graduated",children:"Graduated"}),(0,a.jsx)("option",{value:"transferred",children:"Transferred"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]})}),(0,a.jsx)("div",{className:"col-md-2",children:(0,a.jsxs)("select",{className:"form-select",value:k,onChange:e=>w(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Classes"}),(0,a.jsx)("option",{value:"1",children:"Class 1A"}),(0,a.jsx)("option",{value:"2",children:"Class 2A"}),(0,a.jsx)("option",{value:"3",children:"Class 3A"}),(0,a.jsx)("option",{value:"4",children:"Class 4A"}),(0,a.jsx)("option",{value:"5",children:"Class 5A"})]})}),(0,a.jsx)("div",{className:"col-md-2",children:(0,a.jsxs)("button",{className:"btn btn-outline-secondary w-100",children:[(0,a.jsx)(o.Z,{size:18,className:"me-2"}),"Filters"]})})]}),(0,a.jsxs)("div",{className:"card border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white border-0 py-3",children:(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,a.jsxs)("h5",{className:"mb-0 fw-bold text-dark",children:["Students List",(0,a.jsxs)("span",{className:"badge bg-primary ms-2",children:[s.length," students"]})]})})}),(0,a.jsx)("div",{className:"card-body p-0",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)(d.Z,{size:48,className:"text-muted mb-3"}),(0,a.jsx)("h5",{className:"text-muted",children:"No students found"}),(0,a.jsx)("p",{className:"text-muted",children:"Try adjusting your search or filters"}),(0,a.jsxs)(f(),{href:"/school-admin/add-student",className:"btn btn-primary",children:[(0,a.jsx)(l.Z,{size:18,className:"me-2"}),"Add First Student"]})]}):(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border-0",children:"Student"}),(0,a.jsx)("th",{className:"border-0",children:"Contact"}),(0,a.jsx)("th",{className:"border-0",children:"Class"}),(0,a.jsx)("th",{className:"border-0",children:"Status"}),(0,a.jsx)("th",{className:"border-0",children:"Enrollment Date"}),(0,a.jsx)("th",{className:"border-0",children:"Guardian"}),(0,a.jsx)("th",{className:"border-0",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px"},children:(0,a.jsx)("span",{className:"text-primary fw-bold",children:getInitials(e.firstName,e.lastName)})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"fw-semibold",children:[e.firstName," ",e.lastName]})})]})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{className:"text-muted",children:e.email}),(0,a.jsx)("small",{className:"text-muted",children:e.mobile||"No mobile"})]}),(0,a.jsx)("td",{children:e.className?(0,a.jsx)("span",{className:"badge bg-primary",children:e.className}):(0,a.jsx)("span",{className:"badge bg-secondary",children:"No Class"})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge ".concat(getStatusBadgeClass(e.status)),children:formatStatus(e.status)})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{children:formatDate(e.enrollmentDate)}),(0,a.jsx)("small",{className:"text-muted",children:getYearsSinceEnrollment(e.enrollmentDate)})]}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{className:"text-muted",children:e.parentName||"Not specified"}),(0,a.jsx)("small",{className:"text-muted",children:e.parentEmail||"No email"})]}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"btn-group",role:"group",children:[(0,a.jsx)(f(),{href:"/school-admin/students/".concat(e.id),className:"btn btn-sm btn-outline-primary",children:(0,a.jsx)(u.Z,{size:16})}),(0,a.jsx)(f(),{href:"/school-admin/students/".concat(e.id,"/edit"),className:"btn btn-sm btn-outline-warning",children:(0,a.jsx)(h.Z,{size:16})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>handleDeleteStudent(e.id),children:(0,a.jsx)(m.Z,{size:16})})]})})]},e.id))})]})})})]}),s.length>0&&(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-muted",children:["Showing ",s.length," of ",e.length," students"]}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,a.jsx)("li",{className:"page-item disabled",children:(0,a.jsx)("a",{className:"page-link",href:"#",tabIndex:-1,children:"Previous"})}),(0,a.jsx)("li",{className:"page-item active",children:(0,a.jsx)("a",{className:"page-link",href:"#",children:"1"})}),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link",href:"#",children:"2"})}),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link",href:"#",children:"3"})}),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link",href:"#",children:"Next"})})]})})]})]})]})}},6454:function(e,t,s){"use strict";s.d(t,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,s){super(t),this.status=e,this.message=t,this.data=s,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,params:n,headers:r,...i}=t,l="".concat(a).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,t)=>{let[s,a]=t;return null!=a&&(e[s]=String(a)),e},{})).toString();e&&(l+="?".concat(e))}let c={"Content-Type":"application/json",...r};s&&(c.Authorization="Bearer ".concat(s));try{let e=await fetch(l,{...i,headers:c}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,s){return apiRequest(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,s){return apiRequest(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,s){return apiRequest(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}}},function(e){e.O(0,[1176,2971,2472,1744],function(){return e(e.s=6805)}),_N_E=e.O()}]);