(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4597],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:c,...d},o)=>(0,a.createElement)("svg",{ref:o,...i,width:l,height:l,stroke:t,strokeWidth:r?24*Number(n)/Number(l):n,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${e}`,t}},3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2505:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5817:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2882:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6020:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},7452:function(e,s,t){Promise.resolve().then(t.bind(t,2771))},2771:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SchoolAdminSubmissionsPage}});var a=t(7437),i=t(2265),l=t(1396),n=t.n(l),r=t(3067),c=t(6637),d=t(1827),o=t(9670),m=t(2882),u=t(5817),h=t(3008),x=t(2505),v=t(6020),b=t(6820),j=t.n(b),g=t(6454);function SchoolAdminSubmissionsPage(){var e,s,t,l,b,p,f,N,y,w,k,S,C,Z,A;let[z,T]=(0,i.useState)([]),[R,E]=(0,i.useState)(!0),[L,P]=(0,i.useState)(""),[D,F]=(0,i.useState)("all"),[I,q]=(0,i.useState)(null),[B,O]=(0,i.useState)(!1),[G,M]=(0,i.useState)(!1),[U,V]=(0,i.useState)(""),[H,J]=(0,i.useState)(""),[_,$]=(0,i.useState)(""),[K,W]=(0,i.useState)("reviewed");(0,i.useEffect)(()=>{fetchSubmissions()},[]);let fetchSubmissions=async()=>{try{let e=localStorage.getItem("token"),s=JSON.parse(localStorage.getItem("user")||"{}");if(!e)throw Error("No authentication token found");console.log("Fetching submissions for school admin:",s.schoolId);let t=s.schoolId||s.id,a=await fetch("".concat(g.CT,"/submissions/school/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok){let e=await a.text();throw console.error("Failed to fetch submissions:",e),Error("Failed to fetch submissions: ".concat(a.status))}let i=await a.json();console.log("Fetched submissions:",i.length),T(i)}catch(e){console.error("Error fetching submissions:",e),j().fire({icon:"error",title:"Error",text:e.message||"Failed to fetch submissions",footer:"Check console for more details"})}finally{E(!1)}},handleViewSubmission=e=>{q(e),O(!0)},handleStartReview=e=>{var s;q(e),V((null===(s=e.grade)||void 0===s?void 0:s.toString())||""),J(e.feedback||""),$(""),W("submitted"===e.status?"reviewed":e.status),M(!0)},handleSubmitReview=async()=>{var e,s;if(I){if(!U||0>parseFloat(U)){j().fire({icon:"warning",title:"Invalid Grade",text:"Please enter a valid grade (0 or higher)"});return}if(parseFloat(U)>((null===(e=I.task)||void 0===e?void 0:e.maxScore)||100)){j().fire({icon:"warning",title:"Grade Too High",text:"Grade cannot exceed ".concat(null===(s=I.task)||void 0===s?void 0:s.maxScore)});return}if(!H.trim()){let e=await j().fire({icon:"question",title:"No Feedback",text:"Are you sure you want to submit without feedback?",showCancelButton:!0,confirmButtonText:"Yes, Submit",cancelButtonText:"Cancel"});if(!e.isConfirmed)return}try{let e=localStorage.getItem("token"),s=await fetch("".concat(g.CT,"/submissions/").concat(I.id,"/review"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({grade:parseFloat(U),feedback:H.trim(),teacherNotes:_.trim(),status:K})});if(s.ok)await j().fire({icon:"success",title:"Review Submitted!",text:"Your review has been saved successfully",confirmButtonColor:"#10b981"}),M(!1),O(!1),fetchSubmissions();else throw Error("Failed to submit review")}catch(e){console.error("Error submitting review:",e),j().fire({icon:"error",title:"Error",text:"Failed to submit review. Please try again."})}}},Y=z.filter(e=>{var s,t,a,i,l,n;let r=(null===(t=e.student)||void 0===t?void 0:null===(s=t.firstName)||void 0===s?void 0:s.toLowerCase().includes(L.toLowerCase()))||(null===(i=e.student)||void 0===i?void 0:null===(a=i.lastName)||void 0===a?void 0:a.toLowerCase().includes(L.toLowerCase()))||(null===(n=e.task)||void 0===n?void 0:null===(l=n.title)||void 0===l?void 0:l.toLowerCase().includes(L.toLowerCase())),c="all"===D||e.status===D;return r&&c}),getStatusBadge=e=>{let s={draft:{class:"bg-warning",label:"Draft"},submitted:{class:"bg-info",label:"Submitted"},reviewed:{class:"bg-primary",label:"Reviewed"},approved:{class:"bg-success",label:"Approved"},rejected:{class:"bg-danger",label:"Rejected"}},t=s[e]||s.submitted;return(0,a.jsx)("span",{className:"badge ".concat(t.class),children:t.label})},getTypeBadge=e=>(0,a.jsx)("span",{className:"badge ".concat({assignment:"bg-primary",homework:"bg-success",project:"bg-info",quiz:"bg-warning",exam:"bg-danger"}[null==e?void 0:e.toLowerCase()]||"bg-secondary"),children:e}),Q={total:z.length,submitted:z.filter(e=>"submitted"===e.status).length,reviewed:z.filter(e=>"reviewed"===e.status||"approved"===e.status).length,pending:z.filter(e=>"draft"===e.status).length};return R?(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(n(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary me-3",children:(0,a.jsx)(r.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"h3 mb-0",children:"All Submissions"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"View all student submissions across the school"})]})]})}),(0,a.jsxs)("div",{className:"row g-3 mb-4",children:[(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(c.Z,{size:24,className:"text-primary"})}),(0,a.jsx)("h4",{className:"mb-1",children:Q.total}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Total Submissions"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-info bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(c.Z,{size:24,className:"text-info"})}),(0,a.jsx)("h4",{className:"mb-1",children:Q.submitted}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Awaiting Review"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-success bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(c.Z,{size:24,className:"text-success"})}),(0,a.jsx)("h4",{className:"mb-1",children:Q.reviewed}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Reviewed"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-warning bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(c.Z,{size:24,className:"text-warning"})}),(0,a.jsx)("h4",{className:"mb-1",children:Q.pending}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Draft"})]})})})]}),(0,a.jsx)("div",{className:"card mb-4",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text",children:(0,a.jsx)(d.Z,{size:16})}),(0,a.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by student name or assignment...",value:L,onChange:e=>P(e.target.value)})]})}),(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsxs)("select",{className:"form-select",value:D,onChange:e=>F(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"})]})})]})})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h5",{className:"mb-0",children:"All Submissions"}),(0,a.jsxs)("span",{className:"badge bg-primary",children:[Y.length," submissions"]})]})}),(0,a.jsxs)("div",{className:"card-body p-0",children:[(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Student"}),(0,a.jsx)("th",{children:"Class"}),(0,a.jsx)("th",{children:"Assignment"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Submitted At"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Grade"}),(0,a.jsx)("th",{children:"Attachments"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:Y.map(e=>{var s,t,i,l,n,r,c,d;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fw-bold",children:[null===(s=e.student)||void 0===s?void 0:s.firstName," ",null===(t=e.student)||void 0===t?void 0:t.lastName]}),(0,a.jsx)("small",{className:"text-muted",children:null===(i=e.student)||void 0===i?void 0:i.email})]})}),(0,a.jsx)("td",{children:(null===(l=e.student)||void 0===l?void 0:l.className)?(0,a.jsx)("span",{className:"badge bg-secondary",children:e.student.className}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{className:"fw-semibold",children:null===(n=e.task)||void 0===n?void 0:n.title}),(0,a.jsxs)("small",{className:"text-muted",children:["Max: ",null===(r=e.task)||void 0===r?void 0:r.maxScore," pts"]})]}),(0,a.jsx)("td",{children:getTypeBadge((null===(c=e.task)||void 0===c?void 0:c.type)||"assignment")}),(0,a.jsx)("td",{children:(0,a.jsx)("small",{children:new Date(e.submittedAt).toLocaleString()})}),(0,a.jsx)("td",{children:getStatusBadge(e.status)}),(0,a.jsx)("td",{children:e.grade?(0,a.jsxs)("span",{className:"fw-bold text-success",children:[e.grade," / ",null===(d=e.task)||void 0===d?void 0:d.maxScore]}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsx)("td",{children:e.attachments&&e.attachments.length>0?(0,a.jsxs)("span",{className:"badge bg-secondary",children:[(0,a.jsx)("i",{className:"fas fa-paperclip me-1"}),e.attachments.length]}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex gap-1",children:[(0,a.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>handleViewSubmission(e),title:"View Details",children:(0,a.jsx)(o.Z,{size:14})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-success",onClick:()=>handleStartReview(e),title:"Review & Grade",children:(0,a.jsx)(m.Z,{size:14})})]})})]},e.id)})})]})}),0===Y.length&&(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)(c.Z,{size:48,className:"text-muted mb-3"}),(0,a.jsx)("h5",{children:"No submissions found"}),(0,a.jsx)("p",{className:"text-muted",children:"Try adjusting your filters"})]})]})]}),B&&I&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,a.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,a.jsxs)("h5",{className:"modal-title",children:[(0,a.jsx)(c.Z,{size:20,className:"me-2"}),"Submission Details"]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>O(!1)})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Student:"})," ",null===(e=I.student)||void 0===e?void 0:e.firstName," ",null===(s=I.student)||void 0===s?void 0:s.lastName]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Class:"})," ",(null===(t=I.student)||void 0===t?void 0:t.className)||"-"]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Assignment:"})," ",null===(l=I.task)||void 0===l?void 0:l.title]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Type:"})," ",getTypeBadge((null===(b=I.task)||void 0===b?void 0:b.type)||"assignment")]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Submitted:"})," ",new Date(I.submittedAt).toLocaleString()]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Status:"})," ",getStatusBadge(I.status)]})]}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("strong",{children:"Content:"}),(0,a.jsx)("div",{className:"p-3 bg-light rounded mt-2",children:I.content||(0,a.jsx)("em",{className:"text-muted",children:"No content provided"})})]}),I.attachments&&I.attachments.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("strong",{children:"Attachments:"}),(0,a.jsx)("div",{className:"list-group mt-2",children:I.attachments.map((e,s)=>{var t,i;return(0,a.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("i",{className:"fas ".concat((null===(t=e.mimetype)||void 0===t?void 0:t.includes("image"))?"fa-image text-primary":(null===(i=e.mimetype)||void 0===i?void 0:i.includes("pdf"))?"fa-file-pdf text-danger":"fa-file text-secondary"," me-2")}),(0,a.jsx)("span",{children:e.originalName}),(0,a.jsxs)("small",{className:"text-muted ms-2",children:["(",(e.size/1024).toFixed(2)," KB)"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("a",{href:"".concat(g.CT).concat(e.url),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary me-2",children:[(0,a.jsx)(o.Z,{size:14,className:"me-1"})," View"]}),(0,a.jsxs)("a",{href:"".concat(g.CT).concat(e.url),download:e.originalName,className:"btn btn-sm btn-outline-success",children:[(0,a.jsx)(u.Z,{size:14,className:"me-1"})," Download"]})]})]},s)})})]}),I.grade&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("strong",{children:"Grade:"}),(0,a.jsxs)("span",{className:"fw-bold text-success ms-2",children:[I.grade," / ",null===(p=I.task)||void 0===p?void 0:p.maxScore,"(",(I.grade/((null===(f=I.task)||void 0===f?void 0:f.maxScore)||1)*100).toFixed(1),"%)"]})]}),I.feedback&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("strong",{children:"Teacher Feedback:"}),(0,a.jsx)("div",{className:"p-3 bg-info bg-opacity-10 rounded mt-2",children:I.feedback})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>O(!1),children:"Close"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-success",onClick:()=>{O(!1),handleStartReview(I)},children:[(0,a.jsx)(m.Z,{size:16,className:"me-2"}),"Review & Grade"]})]})]})})}),G&&I&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>M(!1),children:(0,a.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"modal-content border-0 shadow-lg",children:[(0,a.jsxs)("div",{className:"modal-header bg-gradient",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:[(0,a.jsxs)("h5",{className:"modal-title text-white fw-bold d-flex align-items-center gap-2",children:[(0,a.jsx)(h.Z,{size:24}),"Review & Grade Submission"]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("div",{className:"card border-0 bg-light mb-3",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("small",{className:"text-muted",children:"Student"}),(0,a.jsxs)("p",{className:"mb-0 fw-semibold",children:[null===(N=I.student)||void 0===N?void 0:N.firstName," ",null===(y=I.student)||void 0===y?void 0:y.lastName]}),(0,a.jsx)("small",{className:"text-muted",children:null===(w=I.student)||void 0===w?void 0:w.email})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("small",{className:"text-muted",children:"Assignment"}),(0,a.jsx)("p",{className:"mb-0 fw-semibold",children:null===(k=I.task)||void 0===k?void 0:k.title}),(0,a.jsxs)("small",{className:"text-muted",children:["Max Score: ",null===(S=I.task)||void 0===S?void 0:S.maxScore," pts"]})]})]})})}),(0,a.jsx)("div",{className:"card border-0 bg-light mb-3",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("small",{className:"text-muted",children:"Submission Content:"}),(0,a.jsx)("div",{className:"mt-2",style:{maxHeight:"150px",overflowY:"auto"},children:I.content||(0,a.jsx)("em",{className:"text-muted",children:"No content provided"})})]})}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(x.Z,{size:18,className:"text-warning"}),"Grade (out of ",null===(C=I.task)||void 0===C?void 0:C.maxScore,") ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"number",className:"form-control form-control-lg",min:"0",max:null===(Z=I.task)||void 0===Z?void 0:Z.maxScore,step:"0.5",value:U,onChange:e=>V(e.target.value),placeholder:"Enter grade"}),U&&(0,a.jsxs)("small",{className:"text-muted mt-1 d-block",children:["Percentage: ",(parseFloat(U)/((null===(A=I.task)||void 0===A?void 0:A.maxScore)||100)*100).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Status"}),(0,a.jsxs)("select",{className:"form-select",value:K,onChange:e=>W(e.target.value),children:[(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",children:"Approved ✅"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected ❌"}),(0,a.jsx)("option",{value:"resubmit",children:"Resubmit Required \uD83D\uDD04"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(m.Z,{size:18,className:"text-info"}),"Feedback for Student"]}),(0,a.jsx)("textarea",{className:"form-control",rows:5,value:H,onChange:e=>J(e.target.value),placeholder:"Provide detailed feedback to help the student improve..."}),(0,a.jsx)("small",{className:"text-muted",children:"This will be visible to the student"})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(c.Z,{size:18,className:"text-warning"}),"Private Notes (Optional)"]}),(0,a.jsx)("textarea",{className:"form-control",rows:3,value:_,onChange:e=>$(e.target.value),placeholder:"Add private notes for your reference (not visible to student)..."}),(0,a.jsx)("small",{className:"text-muted",children:"Only visible to school admins and teachers"})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:"Cancel"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-success btn-lg",onClick:handleSubmitReview,children:[(0,a.jsx)(v.Z,{size:18,className:"me-2"}),"Submit Review"]})]})]})})})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:i,headers:l,...n}=s,r="".concat(a).concat(e);if(i){let e=new URLSearchParams(Object.entries(i).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(r+="?".concat(e))}let c={"Content-Type":"application/json",...l};t&&(c.Authorization="Bearer ".concat(t));try{let e=await fetch(r,{...n,headers:c}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=7452)}),_N_E=e.O()}]);