(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4613],{2898:function(e,s,a){"use strict";a.d(s,{Z:function(){return createLucideIcon}});var t=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:i,...o},d)=>(0,t.createElement)("svg",{ref:d,...r,width:n,height:n,stroke:a,strokeWidth:c?24*Number(l)/Number(n):l,className:`lucide lucide-${toKebabCase(e)}`,...o},[...s.map(([e,s])=>(0,t.createElement)(e,s)),...(Array.isArray(i)?i:[i])||[]]));return a.displayName=`${e}`,a}},3067:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9057:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},8203:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2442:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6224:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7216:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3344:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},774:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},6142:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4280:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6245:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7972:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6467:function(e,s,a){Promise.resolve().then(a.bind(a,621))},621:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return TeacherEditPage}});var t=a(7437),r=a(2265),n=a(3067),l=a(7972),c=a(774),i=a(7216),o=a(9670),d=a(4280),m=a(2442),h=a(6224),u=a(6142),f=a(9057),p=a(3344),g=a(8203),x=a(6245),j=a(1396),b=a.n(j),y=a(4033),N=a(6454),v=a(1376),w=a(6820),C=a.n(w);function TeacherEditPage(){let e=(0,y.useParams)(),s=(0,y.useRouter)(),a=e.id,[j,w]=(0,r.useState)(null),[k,S]=(0,r.useState)({firstName:"",lastName:"",email:"",mobile:"",dateOfBirth:"",address:"",city:"",state:"",country:"India",postalCode:"",qualification:"",specialization:"",experienceYears:"",department:"",designation:"",subjects:[],classId:"",joiningDate:"",salary:"",emergencyContact:"",employeeId:"",status:"active"}),[E,P]=(0,r.useState)(!0),[T,I]=(0,r.useState)(!1),[A,M]=(0,r.useState)(""),[Z,z]=(0,r.useState)(""),[q,D]=(0,r.useState)([]),[L,O]=(0,r.useState)(!0),[B,R]=(0,r.useState)([]),[F,U]=(0,r.useState)(""),[V,G]=(0,r.useState)(!1),[H,Y]=(0,r.useState)(!1),[$,J]=(0,r.useState)(null),[_,W]=(0,r.useState)(!1),[K,Q]=(0,r.useState)([]),[X,ee]=(0,r.useState)(!0);(0,r.useEffect)(()=>{a&&(fetchTeacher(),fetchClasses(),fetchTeacherClasses(),fetchSubjects())},[a]);let fetchSubjects=async()=>{try{ee(!0);let e=(0,N.hV)();if(!e){console.error("No authentication token found"),ee(!1);return}console.log("Making API call to /subjects...");let s=await fetch("".concat(N.CT,"/subjects"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Subjects fetch response status:",s.status),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(console.log("Subjects API Response:",a),Array.isArray(a)){let e=a.filter(e=>"active"===e.status).map(e=>e.name);console.log("Active subjects:",e),Q(e)}else console.error("Invalid response format:",a),Q([])}catch(e){console.error("Error fetching subjects:",e),console.error("Error details:",e.message),Q(["Mathematics","Physics","Chemistry","Biology","English","Hindi","History","Geography","Civics","Economics","Computer Science","Physical Education","Art","Music","Sanskrit"])}finally{ee(!1)}},fetchClasses=async()=>{try{O(!0);let e=(0,N.hV)();if(!e){console.error("No authentication token found");return}let s=await fetch("".concat(N.CT,"/classes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(Array.isArray(a)){let e=a.filter(e=>"ACTIVE"===e.status||"active"===e.status);D(e)}else D([])}catch(e){console.error("Error fetching classes:",e),D([])}finally{O(!1)}},fetchTeacherClasses=async()=>{try{let e=(0,N.hV)();if(!e){console.error("No authentication token found");return}let s=await fetch("".concat(N.CT,"/teachers/").concat(a,"/classes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok){console.error("Failed to fetch teacher classes");return}let t=await s.json();if(Array.isArray(t)){let e=t.map(e=>e.id);R(e),console.log("Loaded teacher classes:",e)}}catch(e){console.error("Error fetching teacher classes:",e)}},fetchTeacher=async()=>{try{var e,s;P(!0),M("");let t=(0,N.hV)();if(!t)throw Error("Authentication required. Please login again.");let r=await (0,N.R1)("/teachers/".concat(a),{token:t});w(r),S({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",mobile:r.mobile||"",dateOfBirth:r.dateOfBirth?r.dateOfBirth.split("T")[0]:"",address:r.address||"",city:r.city||"",state:r.state||"",country:r.country||"India",postalCode:r.postalCode||"",qualification:r.qualification||"",specialization:r.specialization||"",experienceYears:(null===(e=r.experienceYears)||void 0===e?void 0:e.toString())||"",department:r.department||"",designation:r.designation||"",subjects:r.subjects||[],classId:r.classId?r.classId.toString():"",joiningDate:r.joiningDate?r.joiningDate.split("T")[0]:"",salary:(null===(s=r.salary)||void 0===s?void 0:s.toString())||"",emergencyContact:r.emergencyContact||"",employeeId:r.employeeId||"",status:r.status||"active"}),console.log("Teacher fetched:",r)}catch(e){console.error("Error fetching teacher:",e),M((null==e?void 0:e.message)||"Failed to fetch teacher details")}finally{P(!1)}},handleInputChange=e=>{let{name:s,value:a}=e.target;S(e=>({...e,[s]:a})),A&&M(""),Z&&z("")},handleSubjectChange=e=>{S(s=>({...s,subjects:s.subjects.includes(e)?s.subjects.filter(s=>s!==e):[...s.subjects,e]}))},handleClassChange=e=>{R(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},handleCopyPassword=async()=>{if(F)try{await navigator.clipboard.writeText(F),Y(!0),setTimeout(()=>Y(!1),2e3)}catch(e){console.error("Failed to copy password:",e)}},handleResetPassword=async()=>{if(!F){C().fire({icon:"warning",title:"No Password",text:"Please generate or enter a password first"});return}let e=(0,v.uo)(F);if(!e.isValid){C().fire({icon:"error",title:"Weak Password",html:'<div class="text-start">\n          <p>Password requirements not met:</p>\n          <ul>'.concat(e.errors.map(e=>"<li>".concat(e,"</li>")).join(""),"</ul>\n        </div>")});return}let s=await C().fire({icon:"question",title:"Reset Password?",html:"\n        <p>Are you sure you want to reset the password for <strong>".concat(null==j?void 0:j.firstName," ").concat(null==j?void 0:j.lastName,'</strong>?</p>\n        <div class="alert alert-warning mt-3">\n          <i class="fas fa-exclamation-triangle me-2"></i>\n          The teacher will need to use the new password to login.\n        </div>\n      '),showCancelButton:!0,confirmButtonText:"Yes, Reset Password",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545"});if(s.isConfirmed){W(!0);try{let e=(0,N.hV)();if(!e)throw Error("Authentication required");let s=await fetch("".concat(N.CT,"/teachers/").concat(a,"/reset-password"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({newPassword:F})});if(!s.ok)throw Error("Failed to reset password");await C().fire({icon:"success",title:"Password Reset Successful!",html:"\n          <p>Password has been successfully reset for ".concat(null==j?void 0:j.firstName," ").concat(null==j?void 0:j.lastName,'</p>\n          <div class="alert alert-info mt-3">\n            <strong>New Password:</strong> <code>').concat(F,'</code>\n            <button class="btn btn-sm btn-outline-primary ms-2" onclick="navigator.clipboard.writeText(\'').concat(F,'\')">\n              <i class="fas fa-copy"></i> Copy\n            </button>\n          </div>\n          <p class="text-muted small">Make sure to share this password with the teacher securely.</p>\n        '),confirmButtonText:"OK"}),U(""),J(null),G(!1)}catch(e){console.error("Error resetting password:",e),C().fire({icon:"error",title:"Error",text:(null==e?void 0:e.message)||"Failed to reset password. Please try again."})}finally{W(!1)}}},validateForm=()=>{let e={};return k.firstName.trim()||(e.firstName="First name is required"),k.lastName.trim()||(e.lastName="Last name is required"),k.email.trim()||(e.email="Email is required"),M(Object.values(e).join(", ")),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){I(!0),M(""),z("");try{let e=(0,N.hV)();if(!e)throw Error("Authentication required. Please login again.");let t=(0,N.vF)();if(!t){let e=localStorage.getItem("user");if(e)try{t=JSON.parse(e)}catch(e){console.error("Failed to parse user from localStorage:",e)}}if(!t||!t.schoolId)throw Error("School ID not found. Please login again.");let r={firstName:k.firstName,lastName:k.lastName,email:k.email,mobile:k.mobile||null,dateOfBirth:k.dateOfBirth||null,address:k.address||null,city:k.city||null,state:k.state||null,country:k.country,postalCode:k.postalCode||null,qualification:k.qualification||null,specialization:k.specialization||null,experienceYears:k.experienceYears||null,department:k.department||null,designation:k.designation||null,subjects:k.subjects,classIds:B.length>0?B:[],joiningDate:k.joiningDate||null,salary:k.salary?parseFloat(k.salary):null,emergencyContact:k.emergencyContact||null,status:k.status};console.log("Updating teacher:",r);let n=await (0,N.pE)("/teachers/".concat(a),r,{token:e});console.log("Teacher updated successfully:",n),z("Teacher updated successfully!"),setTimeout(()=>{s.push("/school-admin/teachers")},1500)}catch(s){console.error("Error updating teacher:",s);let e=(null==s?void 0:s.message)||"Error updating teacher. Please try again.";M(e)}finally{I(!1)}}};return E?(0,t.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,t.jsx)("p",{className:"mt-3 text-muted",children:"Loading teacher details..."})]})}):A&&!j?(0,t.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,t.jsx)("h5",{className:"alert-heading",children:"Error Loading Teacher"}),(0,t.jsx)("p",{children:A}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,t.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>window.location.reload(),children:"Try Again"}),(0,t.jsx)(b(),{href:"/school-admin/teachers",className:"btn btn-secondary",children:"Back to Teachers"})]})]})})}):(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,t.jsx)("div",{className:"container-fluid py-3",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,t.jsx)(b(),{href:"/school-admin/teachers/".concat(a),className:"btn btn-outline-secondary",children:(0,t.jsx)(n.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fas fa-user-edit me-2 text-primary"}),"Edit Teacher"]}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Update teacher information and profile"})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(b(),{href:"/school-admin/teachers/".concat(a),className:"btn btn-outline-secondary me-2",children:"Cancel"})})]})})}),(0,t.jsx)("div",{className:"container-fluid py-4",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsx)("div",{className:"col-lg-10 col-xl-8",children:(0,t.jsx)("div",{className:"card border-0 shadow",children:(0,t.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[Z&&(0,t.jsxs)("div",{className:"alert alert-success d-flex align-items-center",role:"alert",children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-2"}),(0,t.jsx)("div",{children:Z})]}),A&&(0,t.jsxs)("div",{className:"alert alert-danger d-flex align-items-center",role:"alert",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-circle me-2"}),(0,t.jsx)("div",{children:A})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(l.Z,{size:24,className:"text-primary"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Personal Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:k.firstName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter first name",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:k.lastName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter last name",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Email Address ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"email",name:"email",value:k.email,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter email address",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Mobile Number"}),(0,t.jsx)("input",{type:"tel",name:"mobile",value:k.mobile,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter mobile number"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",name:"dateOfBirth",value:k.dateOfBirth,onChange:handleInputChange,className:"form-control form-control-lg"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Status"}),(0,t.jsxs)("select",{name:"status",value:k.status,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"resigned",children:"Resigned"}),(0,t.jsx)("option",{value:"retired",children:"Retired"}),(0,t.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-danger bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(c.Z,{size:24,className:"text-danger"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Password Reset"})]}),(0,t.jsx)("div",{className:"card bg-light border-warning",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"alert alert-warning d-flex align-items-start mb-3",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-triangle me-2 mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Security Notice:"})," Reset the teacher's password if they forgot it or for security reasons. Make sure to share the new password securely."]})]}),(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"New Password"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("input",{type:V?"text":"password",value:F,onChange:e=>{let s=e.target.value;U(s);let a=(0,v.uo)(s);J(a)},className:"form-control",placeholder:"Enter new password or generate one"}),(0,t.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>G(!V),title:V?"Hide password":"Show password",children:V?(0,t.jsx)(i.Z,{size:18}):(0,t.jsx)(o.Z,{size:18})}),(0,t.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{let e=(0,v.G$)(12);U(e);let s=(0,v.uo)(e);J(s),G(!0)},title:"Generate secure password",children:[(0,t.jsx)(d.Z,{size:18})," Generate"]}),F&&(0,t.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:handleCopyPassword,title:"Copy password",children:H?(0,t.jsx)(m.Z,{size:18}):(0,t.jsx)(h.Z,{size:18})})]}),$&&F&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,t.jsx)("small",{className:"text-muted",children:"Password Strength:"}),(0,t.jsx)("small",{className:"text-".concat((0,v.zU)($.strength)," fw-bold"),children:(0,v.sO)($.strength)})]}),(0,t.jsx)("div",{className:"progress",style:{height:"6px"},children:(0,t.jsx)("div",{className:"progress-bar bg-".concat((0,v.zU)($.strength)),role:"progressbar",style:{width:"".concat($.score,"%")}})})]}),(0,t.jsxs)("small",{className:"text-muted d-block mt-2",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-1"}),"Password must contain: uppercase, lowercase, number, and special character"]})]}),(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("button",{type:"button",onClick:handleResetPassword,disabled:_||!F,className:"btn btn-danger btn-lg w-100",children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Resetting Password..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{size:18,className:"me-2"}),"Reset Password"]})})})]})]})})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(u.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Address Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Address"}),(0,t.jsx)("textarea",{name:"address",value:k.address,onChange:handleInputChange,className:"form-control form-control-lg",rows:3,placeholder:"Enter complete address"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:k.city,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter city"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"State"}),(0,t.jsx)("input",{type:"text",name:"state",value:k.state,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter state"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Country"}),(0,t.jsx)("input",{type:"text",name:"country",value:k.country,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter country"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Postal Code"}),(0,t.jsx)("input",{type:"text",name:"postalCode",value:k.postalCode,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter postal code"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Emergency Contact"}),(0,t.jsx)("input",{type:"tel",name:"emergencyContact",value:k.emergencyContact,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter emergency contact number"})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(f.Z,{size:24,className:"text-success"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Professional Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Department"}),(0,t.jsxs)("select",{name:"department",value:k.department,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),["Mathematics","Science","English","Hindi","Social Studies","Computer Science","Physical Education","Art","Music","Administration"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Designation"}),(0,t.jsxs)("select",{name:"designation",value:k.designation,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Designation"}),["Teacher","Senior Teacher","Head Teacher","Vice Principal","Principal","Subject Coordinator","Class Teacher","Librarian","Counselor"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Qualification"}),(0,t.jsx)("input",{type:"text",name:"qualification",value:k.qualification,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"e.g., M.Sc, B.Ed, Ph.D"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Specialization"}),(0,t.jsx)("input",{type:"text",name:"specialization",value:k.specialization,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"e.g., Mathematics, Physics"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Experience (Years)"}),(0,t.jsx)("input",{type:"number",name:"experienceYears",value:k.experienceYears,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter years of experience",min:"0",max:"50"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Joining Date"}),(0,t.jsx)("input",{type:"date",name:"joiningDate",value:k.joiningDate,onChange:handleInputChange,className:"form-control form-control-lg"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Salary"}),(0,t.jsx)("input",{type:"number",name:"salary",value:k.salary,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter salary amount",min:"0"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Employee ID"}),(0,t.jsx)("input",{type:"text",name:"employeeId",value:k.employeeId||"",onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter employee ID",readOnly:!0}),(0,t.jsx)("small",{className:"text-muted",children:"Employee ID cannot be changed"})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(p.Z,{size:24,className:"text-warning"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Subjects"})]}),(0,t.jsx)("div",{className:"row g-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Select Subjects",X&&(0,t.jsx)("span",{className:"spinner-border spinner-border-sm ms-2",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),X?(0,t.jsxs)("div",{className:"border rounded p-4 text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading subjects..."})}),(0,t.jsx)("p",{className:"mt-2 mb-0 text-muted",children:"Loading subjects..."})]}):0===K.length?(0,t.jsxs)("div",{className:"alert alert-info",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-2"}),"No subjects available. Please create subjects first from the"," ",(0,t.jsx)(b(),{href:"/school-admin/subjects",className:"text-primary fw-bold",children:"Subjects"})," ","page."]}):(0,t.jsxs)("div",{className:"border rounded p-4",children:[(0,t.jsx)("div",{className:"row g-3",children:K.map(e=>(0,t.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"subject-".concat(e),checked:k.subjects.includes(e),onChange:()=>handleSubjectChange(e)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"subject-".concat(e),children:e})]})},e))}),k.subjects.length>0&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-success bg-opacity-10 rounded",children:(0,t.jsxs)("small",{className:"text-success",children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-1"}),k.subjects.length," subject(s) selected"]})})]})]})})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(g.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Class Assignment"})]}),(0,t.jsx)("div",{className:"row g-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assign to Classes (Multiple Selection)",L&&(0,t.jsx)("span",{className:"spinner-border spinner-border-sm ms-2",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),(0,t.jsx)("div",{className:"border rounded p-4",children:L?(0,t.jsx)("div",{className:"text-center py-3",children:(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading classes..."})})}):0===q.length?(0,t.jsxs)("div",{className:"alert alert-info mb-0",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-2"}),"No classes available. Please create classes first from the"," ",(0,t.jsx)(b(),{href:"/school-admin/create-class",className:"text-primary",children:"Create Class"})," ","page."]}):(0,t.jsx)("div",{className:"row g-3",children:q.map(e=>(0,t.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"class-".concat(e.id),checked:B.includes(e.id),onChange:()=>handleClassChange(e.id)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"class-".concat(e.id),children:e.name})]})},e.id))})}),B.length>0&&(0,t.jsxs)("small",{className:"text-success d-block mt-2",children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-1"}),B.length," class(es) selected"]})]})})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,t.jsxs)(b(),{href:"/school-admin/teachers/".concat(a),className:"btn btn-secondary btn-lg px-5",children:[(0,t.jsx)("i",{className:"fas fa-times me-2"}),"Cancel"]}),(0,t.jsx)("button",{type:"submit",disabled:T,className:"btn btn-primary btn-lg px-5",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Updating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{size:18,className:"me-2"}),"Update Teacher"]})})]})]})]})})})})})]})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:r,headers:n,...l}=s,c="".concat(t).concat(e);if(r){let e=new URLSearchParams(Object.entries(r).reduce((e,s)=>{let[a,t]=s;return null!=t&&(e[a]=String(t)),e},{})).toString();e&&(c+="?".concat(e))}let i={"Content-Type":"application/json",...n};a&&(i.Authorization="Bearer ".concat(a));try{let e=await fetch(c,{...l,headers:i}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},1376:function(e,s,a){"use strict";a.d(s,{G$:function(){return generateSecurePassword},GB:function(){return validatePasswordComprehensive},sO:function(){return getStrengthLabel},uo:function(){return validatePassword},zU:function(){return getStrengthColor}});let t={minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumber:!0,requireSpecial:!0};function validatePassword(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=[],r=0;return s.minLength&&e.length<s.minLength?a.push("Password must be at least ".concat(s.minLength," characters long")):r+=20,s.requireUppercase&&!/[A-Z]/.test(e)?a.push("Password must contain at least one uppercase letter"):/[A-Z]/.test(e)&&(r+=20),s.requireLowercase&&!/[a-z]/.test(e)?a.push("Password must contain at least one lowercase letter"):/[a-z]/.test(e)&&(r+=20),s.requireNumber&&!/[0-9]/.test(e)?a.push("Password must contain at least one number"):/[0-9]/.test(e)&&(r+=20),s.requireSpecial&&!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)?a.push("Password must contain at least one special character (!@#$%^&*...)"):/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)&&(r+=20),e.length>=12&&(r+=10),e.length>=16&&(r+=10),{isValid:0===a.length,errors:a,strength:r<40?"weak":r<60?"medium":r<80?"strong":"very-strong",score:Math.min(r,100)}}function passwordsMatch(e,s){return e===s}function getStrengthColor(e){switch(e){case"weak":return"danger";case"medium":return"warning";case"strong":return"info";case"very-strong":return"success";default:return"secondary"}}function getStrengthLabel(e){switch(e){case"weak":return"Weak \uD83D\uDE1F";case"medium":return"Medium \uD83D\uDE10";case"strong":return"Strong \uD83D\uDE42";case"very-strong":return"Very Strong \uD83D\uDE03";default:return""}}let r=["password","12345678","123456789","qwerty","abc123","password123","admin","letmein","welcome","monkey"];function isCommonPassword(e){return r.includes(e.toLowerCase())}function validatePasswordComprehensive(e,s,a){let t=[],r=validatePassword(e,a);return t.push(...r.errors),passwordsMatch(e,s)||t.push("Passwords do not match"),isCommonPassword(e)&&t.push("This password is too common. Please choose a more unique password"),{isValid:0===t.length,errors:t}}function generateSecurePassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz",t="0123456789",r="!@#$%^&*()_+-=[]{}|;:,.<>?",n="";n+=s[Math.floor(Math.random()*s.length)]+a[Math.floor(Math.random()*a.length)]+t[Math.floor(Math.random()*t.length)]+r[Math.floor(Math.random()*r.length)];let l=s+a+t+r;for(let s=n.length;s<e;s++)n+=l[Math.floor(Math.random()*l.length)];return n.split("").sort(()=>Math.random()-.5).join("")}},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=6467)}),_N_E=e.O()}]);