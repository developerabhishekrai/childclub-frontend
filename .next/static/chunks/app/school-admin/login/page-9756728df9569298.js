(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9068],{8217:function(e,t,r){Promise.resolve().then(r.bind(r,896))},896:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return SchoolAdminLogin}});var o=r(7437),s=r(2265);r(8117);var n=r(6454);function SchoolAdminLogin(){let[e,t]=(0,s.useState)({email:"",password:""}),[r,a]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),handleSubmit=async t=>{t.preventDefault(),i(!0),d("");try{let t=await fetch("".concat(n.CT,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,role:"school_admin"})});if(t.ok){var r;let o=await t.json();if(console.log("=== Login Response ==="),console.log("Full response:",o),console.log("User data:",o.user),console.log("School ID:",null===(r=o.user)||void 0===r?void 0:r.schoolId),!o.user){d("❌ Backend error: User data missing in response. Please contact admin."),console.error("❌ CRITICAL: data.user is missing from backend response!");return}if(!o.user.schoolId){d("❌ School ID missing. Your school may not be approved yet."),console.error("❌ WARNING: data.user.schoolId is missing!");return}(0,n.mB)(o.access_token),(0,n.c7)(o.user),localStorage.setItem("userRole","school_admin"),localStorage.setItem("userEmail",e.email),console.log("✅ Data stored in localStorage"),console.log("Token stored:",localStorage.getItem("token")?"Yes":"No"),console.log("User stored:",localStorage.getItem("user"));let s=localStorage.getItem("user");if(!s){d("❌ Failed to store user data. Browser storage may be disabled."),console.error("❌ CRITICAL: localStorage.setItem failed!");return}let a=JSON.parse(s);console.log("✅ Verification passed - School ID:",a.schoolId),setTimeout(()=>{console.log("\uD83D\uDD04 Redirecting to dashboard..."),window.location.href="/school-admin/dashboard"},100)}else{let e=await t.json();d(e.message||"Login failed")}}catch(e){d("Network error. Please try again.")}finally{i(!1)}},handleChange=r=>{t({...e,[r.target.name]:r.target.value})};return(0,o.jsx)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center py-5",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsxs)("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5",children:[(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("span",{style:{fontSize:"4rem"},children:"\uD83C\uDFEB"})}),(0,o.jsx)("h2",{className:"text-white fw-bold mb-2",children:"School Admin Portal"}),(0,o.jsx)("p",{className:"text-white-50",children:"Access your school management dashboard"})]}),(0,o.jsx)("div",{className:"card border-0 shadow-lg",children:(0,o.jsxs)("div",{className:"card-body p-4 p-md-5",children:[c&&(0,o.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[(0,o.jsx)("strong",{children:"Error:"})," ",c,(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>d("")})]}),(0,o.jsxs)("form",{onSubmit:handleSubmit,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"email",className:"form-label fw-semibold text-dark",children:"\uD83D\uDCE7 Email Address"}),(0,o.jsx)("input",{type:"email",className:"form-control form-control-lg border-2",id:"email",name:"email",placeholder:"admin@school.com",value:e.email,onChange:handleChange,required:!0,style:{borderRadius:"10px",transition:"all 0.3s ease"}})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"password",className:"form-label fw-semibold text-dark",children:"\uD83D\uDD12 Password"}),(0,o.jsxs)("div",{className:"input-group",children:[(0,o.jsx)("input",{type:r?"text":"password",className:"form-control form-control-lg border-2",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:handleChange,required:!0,style:{borderRadius:"10px 0 0 10px",transition:"all 0.3s ease"}}),(0,o.jsx)("button",{className:"btn btn-outline-secondary border-2",type:"button",onClick:()=>a(!r),style:{borderRadius:"0 10px 10px 0"},children:r?"\uD83D\uDE48":"\uD83D\uDC41️"})]})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-lg w-100 mb-3 text-white fw-bold",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",border:"none"},disabled:l,children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):"\uD83D\uDE80 Sign In to Dashboard"}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("a",{href:"#",className:"text-decoration-none text-muted",children:"Forgot your password?"})})]})]})}),(0,o.jsxs)("div",{className:"text-center mt-4",children:[(0,o.jsx)("p",{className:"text-white mb-3",children:"Don't have a school account?"}),(0,o.jsx)("a",{href:"/school-admin/register",className:"btn btn-light btn-sm px-4 mb-3",style:{borderRadius:"20px"},children:"\uD83D\uDCDD Register Your School"}),(0,o.jsx)("p",{className:"text-white mb-2 mt-3",children:"Other Portals:"}),(0,o.jsxs)("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[(0,o.jsx)("a",{href:"/teacher/login",className:"btn btn-light btn-sm px-4",style:{borderRadius:"20px"},children:"\uD83D\uDC68‍\uD83C\uDFEB Teacher"}),(0,o.jsx)("a",{href:"/student/login",className:"btn btn-light btn-sm px-4",style:{borderRadius:"20px"},children:"\uD83C\uDF93 Student"})]})]}),(0,o.jsx)("div",{className:"text-center mt-3",children:(0,o.jsx)("a",{href:"/",className:"text-decoration-none text-white",children:(0,o.jsx)("small",{children:"← Back to Home"})})})]})})})})}},6454:function(e,t,r){"use strict";r.d(t,{CT:function(){return o},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let o="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,r){super(t),this.status=e,this.message=t,this.data=r,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,params:s,headers:n,...a}=t,l="".concat(o).concat(e);if(s){let e=new URLSearchParams(Object.entries(s).reduce((e,t)=>{let[r,o]=t;return null!=o&&(e[r]=String(o)),e},{})).toString();e&&(l+="?".concat(e))}let i={"Content-Type":"application/json",...n};r&&(i.Authorization="Bearer ".concat(r));try{let e=await fetch(l,{...a,headers:i}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,r){return apiRequest(e,{...r,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,r){return apiRequest(e,{...r,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,r){return apiRequest(e,{...r,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=r(2265),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var o,n={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:s,type:e,key:c,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[6685,2971,2472,1744],function(){return e(e.s=8217)}),_N_E=e.O()}]);