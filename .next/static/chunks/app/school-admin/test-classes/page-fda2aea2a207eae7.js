(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6647],{4930:function(e,t,s){Promise.resolve().then(s.bind(s,1305))},1305:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TestClassesPage}});var r=s(7437),n=s(2265),a=s(6454);function TestClassesPage(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(!0),[c,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{testClassesAPI()},[]);let testClassesAPI=async()=>{try{o(!0),i(null);let e=(0,a.hV)();if(console.log("Token available:",!!e),!e)throw Error("No authentication token found");console.log("Testing classes API...");let s=await fetch("".concat(a.CT,"/classes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Response status:",s.status),console.log("Response ok:",s.ok),console.log("Response headers:",Object.fromEntries(s.headers.entries())),!s.ok){let e=await s.text();throw Error("HTTP ".concat(s.status,": ").concat(e))}let r=await s.json();if(console.log("Response data:",r),d({status:s.status,ok:s.ok,dataType:typeof r,isArray:Array.isArray(r),dataLength:Array.isArray(r)?r.length:"N/A",data:r}),Array.isArray(r))t(r);else throw Error("Response is not an array")}catch(e){console.error("Error testing classes API:",e),i(e.message)}finally{o(!1)}};return(0,r.jsx)("div",{className:"container py-5",children:(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-10",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h3",{className:"mb-0",children:"Classes API Test Page"})}),(0,r.jsxs)("div",{className:"card-body",children:[s&&(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("div",{className:"spinner-border",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,r.jsx)("p",{className:"mt-2",children:"Testing Classes API..."})]}),c&&(0,r.jsxs)("div",{className:"alert alert-danger",children:[(0,r.jsx)("h5",{children:"Error:"}),(0,r.jsx)("p",{children:c}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:testClassesAPI,children:"Retry"})]}),l&&(0,r.jsxs)("div",{className:"alert alert-info",children:[(0,r.jsx)("h5",{children:"Debug Information:"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",l.status]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"OK:"})," ",l.ok?"Yes":"No"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Data Type:"})," ",l.dataType]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Is Array:"})," ",l.isArray?"Yes":"No"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Data Length:"})," ",l.dataLength]})]})]}),e.length>0&&(0,r.jsxs)("div",{className:"alert alert-success",children:[(0,r.jsxs)("h5",{children:["Success! Found ",e.length," classes:"]}),(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Grade"}),(0,r.jsx)("th",{children:"Section"}),(0,r.jsx)("th",{children:"Academic Year"}),(0,r.jsx)("th",{children:"Max Students"}),(0,r.jsx)("th",{children:"Current Students"}),(0,r.jsx)("th",{children:"Status"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.grade}),(0,r.jsx)("td",{children:e.section}),(0,r.jsx)("td",{children:e.academicYear}),(0,r.jsx)("td",{children:e.maxStudents}),(0,r.jsx)("td",{children:e.currentStudents||0}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"badge ".concat("ACTIVE"===e.status?"bg-success":"bg-secondary"),children:e.status})})]},e.id))})]})})]}),!s&&!c&&0===e.length&&(0,r.jsxs)("div",{className:"alert alert-warning",children:[(0,r.jsx)("h5",{children:"No Classes Found"}),(0,r.jsx)("p",{children:"No classes were returned from the API. This could mean:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"No classes have been created yet"}),(0,r.jsx)("li",{children:"All classes are inactive"}),(0,r.jsx)("li",{children:"There's a filtering issue"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("button",{className:"btn btn-primary",onClick:testClassesAPI,children:"Test Again"}),(0,r.jsx)("a",{href:"/school-admin/add-teacher",className:"btn btn-secondary ms-2",children:"Back to Add Teacher"})]})]})]})})})})}},6454:function(e,t,s){"use strict";s.d(t,{CT:function(){return r},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let r="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,s){super(t),this.status=e,this.message=t,this.data=s,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,params:n,headers:a,...o}=t,c="".concat(r).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,t)=>{let[s,r]=t;return null!=r&&(e[s]=String(r)),e},{})).toString();e&&(c+="?".concat(e))}let i={"Content-Type":"application/json",...a};s&&(i.Authorization="Bearer ".concat(s));try{let e=await fetch(c,{...o,headers:i}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,s){return apiRequest(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,s){return apiRequest(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,s){return apiRequest(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,a={},l=null,d=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!i.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:l,ref:d,props:a,_owner:c.current}}t.Fragment=a,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[2971,2472,1744],function(){return e(e.s=4930)}),_N_E=e.O()}]);