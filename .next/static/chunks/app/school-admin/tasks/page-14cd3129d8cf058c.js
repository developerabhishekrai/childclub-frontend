(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9388],{2898:function(e,s,a){"use strict";a.d(s,{Z:function(){return createLucideIcon}});var t=a(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:i,...d},o)=>(0,t.createElement)("svg",{ref:o,...n,width:r,height:r,stroke:a,strokeWidth:c?24*Number(l)/Number(r):l,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,t.createElement)(e,s)),...(Array.isArray(i)?i:[i])||[]]));return a.displayName=`${e}`,a}},1981:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5817:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2482:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},9617:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5367:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5750:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5223:function(e,s,a){Promise.resolve().then(a.bind(a,5200))},5200:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return TasksPage}});var t=a(7437),n=a(2265),r=a(1396),l=a.n(r),c=a(3067),i=a(5817),d=a(9883),o=a(1827),m=a(2482),h=a(9865),u=a(2898);let x=(0,u.Z)("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);var g=a(8203),j=a(5750),p=a(9670),N=a(9617),f=a(5367),y=a(6141),b=a(3008),v=a(1981),k=a(6820),w=a.n(k),S=a(6454);function TasksPage(){let[e,s]=(0,n.useState)(""),[a,r]=(0,n.useState)("all"),[u,k]=(0,n.useState)("all"),[T,C]=(0,n.useState)("all"),[Z,D]=(0,n.useState)([]),[E,z]=(0,n.useState)(!0),[A,P]=(0,n.useState)([]),[B,M]=(0,n.useState)([]),[I,L]=(0,n.useState)([]),[q,U]=(0,n.useState)(null),[O,R]=(0,n.useState)(!1),[H,V]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")||"{}");V(e.id),fetchTasks(),fetchClasses(),fetchTeachers(),fetchStudents()},[]);let fetchTasks=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(S.CT,"/assignments"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json(),a=e.map(e=>({...e,status:e.status||calculateStatus(e),submissionCount:0,averageScore:0}));D(a)}else w().fire("Error","Failed to fetch tasks: ".concat(s.status),"error")}catch(e){console.error("Error fetching tasks:",e),w().fire("Error","Failed to fetch tasks. Check console for details.","error")}finally{z(!1)}},fetchClasses=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(S.CT,"/classes"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();P(e)}}catch(e){console.error("Error fetching classes:",e)}},fetchTeachers=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(S.CT,"/teachers"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();M(e)}}catch(e){console.error("Error fetching teachers:",e)}},fetchStudents=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(S.CT,"/students"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();L(e)}}catch(e){console.error("Error fetching students:",e)}},calculateStatus=e=>{let s=new Date(e.dueDate),a=new Date;return s<a?"overdue":"pending"},getClassName=e=>{let s=A.find(s=>s.id===e);return(null==s?void 0:s.name)||"Class ".concat(e)},getTeacherName=e=>{let s=B.find(s=>s.id===e);return s?s.name?s.name:s.firstName&&s.lastName?"".concat(s.firstName," ").concat(s.lastName):s.firstName?s.firstName:s.username?s.username:"Teacher ".concat(e):"Teacher ".concat(e)},getStudentName=e=>{let s=I.find(s=>s.id===e);return s?s.name?s.name:s.firstName&&s.lastName?"".concat(s.firstName," ").concat(s.lastName):s.firstName?s.firstName:s.username?s.username:"Student ".concat(e):"Student ".concat(e)},getCreatorName=e=>{if(e===H)return"You";let s=B.find(s=>s.id===e);return s?s.firstName&&s.lastName?"".concat(s.firstName," ").concat(s.lastName):s.name?s.name:s.username?s.username:"Teacher ".concat(e):"User ".concat(e)},[F]=(0,n.useState)([{id:"assignment",name:"Assignment"},{id:"homework",name:"Homework"},{id:"project",name:"Project"},{id:"quiz",name:"Quiz"},{id:"exam",name:"Exam"}]),[J]=(0,n.useState)([{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"},{id:"urgent",name:"Urgent"}]),_=Z.filter(s=>{let t=s.title.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase())||s.tags.some(s=>s.toLowerCase().includes(e.toLowerCase())),n="all"===a||s.status===a,r="all"===u||s.type===u,l="all"===T||s.priority===T;return t&&n&&r&&l}),getStatusBadge=e=>(0,t.jsx)("span",{className:{pending:"badge bg-warning","in-progress":"badge bg-info",completed:"badge bg-success",overdue:"badge bg-danger"}[e],children:e}),getPriorityBadge=e=>(0,t.jsx)("span",{className:{low:"badge bg-secondary",medium:"badge bg-info",high:"badge bg-warning",urgent:"badge bg-danger"}[e],children:e}),getTypeBadge=e=>(0,t.jsx)("span",{className:"badge ".concat({assignment:"bg-primary",homework:"bg-success",project:"bg-info",quiz:"bg-warning",exam:"bg-danger"}[e]||"bg-secondary"),children:e}),getDaysUntilDue=e=>{let s=new Date,a=new Date(e),n=a.getTime()-s.getTime(),r=Math.ceil(n/864e5);return r<0?(0,t.jsxs)("span",{className:"text-danger fw-bold",children:["Overdue by ",Math.abs(r)," days"]}):0===r?(0,t.jsx)("span",{className:"text-warning fw-bold",children:"Due today"}):1===r?(0,t.jsx)("span",{className:"text-warning",children:"Due tomorrow"}):r<=3?(0,t.jsxs)("span",{className:"text-warning",children:["Due in ",r," days"]}):(0,t.jsxs)("span",{className:"text-muted",children:["Due in ",r," days"]})},handleViewTask=e=>{U(e),R(!0)},handleDeleteTask=async e=>{let s=await w().fire({title:"Are you sure?",text:"Do you want to delete this task?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"});if(s.isConfirmed)try{let s=localStorage.getItem("token"),a=await fetch("".concat(S.CT,"/assignments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}});a.ok?(w().fire("Deleted!","Task has been deleted successfully","success"),fetchTasks()):w().fire("Error","Failed to delete task","error")}catch(e){console.error("Error deleting task:",e),w().fire("Error","Failed to delete task","error")}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return E?(0,t.jsx)("div",{className:"container-fluid",children:(0,t.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(l(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary me-3",children:(0,t.jsx)(c.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"h3 mb-0",children:"My Assignments / Tasks"}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"View and manage assignments created by you"})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-outline-primary",onClick:()=>{console.log("Exporting tasks...")},children:[(0,t.jsx)(i.Z,{size:16,className:"me-2"}),"Export"]}),(0,t.jsxs)(l(),{href:"/school-admin/create-assignment",className:"btn btn-primary",children:[(0,t.jsx)(d.Z,{size:16,className:"me-2"}),"Create New Task"]})]})]}),(0,t.jsx)("div",{className:"card mb-4",children:(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("span",{className:"input-group-text",children:(0,t.jsx)(o.Z,{size:16})}),(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Search tasks...",value:e,onChange:e=>s(e.target.value)})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:a,onChange:e=>r(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:u,onChange:e=>k(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Types"}),F.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:T,onChange:e=>C(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Priorities"}),J.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("button",{className:"btn btn-outline-secondary w-100",children:[(0,t.jsx)(m.Z,{size:16,className:"me-2"}),"Advanced Filters"]})})]})})}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,t.jsx)("h5",{className:"mb-0",children:"Tasks List"}),(0,t.jsxs)("span",{className:"badge bg-primary",children:[_.length," tasks"]})]})}),(0,t.jsxs)("div",{className:"card-body p-0",children:[(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover mb-0",children:[(0,t.jsx)("thead",{className:"table-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Task Details"}),(0,t.jsx)("th",{children:"Type & Priority"}),(0,t.jsx)("th",{children:"Due Date & Status"}),(0,t.jsx)("th",{children:"Assignments"}),(0,t.jsx)("th",{children:"Created By"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:_.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-start",children:[(0,t.jsx)("div",{className:"avatar-sm bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",children:(0,t.jsx)(h.Z,{size:20,className:"text-warning"})}),(0,t.jsxs)("div",{className:"flex-grow-1",children:[(0,t.jsx)("div",{className:"fw-bold mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-muted mb-2 small",children:e.description}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1",children:e.tags&&Array.isArray(e.tags)&&e.tags.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-light text-dark border small",children:e},s))})]})]})}),(0,t.jsxs)("td",{children:[(0,t.jsx)("div",{className:"mb-2",children:getTypeBadge(e.type)}),(0,t.jsx)("div",{className:"mb-2",children:getPriorityBadge(e.priority)}),e.isRecurring&&(0,t.jsxs)("small",{className:"text-muted",children:[(0,t.jsx)(x,{size:12,className:"me-1"}),e.recurringPattern]})]}),(0,t.jsxs)("td",{children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("strong",{children:"Due:"})," ",formatDate(e.dueDate)]}),(0,t.jsx)("div",{className:"mb-2",children:getDaysUntilDue(e.dueDate)}),(0,t.jsx)("div",{children:getStatusBadge(e.status)})]}),(0,t.jsxs)("td",{children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("strong",{children:"Classes:"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-1",children:e.assignedClasses&&e.assignedClasses.length>0?e.assignedClasses.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-info small",children:getClassName(e)},s)):(0,t.jsx)("span",{className:"text-muted small",children:"No classes"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Teachers:"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-1",children:e.assignedTeachers&&e.assignedTeachers.length>0?e.assignedTeachers.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-success small",children:getTeacherName(e)},s)):(0,t.jsx)("span",{className:"text-muted small",children:"No teachers"})})]})]}),(0,t.jsxs)("td",{children:[(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)("small",{className:"text-muted",children:[(0,t.jsx)(g.Z,{size:12,className:"me-1"}),formatDate(e.createdAt)]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("small",{className:"text-muted",children:[(0,t.jsx)(j.Z,{size:12,className:"me-1"}),getCreatorName(e.createdBy)]})})]}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"btn-group",role:"group",children:[(0,t.jsx)("button",{className:"btn btn-sm btn-outline-primary",title:"View Details",onClick:()=>handleViewTask(e),children:(0,t.jsx)(p.Z,{size:14})}),(0,t.jsx)(l(),{href:"/school-admin/tasks/edit/".concat(e.id),className:"btn btn-sm btn-outline-warning",title:"Edit Task",children:(0,t.jsx)(N.Z,{size:14})}),(0,t.jsx)("button",{className:"btn btn-sm btn-outline-danger",title:"Delete Task",onClick:()=>handleDeleteTask(e.id),children:(0,t.jsx)(f.Z,{size:14})})]})})]},e.id))})]})}),0===_.length&&(0,t.jsxs)("div",{className:"text-center py-5",children:[(0,t.jsx)("div",{className:"text-muted mb-3",children:(0,t.jsx)(o.Z,{size:48})}),(0,t.jsx)("h5",{children:"No tasks found"}),(0,t.jsx)("p",{className:"text-muted",children:"Try adjusting your search criteria or create a new task."}),(0,t.jsxs)(l(),{href:"/school-admin/create-assignment",className:"btn btn-primary",children:[(0,t.jsx)(d.Z,{size:16,className:"me-2"}),"Create New Task"]})]})]})]}),(0,t.jsxs)("div",{className:"row g-4 mt-4",children:[(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[(0,t.jsx)("div",{className:"bg-warning bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,t.jsx)(y.Z,{size:24,className:"text-warning"})}),(0,t.jsx)("h4",{className:"mb-1",children:Z.filter(e=>"pending"===e.status).length}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Pending Tasks"})]})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,t.jsx)(h.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h4",{className:"mb-1",children:Z.filter(e=>"in-progress"===e.status).length}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"In Progress"})]})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[(0,t.jsx)("div",{className:"bg-success bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,t.jsx)(b.Z,{size:24,className:"text-success"})}),(0,t.jsx)("h4",{className:"mb-1",children:Z.filter(e=>"completed"===e.status).length}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Completed"})]})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body text-center",children:[(0,t.jsx)("div",{className:"bg-danger bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,t.jsx)(v.Z,{size:24,className:"text-danger"})}),(0,t.jsx)("h4",{className:"mb-1",children:Z.filter(e=>"overdue"===e.status).length}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Overdue"})]})})})]}),_.length>0&&(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,t.jsxs)("div",{className:"text-muted",children:["Showing ",_.length," of ",Z.length," tasks"]}),(0,t.jsx)("nav",{"aria-label":"Tasks pagination",children:(0,t.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,t.jsx)("li",{className:"page-item disabled",children:(0,t.jsx)("span",{className:"page-link",children:"Previous"})}),(0,t.jsx)("li",{className:"page-item active",children:(0,t.jsx)("span",{className:"page-link",children:"1"})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:"2"})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:"3"})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:"Next"})})]})})]}),O&&q&&(0,t.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,t.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,t.jsxs)("h5",{className:"modal-title",children:[(0,t.jsx)(p.Z,{size:20,className:"me-2"}),"Task Details"]}),(0,t.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>R(!1)})]}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("h4",{className:"text-primary",children:q.title}),(0,t.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[getTypeBadge(q.type),getPriorityBadge(q.priority),getStatusBadge(q.status)]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Description"}),(0,t.jsx)("p",{children:q.description})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Due Date"}),(0,t.jsxs)("p",{children:[(0,t.jsx)(g.Z,{size:16,className:"me-2"}),formatDate(q.dueDate)]}),(0,t.jsx)("div",{children:getDaysUntilDue(q.dueDate)})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Max Score"}),(0,t.jsxs)("p",{className:"fw-bold",children:[q.maxScore," points"]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Created Date"}),(0,t.jsx)("p",{children:formatDate(q.createdAt)})]}),q.instructions&&(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Instructions"}),(0,t.jsx)("div",{className:"p-3 bg-light rounded",children:(0,t.jsx)("p",{className:"mb-0",children:q.instructions})})]}),q.rubric&&(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Grading Rubric"}),(0,t.jsx)("div",{className:"p-3 bg-light rounded",children:(0,t.jsx)("p",{className:"mb-0",children:q.rubric})})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Assigned To"}),(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("strong",{children:"Classes:"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-2",children:q.assignedClasses&&q.assignedClasses.length>0?q.assignedClasses.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-info",children:getClassName(e)},s)):(0,t.jsx)("span",{className:"text-muted small",children:"None"})})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("strong",{children:"Teachers:"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-2",children:q.assignedTeachers&&q.assignedTeachers.length>0?q.assignedTeachers.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-success",children:getTeacherName(e)},s)):(0,t.jsx)("span",{className:"text-muted small",children:"None"})})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("strong",{children:"Students:"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-2",children:q.assignedStudents&&q.assignedStudents.length>0?q.assignedStudents.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-warning",children:getStudentName(e)},s)):(0,t.jsx)("span",{className:"text-muted small",children:"None"})})]})]})]}),q.tags&&q.tags.length>0&&(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"text-muted small",children:"Tags"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-2",children:q.tags.map((e,s)=>(0,t.jsx)("span",{className:"badge bg-secondary",children:e},s))})]})]})}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>R(!1),children:"Close"}),(0,t.jsxs)(l(),{href:"/school-admin/tasks/edit/".concat(q.id),className:"btn btn-warning",children:[(0,t.jsx)(N.Z,{size:16,className:"me-2"}),"Edit Task"]})]})]})})})]})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:n,headers:r,...l}=s,c="".concat(t).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,s)=>{let[a,t]=s;return null!=t&&(e[a]=String(t)),e},{})).toString();e&&(c+="?".concat(e))}let i={"Content-Type":"application/json",...r};a&&(i.Authorization="Bearer ".concat(a));try{let e=await fetch(c,{...l,headers:i}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=5223)}),_N_E=e.O()}]);