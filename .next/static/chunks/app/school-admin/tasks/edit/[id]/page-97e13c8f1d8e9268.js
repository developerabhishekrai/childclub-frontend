(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{2898:function(e,s,a){"use strict";a.d(s,{Z:function(){return createLucideIcon}});var t=a(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:r,children:c,...d},o)=>(0,t.createElement)("svg",{ref:o,...n,width:i,height:i,stroke:a,strokeWidth:r?24*Number(l)/Number(i):l,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,t.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return a.displayName=`${e}`,a}},1981:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},6141:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6637:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6232:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},5340:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3673:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},5750:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2898);let n=(0,t.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3532:function(e,s,a){Promise.resolve().then(a.bind(a,7256))},7256:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return EditTaskPage}});var t=a(7437),n=a(2265),i=a(3067),l=a(6637),r=a(6141),c=a(8203),d=a(5340),o=a(3673),m=a(6232),u=a(5750),h=a(1981),g=a(9865),x=a(1396),p=a.n(x),f=a(6820),j=a.n(f),b=a(4033),v=a(6454);function EditTaskPage(){let e=(0,b.useRouter)(),s=(0,b.useParams)(),a=s.id,[x,f]=(0,n.useState)({title:"",description:"",type:"",priority:"",status:"pending",dueDate:"",maxScore:"",instructions:"",rubric:"",tags:[],isRecurring:!1,recurringPattern:"",assignedClasses:[],assignedStudents:[],assignedTeachers:[]}),[N,y]=(0,n.useState)({}),[k,S]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!0),[T,Z]=(0,n.useState)([]),[I,E]=(0,n.useState)([]),[P,D]=(0,n.useState)([]),[z,A]=(0,n.useState)(null),R=x.assignedClasses.length>0?P.filter(e=>x.assignedClasses.includes(e.currentClassId||e.classId)&&"active"===e.status):[];(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")||"{}");A(e),fetchData()},[a]);let fetchData=async()=>{try{let t=localStorage.getItem("token");if(!t){e.push("/school-admin/login");return}let n={Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},[i,l,r,c]=await Promise.all([fetch("".concat(v.CT,"/assignments/").concat(a),{headers:n}),fetch("".concat(v.CT,"/classes"),{headers:n}),fetch("".concat(v.CT,"/teachers"),{headers:n}),fetch("".concat(v.CT,"/students"),{headers:n})]);if(i.ok){var s;let e=await i.json(),a=new Date(e.dueDate),t=a.toISOString().slice(0,16);f({title:e.title||"",description:e.description||"",type:e.type||"",priority:e.priority||"",status:e.status||"pending",dueDate:t,maxScore:(null===(s=e.maxScore)||void 0===s?void 0:s.toString())||"",instructions:e.instructions||"",rubric:e.rubric||"",tags:e.tags||[],isRecurring:e.isRecurring||!1,recurringPattern:e.recurringPattern||"",assignedClasses:e.assignedClasses||[],assignedStudents:e.assignedStudents||[],assignedTeachers:e.assignedTeachers||[]})}else throw Error("Failed to fetch task");if(l.ok){let e=await l.json();Z(e)}if(r.ok){let e=await r.json();E(e)}if(c.ok){let e=await c.json();D(e)}C(!1)}catch(s){console.error("Error fetching data:",s),C(!1),await j().fire({icon:"error",title:"Error",text:"Failed to load task. Please try again."}),e.push("/school-admin/tasks")}},handleInputChange=e=>{let{name:s,value:a,type:t}=e.target;if("checkbox"===t){let a=e.target.checked;"isRecurring"===s&&f(e=>({...e,[s]:a}))}else f(e=>({...e,[s]:a}));N[s]&&y(e=>({...e,[s]:""}))},handleTagChange=e=>{f(s=>({...s,tags:s.tags.includes(e)?s.tags.filter(s=>s!==e):[...s.tags,e]}))},handleClassChange=e=>{f(s=>{let a=s.assignedClasses.includes(e)?s.assignedClasses.filter(s=>s!==e):[...s.assignedClasses,e],t=P.filter(e=>a.includes(e.currentClassId||e.classId)&&"active"===e.status).map(e=>e.id),n=s.assignedStudents.filter(e=>t.includes(e));return{...s,assignedClasses:a,assignedStudents:n}})},handleStudentChange=e=>{f(s=>({...s,assignedStudents:s.assignedStudents.includes(e)?s.assignedStudents.filter(s=>s!==e):[...s.assignedStudents,e]}))},handleTeacherChange=e=>{f(s=>({...s,assignedTeachers:s.assignedTeachers.includes(e)?s.assignedTeachers.filter(s=>s!==e):[...s.assignedTeachers,e]}))},getTeacherName=e=>{let s=I.find(s=>s.id===e);return s?s.firstName&&s.lastName?"".concat(s.firstName," ").concat(s.lastName):s.name||s.username||"Teacher ".concat(e):"Teacher ".concat(e)},validateForm=()=>{let e={};return x.title.trim()||(e.title="Task title is required"),x.description.trim()||(e.description="Description is required"),x.type.trim()||(e.type="Task type is required"),x.priority.trim()||(e.priority="Priority level is required"),x.dueDate.trim()||(e.dueDate="Due date is required"),x.maxScore.trim()||(e.maxScore="Maximum score is required"),0===x.assignedClasses.length&&0===x.assignedStudents.length&&(e.assignment="Must assign to at least one class or student"),y(e),0===Object.keys(e).length},handleSubmit=async s=>{if(s.preventDefault(),validateForm()){S(!0);try{let s=localStorage.getItem("token");if(!s){e.push("/school-admin/login");return}let t=await fetch("".concat(v.CT,"/assignments/").concat(a),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({...x,maxScore:parseInt(x.maxScore)})});if(t.ok)await j().fire({icon:"success",title:"Success!",text:"Task updated successfully!",confirmButtonColor:"#0d6efd"}),e.push("/school-admin/tasks");else{let e=await t.json();throw Error(e.message||"Failed to update task")}}catch(e){console.error("Error updating task:",e),await j().fire({icon:"error",title:"Error",text:e.message||"Failed to update task. Please try again.",confirmButtonColor:"#dc3545"})}finally{S(!1)}}};return w?(0,t.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,t.jsx)("p",{className:"mt-3 text-muted",children:"Loading task..."})]})}):(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,t.jsx)("div",{className:"container-fluid py-3",children:(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,t.jsx)(p(),{href:"/school-admin/tasks",className:"btn btn-outline-secondary",children:(0,t.jsx)(i.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fas fa-edit me-2 text-primary"}),"Edit Task"]}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Update task details and assignments"})]})]})})}),(0,t.jsx)("div",{className:"container-fluid py-4",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsx)("div",{className:"col-lg-10 col-xl-8",children:(0,t.jsx)("div",{className:"card border-0 shadow",children:(0,t.jsx)("div",{className:"card-body p-4 p-lg-5",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(l.Z,{size:24,className:"text-primary"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Basic Task Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Task Title ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"title",value:x.title,onChange:handleInputChange,className:"form-control form-control-lg ".concat(N.title?"is-invalid":""),placeholder:"Enter task title"}),N.title&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.title})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Task Type ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("select",{name:"type",value:x.type,onChange:handleInputChange,className:"form-select form-select-lg ".concat(N.type?"is-invalid":""),children:[(0,t.jsx)("option",{value:"",children:"Select Type"}),["assignment","homework","project","quiz","exam"].map(e=>(0,t.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),N.type&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.type})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Priority Level ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("select",{name:"priority",value:x.priority,onChange:handleInputChange,className:"form-select form-select-lg ".concat(N.priority?"is-invalid":""),children:[(0,t.jsx)("option",{value:"",children:"Select Priority"}),["low","medium","high","urgent"].map(e=>(0,t.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),N.priority&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.priority})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Status ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("select",{name:"status",value:x.status,onChange:handleInputChange,className:"form-select form-select-lg",children:[{value:"pending",label:"Pending",color:"warning"},{value:"in-progress",label:"In Progress",color:"info"},{value:"completed",label:"Completed",color:"success"},{value:"overdue",label:"Overdue",color:"danger"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)("small",{className:"text-muted",children:"Current status of the task"})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Description ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("textarea",{name:"description",value:x.description,onChange:handleInputChange,className:"form-control form-control-lg ".concat(N.description?"is-invalid":""),rows:3,placeholder:"Detailed description of the task..."}),N.description&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.description})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(r.Z,{size:24,className:"text-warning"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Due Date & Scoring"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Due Date ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(c.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"datetime-local",name:"dueDate",value:x.dueDate,onChange:handleInputChange,className:"form-control border-start-0 ".concat(N.dueDate?"is-invalid":"")}),N.dueDate&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.dueDate})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Maximum Score ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(d.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"number",name:"maxScore",value:x.maxScore,onChange:handleInputChange,className:"form-control border-start-0 ".concat(N.maxScore?"is-invalid":""),placeholder:"e.g., 100",min:"1",max:"1000"}),N.maxScore&&(0,t.jsx)("div",{className:"invalid-feedback",children:N.maxScore})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(l.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Instructions & Rubric"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Instructions for Students"}),(0,t.jsx)("textarea",{name:"instructions",value:x.instructions,onChange:handleInputChange,className:"form-control form-control-lg",rows:4,placeholder:"Step-by-step instructions for completing the task..."})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Grading Rubric"}),(0,t.jsx)("textarea",{name:"rubric",value:x.rubric,onChange:handleInputChange,className:"form-control form-control-lg",rows:4,placeholder:"Detailed grading criteria and rubric..."})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-secondary bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(o.Z,{size:24,className:"text-secondary"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Tags & Categories"})]}),(0,t.jsx)("div",{className:"row g-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Select Tags"}),(0,t.jsx)("div",{className:"border rounded p-4",children:(0,t.jsx)("div",{className:"row g-3",children:["Mathematics","Science","English","History","Geography","Computer Science","Art","Music","Physical Education","Critical Thinking"].map(e=>(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"tag-".concat(e),checked:x.tags.includes(e),onChange:()=>handleTagChange(e)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"tag-".concat(e),children:e})]})},e))})})]})})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(m.Z,{size:24,className:"text-success"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Recurring Settings"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"isRecurring",name:"isRecurring",checked:x.isRecurring,onChange:handleInputChange}),(0,t.jsx)("label",{className:"form-check-label fw-semibold",htmlFor:"isRecurring",children:"This is a recurring task"})]})}),x.isRecurring&&(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Recurring Pattern"}),(0,t.jsxs)("select",{name:"recurringPattern",value:x.recurringPattern,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Pattern"}),["Daily","Weekly","Bi-weekly","Monthly","Quarterly"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-danger bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(u.Z,{size:24,className:"text-danger"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Assign To"})]}),N.assignment&&(0,t.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[(0,t.jsx)(h.Z,{size:20,className:"me-2"}),(0,t.jsx)("div",{children:N.assignment})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,t.jsx)(g.Z,{size:18}),"Select Classes"]}),(0,t.jsx)("div",{className:"border rounded p-4",style:{maxHeight:"300px",overflowY:"auto"},children:0===T.length?(0,t.jsx)("p",{className:"text-muted mb-0",children:"No classes available"}):(0,t.jsx)("div",{className:"row g-3",children:T.map(e=>(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"class-".concat(e.id),checked:x.assignedClasses.includes(e.id),onChange:()=>handleClassChange(e.id)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"class-".concat(e.id),children:e.name||"Class ".concat(e.grade,"-").concat(e.section)})]})},e.id))})})]}),x.assignedClasses.length>0?(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2 mb-0",children:[(0,t.jsx)(u.Z,{size:18}),"Select Students from Selected Classes"]}),R.length>0&&(0,t.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{x.assignedStudents.length===R.length?f(e=>({...e,assignedStudents:[]})):f(e=>({...e,assignedStudents:R.map(e=>e.id)}))},children:x.assignedStudents.length===R.length?"Deselect All":"Select All"})]}),(0,t.jsx)("div",{className:"border rounded p-4",style:{maxHeight:"400px",overflowY:"auto"},children:0===R.length?(0,t.jsxs)("div",{className:"alert alert-info mb-0",children:[(0,t.jsx)(h.Z,{size:16,className:"me-2"}),"No active students found in selected classes"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3 text-muted small",children:["Showing ",R.length," student(s) from selected classes"]}),(0,t.jsx)("div",{className:"row g-3",children:R.map(e=>{var s;return(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"student-".concat(e.id),checked:x.assignedStudents.includes(e.id),onChange:()=>handleStudentChange(e.id)}),(0,t.jsxs)("label",{className:"form-check-label",htmlFor:"student-".concat(e.id),children:[e.firstName," ",e.lastName,(0,t.jsxs)("small",{className:"text-muted ms-2",children:["(",(null===(s=T.find(s=>s.id===(e.currentClassId||e.classId)))||void 0===s?void 0:s.name)||"N/A",")"]})]})]})},e.id)})})]})}),x.assignedStudents.length>0&&(0,t.jsxs)("small",{className:"text-muted mt-2 d-block",children:[x.assignedStudents.length," student(s) selected"]})]}):(0,t.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,t.jsx)(h.Z,{size:16,className:"me-2"}),"Please select classes first to see students"]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,t.jsx)(u.Z,{size:18}),"Assign to Teachers (Optional)"]}),(0,t.jsx)("div",{className:"border rounded p-4",style:{maxHeight:"300px",overflowY:"auto"},children:0===I.length?(0,t.jsx)("p",{className:"text-muted mb-0",children:"No teachers available"}):(0,t.jsx)("div",{className:"row g-3",children:I.map(e=>(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"teacher-".concat(e.id),checked:x.assignedTeachers.includes(e.id),onChange:()=>handleTeacherChange(e.id)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"teacher-".concat(e.id),children:getTeacherName(e.id)})]})},e.id))})})]})]}),(0,t.jsxs)("div",{className:"d-flex justify-content-between gap-3",children:[(0,t.jsxs)(p(),{href:"/school-admin/tasks",className:"btn btn-lg btn-outline-secondary",children:[(0,t.jsx)(i.Z,{size:18,className:"me-2"}),"Cancel"]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary px-5",disabled:k,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Updating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-save me-2"}),"Update Task"]})})]})]})})})})})})]})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:n,headers:i,...l}=s,r="".concat(t).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,s)=>{let[a,t]=s;return null!=t&&(e[a]=String(t)),e},{})).toString();e&&(r+="?".concat(e))}let c={"Content-Type":"application/json",...i};a&&(c.Authorization="Bearer ".concat(a));try{let e=await fetch(r,{...l,headers:c}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=3532)}),_N_E=e.O()}]);