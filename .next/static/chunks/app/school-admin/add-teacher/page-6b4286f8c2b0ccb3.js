(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{2898:function(e,s,a){"use strict";a.d(s,{Z:function(){return createLucideIcon}});var t=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:c,...i},d)=>(0,t.createElement)("svg",{ref:d,...r,width:l,height:l,stroke:a,strokeWidth:o?24*Number(n)/Number(l):n,className:`lucide lucide-${toKebabCase(e)}`,...i},[...s.map(([e,s])=>(0,t.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return a.displayName=`${e}`,a}},3067:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2442:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6224:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7216:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3344:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},1295:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6142:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2741:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4280:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7972:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);let r=(0,t.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5123:function(e,s,a){Promise.resolve().then(a.bind(a,6806))},6806:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return AddTeacherPage}});var t=a(7437),r=a(2265),l=a(3067),n=a(7972),o=a(1295),c=a(2741),i=a(8203),d=a(7216),m=a(9670),u=a(4280),h=a(2442),p=a(6224),g=a(3344),f=a(9865),x=a(6142),b=a(1396),j=a.n(b),N=a(4033),v=a(2512),y=a(6454),w=a(1376);function AddTeacherPage(){let e=(0,N.useRouter)(),[s,a]=(0,r.useState)({firstName:"",lastName:"",email:"",mobile:"",password:"",dateOfBirth:"",address:"",city:"",state:"",country:"India",postalCode:"",qualification:"",specialization:"",experienceYears:"",department:"",designation:"",subjects:[],classIds:[],joiningDate:"",salary:"",emergencyContact:""}),[b,k]=(0,r.useState)({}),[C,S]=(0,r.useState)(!1),[I,E]=(0,r.useState)(""),[P,A]=(0,r.useState)(null),[M,Z]=(0,r.useState)([]),[D,T]=(0,r.useState)(!0),[z,q]=(0,r.useState)(!1),[L,O]=(0,r.useState)(!1),[R,U]=(0,r.useState)(null),[F,B]=(0,r.useState)([]),[V,Y]=(0,r.useState)(!0),fetchSubjects=async()=>{try{Y(!0);let e=(0,y.hV)();if(!e){console.error("No authentication token found"),Y(!1);return}console.log("Making API call to /subjects...");let s=await fetch("".concat(y.CT,"/subjects"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Subjects fetch response status:",s.status),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(console.log("Subjects API Response:",a),Array.isArray(a)){let e=a.filter(e=>"active"===e.status).map(e=>e.name);console.log("Active subjects:",e),B(e)}else console.error("Invalid response format:",a),B([])}catch(e){console.error("Error fetching subjects:",e),console.error("Error details:",e.message),B(["Mathematics","Physics","Chemistry","Biology","English","Hindi","History","Geography","Civics","Economics","Computer Science","Physical Education","Art","Music","Sanskrit"])}finally{Y(!1)}},fetchClasses=async()=>{try{T(!0);let e=(0,y.hV)();if(console.log("=== Fetch Classes Debug ==="),console.log("Token available:",!!e),!e){console.error("No authentication token found"),T(!1);return}console.log("Making API call to /classes...");let s=await fetch("".concat(y.CT,"/classes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Direct fetch response status:",s.status),console.log("Direct fetch response ok:",s.ok),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(console.log("Classes API Response:",a),console.log("Response type:",typeof a),console.log("Is array:",Array.isArray(a)),Array.isArray(a)){console.log("Total classes received:",a.length);let e=a.filter(e=>"ACTIVE"===e.status||"active"===e.status);console.log("Active classes after filtering:",e.length),console.log("Active classes data:",e),Z(e)}else console.error("Invalid response format:",a),Z([])}catch(e){console.error("Error fetching classes:",e),console.error("Error details:",e.message),Z([])}finally{T(!1)}};(0,r.useEffect)(()=>{console.log("=== Page Load Debug ===");let s=localStorage.getItem("token"),a=localStorage.getItem("user");console.log("Raw token from localStorage:",s?"Present":"Missing"),console.log("Raw user from localStorage:",a);let t=null;if(a)try{t=JSON.parse(a),console.log("Parsed user successfully:",t)}catch(e){console.error("Failed to parse user:",e)}let r=(0,y.vF)(),l=(0,y.hV)();console.log("Token from getStoredToken():",!!l),console.log("User from getStoredUser():",r),console.log("School ID:",(null==r?void 0:r.schoolId)||(null==t?void 0:t.schoolId)),A({hasToken:!!l||!!s,hasUser:!!r||!!t,hasSchoolId:!!((null==r?void 0:r.schoolId)||(null==t?void 0:t.schoolId)),schoolId:(null==r?void 0:r.schoolId)||(null==t?void 0:t.schoolId),userRole:(null==r?void 0:r.role)||(null==t?void 0:t.role),userEmail:(null==r?void 0:r.email)||(null==t?void 0:t.email)}),l||s?(fetchClasses(),fetchSubjects()):(alert("You are not logged in. Redirecting to login..."),e.push("/school-admin/login"))},[e]);let handleInputChange=e=>{let{name:s,value:t}=e.target;if(a(e=>({...e,[s]:t})),b[s]&&k(e=>({...e,[s]:""})),"password"===s){let e=(0,w.uo)(t);U(e)}},handleCopyPassword=async()=>{if(s.password)try{await navigator.clipboard.writeText(s.password),O(!0),setTimeout(()=>O(!1),2e3)}catch(e){console.error("Failed to copy password:",e)}},handleSubjectChange=e=>{a(s=>({...s,subjects:s.subjects.includes(e)?s.subjects.filter(s=>s!==e):[...s.subjects,e]}))},handleClassChange=e=>{a(s=>({...s,classIds:s.classIds.includes(e)?s.classIds.filter(s=>s!==e):[...s.classIds,e]}))},validateForm=()=>{let e={};if(s.firstName.trim()||(e.firstName="First name is required"),s.lastName.trim()||(e.lastName="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(e.email="Email is invalid"):e.email="Email is required",s.password){let a=(0,w.uo)(s.password);a.isValid||(e.password=a.errors.join(", "))}else e.password="Password is required";return s.mobile&&!/^\d{10}$/.test(s.mobile)&&(e.mobile="Mobile number must be 10 digits"),s.qualification.trim()||(e.qualification="Qualification is required"),s.experienceYears.trim()||(e.experienceYears="Experience is required"),0===s.subjects.length&&(e.subjects="At least one subject is required"),k(e),0===Object.keys(e).length},handleSubmit=async t=>{if(t.preventDefault(),validateForm()){S(!0),E("");try{let t=(0,y.vF)();if(!t){let e=localStorage.getItem("user");if(e)try{t=JSON.parse(e),console.log("✅ Got user from direct localStorage read")}catch(e){console.error("Failed to parse user from localStorage:",e)}}if(console.log("=== Add Teacher Debug ==="),console.log("Logged in user:",t),console.log("School ID:",null==t?void 0:t.schoolId),console.log("All localStorage keys:",Object.keys(localStorage)),!t)throw Error("User not logged in. Please login again and make sure cookies are enabled.");if(!t.schoolId)throw Error("School ID not found in your profile. Backend response may be missing schoolId. Check console logs during login.");let r={firstName:s.firstName,lastName:s.lastName,email:s.email,mobile:s.mobile,password:s.password,dateOfBirth:s.dateOfBirth||void 0,address:s.address,city:s.city,state:s.state,country:s.country,postalCode:s.postalCode,schoolId:Number(t.schoolId),qualification:s.qualification,specialization:s.specialization||void 0,experienceYears:s.experienceYears?parseInt(s.experienceYears):0,department:s.department||void 0,designation:s.designation||void 0,subjects:s.subjects,classIds:s.classIds.length>0?s.classIds:void 0,joiningDate:s.joiningDate?new Date(s.joiningDate):void 0,salary:s.salary?parseFloat(s.salary):void 0,emergencyContact:s.emergencyContact||void 0};console.log("Creating teacher with data:",r);let l=await v.zF.create(r);console.log("✅ Teacher created successfully:",l),E("✅ Teacher added successfully! Redirecting..."),a({firstName:"",lastName:"",email:"",mobile:"",password:"",dateOfBirth:"",address:"",city:"",state:"",country:"India",postalCode:"",qualification:"",specialization:"",experienceYears:"",department:"",designation:"",subjects:[],classIds:[],joiningDate:"",salary:"",emergencyContact:""}),k({}),setTimeout(()=>{e.push("/school-admin/teachers")},2e3)}catch(s){console.error("❌ Error adding teacher:",s);let e="Error adding teacher. Please try again.";s instanceof y.MS?(e="Error: ".concat(s.message),console.error("API Error Status:",s.status),console.error("API Error Data:",s.data)):s instanceof Error&&(e=s.message),k({submit:e}),alert(e)}finally{S(!1)}}};return(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,t.jsx)("div",{className:"container-fluid py-3",children:(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,t.jsx)(j(),{href:"/school-admin/dashboard",className:"btn btn-outline-secondary",children:(0,t.jsx)(l.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fas fa-chalkboard-teacher me-2 text-success"}),"Add New Teacher"]}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Hire a new faculty member"})]})]})})}),(0,t.jsx)("div",{className:"container-fluid py-4",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsx)("div",{className:"col-lg-10 col-xl-8",children:(0,t.jsx)("div",{className:"card border-0 shadow",children:(0,t.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[P&&!P.hasSchoolId&&(0,t.jsxs)("div",{className:"alert alert-warning mb-4",children:[(0,t.jsx)("h6",{className:"alert-heading",children:"⚠️ Debug Information"}),(0,t.jsxs)("ul",{className:"mb-0 small",children:[(0,t.jsxs)("li",{children:["Token: ",P.hasToken?"✅ Present":"❌ Missing"]}),(0,t.jsxs)("li",{children:["User Data: ",P.hasUser?"✅ Present":"❌ Missing"]}),(0,t.jsxs)("li",{children:["School ID: ",P.hasSchoolId?"✅ ".concat(P.schoolId):"❌ Missing"]}),(0,t.jsxs)("li",{children:["Role: ",P.userRole||"N/A"]}),(0,t.jsxs)("li",{children:["Email: ",P.userEmail||"N/A"]})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{className:"mb-0 small",children:[(0,t.jsx)("strong",{children:"Issue:"})," School ID is missing. Please login again as School Admin."]})]}),I&&(0,t.jsxs)("div",{className:"alert alert-success alert-dismissible fade show mb-4",role:"alert",children:[I,(0,t.jsx)("button",{type:"button",className:"btn-close",onClick:()=>E("")})]}),b.submit&&(0,t.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show mb-4",role:"alert",children:[b.submit,(0,t.jsx)("button",{type:"button",className:"btn-close",onClick:()=>k({...b,submit:""})})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(n.Z,{size:24,className:"text-success"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Personal Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:s.firstName,onChange:handleInputChange,className:"form-control form-control-lg ".concat(b.firstName?"is-invalid":""),placeholder:"Enter first name"}),b.firstName&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.firstName})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:s.lastName,onChange:handleInputChange,className:"form-control form-control-lg ".concat(b.lastName?"is-invalid":""),placeholder:"Enter last name"}),b.lastName&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.lastName})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Email Address ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(o.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"email",name:"email",value:s.email,onChange:handleInputChange,className:"form-control border-start-0 ".concat(b.email?"is-invalid":""),placeholder:"Enter email address"}),b.email&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.email})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Mobile Number"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(c.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"tel",name:"mobile",value:s.mobile,onChange:handleInputChange,className:"form-control border-start-0 ".concat(b.mobile?"is-invalid":""),placeholder:"Enter mobile number"}),b.mobile&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.mobile})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Date of Birth"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(i.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"date",name:"dateOfBirth",value:s.dateOfBirth,onChange:handleInputChange,className:"form-control border-start-0"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Password ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("input",{type:z?"text":"password",name:"password",value:s.password,onChange:handleInputChange,className:"form-control ".concat(b.password?"is-invalid":""),placeholder:"Enter or generate password"}),(0,t.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>q(!z),title:z?"Hide password":"Show password",children:z?(0,t.jsx)(d.Z,{size:18}):(0,t.jsx)(m.Z,{size:18})}),(0,t.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{let e=(0,w.G$)(12);a(s=>({...s,password:e}));let s=(0,w.uo)(e);U(s),q(!0),b.password&&k(e=>({...e,password:""}))},title:"Generate secure password",children:(0,t.jsx)(u.Z,{size:18})}),s.password&&(0,t.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:handleCopyPassword,title:"Copy password",children:L?(0,t.jsx)(h.Z,{size:18}):(0,t.jsx)(p.Z,{size:18})})]}),R&&s.password&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,t.jsx)("small",{className:"text-muted",children:"Password Strength:"}),(0,t.jsx)("small",{className:"text-".concat((0,w.zU)(R.strength)," fw-bold"),children:(0,w.sO)(R.strength)})]}),(0,t.jsx)("div",{className:"progress",style:{height:"6px"},children:(0,t.jsx)("div",{className:"progress-bar bg-".concat((0,w.zU)(R.strength)),role:"progressbar",style:{width:"".concat(R.score,"%")}})})]}),b.password&&(0,t.jsx)("div",{className:"text-danger small mt-2",children:b.password}),(0,t.jsxs)("small",{className:"text-muted d-block mt-2",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-1"}),"Password must contain: uppercase, lowercase, number, and special character"]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(g.Z,{size:24,className:"text-primary"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Professional Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Qualification ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"qualification",value:s.qualification,onChange:handleInputChange,className:"form-control form-control-lg ".concat(b.qualification?"is-invalid":""),placeholder:"e.g., M.Sc., B.Ed."}),b.qualification&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.qualification})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Experience (Years) ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"number",name:"experienceYears",value:s.experienceYears,onChange:handleInputChange,className:"form-control form-control-lg ".concat(b.experienceYears?"is-invalid":""),placeholder:"e.g., 5",min:"0"}),b.experienceYears&&(0,t.jsx)("div",{className:"invalid-feedback",children:b.experienceYears})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Specialization"}),(0,t.jsx)("input",{type:"text",name:"specialization",value:s.specialization,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"e.g., Mathematics, Physics"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Department"}),(0,t.jsx)("input",{type:"text",name:"department",value:s.department,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"e.g., Science, Arts"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Designation"}),(0,t.jsx)("input",{type:"text",name:"designation",value:s.designation,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"e.g., Senior Teacher, HOD"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Emergency Contact"}),(0,t.jsx)("input",{type:"tel",name:"emergencyContact",value:s.emergencyContact,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Emergency contact number"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Joining Date"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(i.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"date",name:"joiningDate",value:s.joiningDate,onChange:handleInputChange,className:"form-control border-start-0"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Salary (Monthly)"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:"₹"}),(0,t.jsx)("input",{type:"number",name:"salary",value:s.salary,onChange:handleInputChange,className:"form-control border-start-0",placeholder:"Enter salary amount"})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(f.Z,{size:24,className:"text-warning"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Subjects & Classes"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Subjects ",(0,t.jsx)("span",{className:"text-danger",children:"*"}),V&&(0,t.jsx)("span",{className:"spinner-border spinner-border-sm ms-2",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),V?(0,t.jsxs)("div",{className:"border rounded p-4 text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading subjects..."})}),(0,t.jsx)("p",{className:"mt-2 mb-0 text-muted",children:"Loading subjects..."})]}):0===F.length?(0,t.jsxs)("div",{className:"alert alert-info",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-2"}),"No subjects available. Please create subjects first from the"," ",(0,t.jsx)(j(),{href:"/school-admin/subjects",className:"text-primary fw-bold",children:"Subjects"})," ","page."]}):(0,t.jsxs)("div",{className:"border rounded p-4",children:[(0,t.jsx)("div",{className:"row g-3",children:F.map(e=>(0,t.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"subject-".concat(e),checked:s.subjects.includes(e),onChange:()=>handleSubjectChange(e)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"subject-".concat(e),children:e})]})},e))}),s.subjects.length>0&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-success bg-opacity-10 rounded",children:(0,t.jsxs)("small",{className:"text-success",children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-1"}),s.subjects.length," subject(s) selected"]})})]}),b.subjects&&(0,t.jsx)("div",{className:"text-danger small mt-2",children:b.subjects})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assign to Classes (Optional - Multiple Selection)",D&&(0,t.jsx)("span",{className:"spinner-border spinner-border-sm ms-2",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),D?(0,t.jsxs)("div",{className:"border rounded p-4 text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading classes..."})}),(0,t.jsx)("p",{className:"mt-2 mb-0 text-muted",children:"Loading classes..."})]}):0===M.length?(0,t.jsxs)("div",{className:"alert alert-info",children:[(0,t.jsx)("i",{className:"fas fa-info-circle me-2"}),"No classes available. Please create a class first from the"," ",(0,t.jsx)(j(),{href:"/school-admin/create-class",className:"text-primary fw-bold",children:"Create Class"})," ","page."]}):(0,t.jsxs)("div",{className:"border rounded p-4 bg-light",children:[(0,t.jsx)("div",{className:"row g-3",children:M.map(e=>(0,t.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"class-".concat(e.id),checked:s.classIds.includes(e.id),onChange:()=>handleClassChange(e.id)}),(0,t.jsxs)("label",{className:"form-check-label",htmlFor:"class-".concat(e.id),children:[(0,t.jsx)("strong",{children:e.name}),e.grade&&(0,t.jsxs)("span",{className:"text-muted ms-1",children:["(",e.grade,")"]})]})]})},e.id))}),s.classIds.length>0&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-success bg-opacity-10 rounded",children:(0,t.jsxs)("small",{className:"text-success",children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-1"}),s.classIds.length," class(es) selected"]})})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(x.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Address Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Address"}),(0,t.jsxs)("div",{className:"input-group input-group-lg",children:[(0,t.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,t.jsx)(x.Z,{size:18,className:"text-muted"})}),(0,t.jsx)("input",{type:"text",name:"address",value:s.address,onChange:handleInputChange,className:"form-control border-start-0",placeholder:"Enter full address"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:s.city,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter city"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"State"}),(0,t.jsx)("input",{type:"text",name:"state",value:s.state,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter state"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Country"}),(0,t.jsx)("input",{type:"text",name:"country",value:s.country,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter country"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Postal Code"}),(0,t.jsx)("input",{type:"text",name:"postalCode",value:s.postalCode,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter postal code"})]})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,t.jsxs)(j(),{href:"/school-admin/dashboard",className:"btn btn-secondary btn-lg px-5",children:[(0,t.jsx)("i",{className:"fas fa-times me-2"}),"Cancel"]}),(0,t.jsx)("button",{type:"submit",disabled:C,className:"btn btn-success btn-lg px-5",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Adding Teacher..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"Add Teacher"]})})]})]})]})})})})})]})}},2512:function(e,s,a){"use strict";a.d(s,{iJ:function(){return r},zF:function(){return l}});var t=a(6454);let r={login:e=>(0,t.sg)("/auth/login",e),register:e=>(0,t.sg)("/auth/register",e),refreshToken:()=>(0,t.sg)("/auth/refresh",{},{token:(0,t.hV)()||void 0}),generateOtp:e=>(0,t.sg)("/auth/generate-otp",{email:e}),verifyOtp:(e,s)=>(0,t.sg)("/auth/verify-otp",{email:e,otp:s})},l={getAll:e=>(0,t.R1)("/teachers",{params:e,token:(0,t.hV)()||void 0}),getById:e=>(0,t.R1)("/teachers/".concat(e),{token:(0,t.hV)()||void 0}),create:e=>(0,t.sg)("/teachers",e,{token:(0,t.hV)()||void 0}),update:(e,s)=>(0,t.nc)("/teachers/".concat(e),s,{token:(0,t.hV)()||void 0}),updateStatus:(e,s)=>(0,t.nc)("/teachers/".concat(e,"/status"),{status:s},{token:(0,t.hV)()||void 0}),delete:e=>(0,t.QW)("/teachers/".concat(e),{token:(0,t.hV)()||void 0})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:r,headers:l,...n}=s,o="".concat(t).concat(e);if(r){let e=new URLSearchParams(Object.entries(r).reduce((e,s)=>{let[a,t]=s;return null!=t&&(e[a]=String(t)),e},{})).toString();e&&(o+="?".concat(e))}let c={"Content-Type":"application/json",...l};a&&(c.Authorization="Bearer ".concat(a));try{let e=await fetch(o,{...n,headers:c}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},1376:function(e,s,a){"use strict";a.d(s,{G$:function(){return generateSecurePassword},GB:function(){return validatePasswordComprehensive},sO:function(){return getStrengthLabel},uo:function(){return validatePassword},zU:function(){return getStrengthColor}});let t={minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumber:!0,requireSpecial:!0};function validatePassword(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=[],r=0;return s.minLength&&e.length<s.minLength?a.push("Password must be at least ".concat(s.minLength," characters long")):r+=20,s.requireUppercase&&!/[A-Z]/.test(e)?a.push("Password must contain at least one uppercase letter"):/[A-Z]/.test(e)&&(r+=20),s.requireLowercase&&!/[a-z]/.test(e)?a.push("Password must contain at least one lowercase letter"):/[a-z]/.test(e)&&(r+=20),s.requireNumber&&!/[0-9]/.test(e)?a.push("Password must contain at least one number"):/[0-9]/.test(e)&&(r+=20),s.requireSpecial&&!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)?a.push("Password must contain at least one special character (!@#$%^&*...)"):/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)&&(r+=20),e.length>=12&&(r+=10),e.length>=16&&(r+=10),{isValid:0===a.length,errors:a,strength:r<40?"weak":r<60?"medium":r<80?"strong":"very-strong",score:Math.min(r,100)}}function passwordsMatch(e,s){return e===s}function getStrengthColor(e){switch(e){case"weak":return"danger";case"medium":return"warning";case"strong":return"info";case"very-strong":return"success";default:return"secondary"}}function getStrengthLabel(e){switch(e){case"weak":return"Weak \uD83D\uDE1F";case"medium":return"Medium \uD83D\uDE10";case"strong":return"Strong \uD83D\uDE42";case"very-strong":return"Very Strong \uD83D\uDE03";default:return""}}let r=["password","12345678","123456789","qwerty","abc123","password123","admin","letmein","welcome","monkey"];function isCommonPassword(e){return r.includes(e.toLowerCase())}function validatePasswordComprehensive(e,s,a){let t=[],r=validatePassword(e,a);return t.push(...r.errors),passwordsMatch(e,s)||t.push("Passwords do not match"),isCommonPassword(e)&&t.push("This password is too common. Please choose a more unique password"),{isValid:0===t.length,errors:t}}function generateSecurePassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz",t="0123456789",r="!@#$%^&*()_+-=[]{}|;:,.<>?",l="";l+=s[Math.floor(Math.random()*s.length)]+a[Math.floor(Math.random()*a.length)]+t[Math.floor(Math.random()*t.length)]+r[Math.floor(Math.random()*r.length)];let n=s+a+t+r;for(let s=l.length;s<e;s++)l+=n[Math.floor(Math.random()*n.length)];return l.split("").sort(()=>Math.random()-.5).join("")}},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[1176,2971,2472,1744],function(){return e(e.s=5123)}),_N_E=e.O()}]);