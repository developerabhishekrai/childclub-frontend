(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9186],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:c,...d},o)=>(0,a.createElement)("svg",{ref:o,...i,width:l,height:l,stroke:t,strokeWidth:r?24*Number(n)/Number(l):n,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${e}`,t}},3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2505:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},9865:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5817:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8734:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]])},2482:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8438:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},2882:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6020:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},7972:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2104:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6237:function(e,s,t){Promise.resolve().then(t.bind(t,8387))},8387:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return TeacherSubmissionsPage}});var a=t(7437),i=t(2265),l=t(1396),n=t.n(l),r=t(4033),c=t(6454),d=t(6141),o=t(6637),m=t(9670),u=t(3008),h=t(2104),x=t(8438),v=t(8734),b=t(3067),g=t(1827),j=t(2482),p=t(7972),N=t(9865),f=t(8203),y=t(2505),w=t(2882),k=t(5817),S=t(6020),Z=t(6820),z=t.n(Z);function TeacherSubmissionsPage(){var e,s,t,l,Z,C,A,R,T,F,E,L,P;let I=(0,r.useRouter)(),[q,D]=(0,i.useState)([]),[M,B]=(0,i.useState)([]),[G,O]=(0,i.useState)(!0),[U,H]=(0,i.useState)(null),[V,_]=(0,i.useState)(!1),[J,Y]=(0,i.useState)(!1),[$,K]=(0,i.useState)(""),[W,Q]=(0,i.useState)(""),[X,ee]=(0,i.useState)(""),[es,et]=(0,i.useState)("reviewed"),[ea,ei]=(0,i.useState)(""),[el,en]=(0,i.useState)("all"),[er,ec]=(0,i.useState)("date");(0,i.useEffect)(()=>{fetchSubmissions()},[]),(0,i.useEffect)(()=>{filterAndSortSubmissions()},[q,ea,el,er]);let fetchSubmissions=async()=>{try{O(!0);let e=localStorage.getItem("token");if(!e){z().fire({icon:"error",title:"Authentication Error",text:"Please login again"}),I.push("/teacher/login");return}console.log("[Frontend] Fetching teacher submissions...");let s=await fetch("".concat(c.CT,"/submissions/teacher/my-submissions"),{headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw Error("Failed to fetch submissions");let t=await s.json();console.log("[Frontend] Fetched",t.length,"submissions"),D(t)}catch(e){console.error("Error fetching submissions:",e),z().fire({icon:"error",title:"Error",text:e.message||"Failed to fetch submissions"})}finally{O(!1)}},filterAndSortSubmissions=()=>{let e=[...q];if(ea.trim()){let s=ea.toLowerCase();e=e.filter(e=>{var t,a,i,l;return(null===(t=e.student)||void 0===t?void 0:t.firstName.toLowerCase().includes(s))||(null===(a=e.student)||void 0===a?void 0:a.lastName.toLowerCase().includes(s))||(null===(i=e.task)||void 0===i?void 0:i.title.toLowerCase().includes(s))||(null===(l=e.content)||void 0===l?void 0:l.toLowerCase().includes(s))})}"all"!==el&&(e=e.filter(e=>e.status===el)),e.sort((e,s)=>{if("date"===er)return new Date(s.submittedAt).getTime()-new Date(e.submittedAt).getTime();if("student"===er){var t,a,i,l;let n="".concat(null===(t=e.student)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.student)||void 0===a?void 0:a.lastName).toLowerCase(),r="".concat(null===(i=s.student)||void 0===i?void 0:i.firstName," ").concat(null===(l=s.student)||void 0===l?void 0:l.lastName).toLowerCase();return n.localeCompare(r)}return"grade"===er?(s.grade||0)-(e.grade||0):0}),B(e)},handleViewDetails=e=>{H(e),_(!0)},handleStartReview=e=>{var s;H(e),K((null===(s=e.grade)||void 0===s?void 0:s.toString())||""),Q(e.feedback||""),ee(e.teacherNotes||""),et("submitted"===e.status?"reviewed":e.status),Y(!0)},handleSubmitReview=async()=>{var e,s;if(U){if(!$||0>parseFloat($)){z().fire({icon:"warning",title:"Invalid Grade",text:"Please enter a valid grade (0 or higher)"});return}if(parseFloat($)>((null===(e=U.task)||void 0===e?void 0:e.maxScore)||100)){z().fire({icon:"warning",title:"Grade Too High",text:"Grade cannot exceed ".concat(null===(s=U.task)||void 0===s?void 0:s.maxScore)});return}if(!W.trim()){let e=await z().fire({icon:"question",title:"No Feedback",text:"Are you sure you want to submit without feedback?",showCancelButton:!0,confirmButtonText:"Yes, Submit",cancelButtonText:"Cancel"});if(!e.isConfirmed)return}try{let e=localStorage.getItem("token"),s=await fetch("".concat(c.CT,"/submissions/").concat(U.id,"/review"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({grade:parseFloat($),feedback:W.trim(),teacherNotes:X.trim(),status:es})});if(s.ok)await z().fire({icon:"success",title:"Review Submitted!",text:"Your review has been saved successfully",confirmButtonColor:"#10b981"}),Y(!1),_(!1),fetchSubmissions();else throw Error("Failed to submit review")}catch(e){console.error("Error submitting review:",e),z().fire({icon:"error",title:"Error",text:"Failed to submit review. Please try again."})}}},getStatusBadge=e=>{let s={draft:{class:"warning",icon:d.Z,label:"Draft"},submitted:{class:"info",icon:o.Z,label:"Submitted"},reviewed:{class:"primary",icon:m.Z,label:"Reviewed"},approved:{class:"success",icon:u.Z,label:"Approved"},rejected:{class:"danger",icon:h.Z,label:"Rejected"},resubmit:{class:"warning",icon:d.Z,label:"Resubmit Required"}},t=s[e]||s.submitted,i=t.icon;return(0,a.jsxs)("span",{className:"badge bg-".concat(t.class," d-flex align-items-center gap-1"),style:{width:"fit-content"},children:[(0,a.jsx)(i,{size:14}),t.label]})},getFileIcon=e=>e.includes("image")?(0,a.jsx)(x.Z,{size:16,className:"text-primary"}):e.includes("pdf")?(0,a.jsx)(v.Z,{size:16,className:"text-danger"}):(0,a.jsx)(v.Z,{size:16,className:"text-secondary"}),formatFileSize=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",ed={total:q.length,submitted:q.filter(e=>"submitted"===e.status).length,reviewed:q.filter(e=>"reviewed"===e.status).length,approved:q.filter(e=>"approved"===e.status).length,pending:q.filter(e=>"submitted"===e.status).length};return G?(0,a.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-warning",style:{width:"3rem",height:"3rem"},role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-3 text-muted fw-semibold",children:"Loading submissions..."})]})}):(0,a.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,a.jsx)("div",{className:"container-fluid py-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)(n(),{href:"/teacher/dashboard",className:"btn btn-outline-secondary",children:(0,a.jsx)(b.Z,{size:20})}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark d-flex align-items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"text-warning",size:28}),"Student Submissions"]}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Review aur grade karein apne students ke kaam ko"})]})]})})}),(0,a.jsxs)("div",{className:"container-fluid py-4",children:[(0,a.jsxs)("div",{className:"row g-3 mb-4",children:[(0,a.jsx)("div",{className:"col-md-3 col-sm-6",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(o.Z,{className:"text-primary",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted mb-0 small",children:"Total Submissions"}),(0,a.jsx)("h3",{className:"mb-0 fw-bold",children:ed.total})]})]})})})}),(0,a.jsx)("div",{className:"col-md-3 col-sm-6",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(d.Z,{className:"text-warning",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted mb-0 small",children:"Pending Review"}),(0,a.jsx)("h3",{className:"mb-0 fw-bold",children:ed.pending})]})]})})})}),(0,a.jsx)("div",{className:"col-md-3 col-sm-6",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(m.Z,{className:"text-info",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted mb-0 small",children:"Reviewed"}),(0,a.jsx)("h3",{className:"mb-0 fw-bold",children:ed.reviewed})]})]})})})}),(0,a.jsx)("div",{className:"col-md-3 col-sm-6",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,a.jsx)(u.Z,{className:"text-success",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted mb-0 small",children:"Approved"}),(0,a.jsx)("h3",{className:"mb-0 fw-bold",children:ed.approved})]})]})})})})]}),(0,a.jsx)("div",{className:"card border-0 shadow-sm mb-4",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsx)("div",{className:"col-md-5",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,a.jsx)(g.Z,{size:18,className:"text-muted"})}),(0,a.jsx)("input",{type:"text",className:"form-control border-start-0",placeholder:"Search by student name, assignment title...",value:ea,onChange:e=>ei(e.target.value)})]})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsxs)("select",{className:"form-select",value:el,onChange:e=>en(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"resubmit",children:"Resubmit Required"})]})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsxs)("select",{className:"form-select",value:er,onChange:e=>ec(e.target.value),children:[(0,a.jsx)("option",{value:"date",children:"Sort by Date"}),(0,a.jsx)("option",{value:"student",children:"Sort by Student"}),(0,a.jsx)("option",{value:"grade",children:"Sort by Grade"})]})}),(0,a.jsx)("div",{className:"col-md-1",children:(0,a.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:()=>{ei(""),en("all"),ec("date")},title:"Clear Filters",children:(0,a.jsx)(j.Z,{size:18})})})]})})}),(0,a.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,a.jsx)("div",{className:"card-header bg-white border-bottom",children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h5",{className:"mb-0 fw-bold",children:"Submissions List"}),(0,a.jsxs)("span",{className:"badge bg-primary rounded-pill",children:[M.length," submissions"]})]})}),(0,a.jsx)("div",{className:"card-body p-0",children:0===M.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)(o.Z,{size:64,className:"text-muted mb-3"}),(0,a.jsx)("h5",{className:"text-muted",children:"No submissions found"}),(0,a.jsx)("p",{className:"text-muted",children:ea||"all"!==el?"Try changing your filters":"Student submissions will appear here"})]}):(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{style:{width:"20%"},children:[(0,a.jsx)(p.Z,{size:16,className:"me-2"}),"Student"]}),(0,a.jsxs)("th",{style:{width:"25%"},children:[(0,a.jsx)(N.Z,{size:16,className:"me-2"}),"Assignment"]}),(0,a.jsxs)("th",{style:{width:"15%"},children:[(0,a.jsx)(f.Z,{size:16,className:"me-2"}),"Submitted"]}),(0,a.jsx)("th",{style:{width:"10%"},children:"Status"}),(0,a.jsxs)("th",{style:{width:"10%"},children:[(0,a.jsx)(y.Z,{size:16,className:"me-2"}),"Grade"]}),(0,a.jsx)("th",{style:{width:"10%"},children:"Files"}),(0,a.jsx)("th",{style:{width:"10%"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:M.map(e=>{var s,t,i,l,n,r;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fw-semibold text-dark",children:[null===(s=e.student)||void 0===s?void 0:s.firstName," ",null===(t=e.student)||void 0===t?void 0:t.lastName]}),(0,a.jsx)("small",{className:"text-muted",children:null===(i=e.student)||void 0===i?void 0:i.email})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fw-semibold text-dark",children:null===(l=e.task)||void 0===l?void 0:l.title}),(0,a.jsxs)("small",{className:"text-muted",children:["Max Score: ",null===(n=e.task)||void 0===n?void 0:n.maxScore," pts",1===e.isLate&&(0,a.jsx)("span",{className:"badge bg-danger ms-2",style:{fontSize:"0.7rem"},children:"Late"})]})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("small",{children:[new Date(e.submittedAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-muted",children:new Date(e.submittedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})}),(0,a.jsx)("td",{children:getStatusBadge(e.status)}),(0,a.jsx)("td",{children:null!==e.grade&&void 0!==e.grade?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"fw-bold text-success fs-5",children:e.grade}),(0,a.jsxs)("span",{className:"text-muted",children:["/",null===(r=e.task)||void 0===r?void 0:r.maxScore]})]}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsx)("td",{children:e.attachments&&e.attachments.length>0?(0,a.jsxs)("span",{className:"badge bg-secondary",children:[(0,a.jsx)(v.Z,{size:12,className:"me-1"}),e.attachments.length]}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex gap-1",children:[(0,a.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>handleViewDetails(e),title:"View Details",children:(0,a.jsx)(m.Z,{size:14})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-success",onClick:()=>handleStartReview(e),title:"Review & Grade",children:(0,a.jsx)(w.Z,{size:14})})]})})]},e.id)})})]})})})]})]}),V&&U&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>_(!1),children:(0,a.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable modal-dialog-centered",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"modal-content border-0 shadow-lg",children:[(0,a.jsxs)("div",{className:"modal-header bg-gradient",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,a.jsxs)("h5",{className:"modal-title text-white fw-bold d-flex align-items-center gap-2",children:[(0,a.jsx)(o.Z,{size:24}),"Submission Details"]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>_(!1)})]}),(0,a.jsxs)("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[(0,a.jsx)("div",{className:"card border-0 bg-light mb-3",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(p.Z,{size:18,className:"text-primary"}),(0,a.jsx)("strong",{children:"Student"})]}),(0,a.jsxs)("p",{className:"mb-0",children:[null===(e=U.student)||void 0===e?void 0:e.firstName," ",null===(s=U.student)||void 0===s?void 0:s.lastName]}),(0,a.jsx)("small",{className:"text-muted",children:null===(t=U.student)||void 0===t?void 0:t.email})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(N.Z,{size:18,className:"text-primary"}),(0,a.jsx)("strong",{children:"Assignment"})]}),(0,a.jsx)("p",{className:"mb-0",children:null===(l=U.task)||void 0===l?void 0:l.title}),(0,a.jsxs)("small",{className:"text-muted",children:["Max Score: ",null===(Z=U.task)||void 0===Z?void 0:Z.maxScore," pts"]})]})]})})}),(0,a.jsxs)("div",{className:"row g-3 mb-3",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(f.Z,{size:16,className:"text-primary"}),"Submitted At:"]}),(0,a.jsx)("p",{className:"mb-0",children:new Date(U.submittedAt).toLocaleString("en-IN")})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Status:"}),(0,a.jsx)("div",{className:"mt-1",children:getStatusBadge(U.status)})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Attempts:"}),(0,a.jsx)("p",{className:"mb-0",children:U.attempts})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("strong",{children:"Late Submission:"}),(0,a.jsx)("p",{className:"mb-0",children:1===U.isLate?(0,a.jsx)("span",{className:"badge bg-danger",children:"Yes"}):(0,a.jsx)("span",{className:"badge bg-success",children:"No"})})]})]}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(w.Z,{size:16,className:"text-primary"}),"Submission Content:"]}),(0,a.jsx)("div",{className:"p-3 bg-light rounded border",children:U.content?(0,a.jsx)("p",{className:"mb-0",style:{whiteSpace:"pre-wrap"},children:U.content}):(0,a.jsx)("em",{className:"text-muted",children:"No content provided"})})]}),U.attachments&&U.attachments.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(v.Z,{size:16,className:"text-primary"}),"Attached Files (",U.attachments.length,"):"]}),(0,a.jsx)("div",{className:"list-group",children:U.attachments.map((e,s)=>(0,a.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[getFileIcon(e.mimetype),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fw-semibold",children:e.originalName}),(0,a.jsx)("small",{className:"text-muted",children:formatFileSize(e.size)})]})]}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsxs)("a",{href:"".concat(c.CT).concat(e.url),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:[(0,a.jsx)(m.Z,{size:14,className:"me-1"})," View"]}),(0,a.jsxs)("a",{href:"".concat(c.CT).concat(e.url),download:e.originalName,className:"btn btn-sm btn-outline-success",children:[(0,a.jsx)(k.Z,{size:14,className:"me-1"})," Download"]})]})]},s))})]}),null!==U.grade&&void 0!==U.grade&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{size:16,className:"text-success"}),"Grade:"]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)("span",{className:"fs-3 fw-bold text-success",children:U.grade}),(0,a.jsxs)("span",{className:"text-muted",children:["/ ",null===(C=U.task)||void 0===C?void 0:C.maxScore]}),(0,a.jsxs)("span",{className:"badge bg-success",children:[(U.grade/((null===(A=U.task)||void 0===A?void 0:A.maxScore)||100)*100).toFixed(1),"%"]})]})]})]}),U.feedback&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(w.Z,{size:16,className:"text-info"}),"Teacher Feedback:"]}),(0,a.jsx)("div",{className:"p-3 bg-info bg-opacity-10 rounded border border-info",children:(0,a.jsx)("p",{className:"mb-0",style:{whiteSpace:"pre-wrap"},children:U.feedback})})]}),U.teacherNotes&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("strong",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,a.jsx)(o.Z,{size:16,className:"text-warning"}),"Private Notes:"]}),(0,a.jsx)("div",{className:"p-3 bg-warning bg-opacity-10 rounded border border-warning",children:(0,a.jsx)("p",{className:"mb-0",style:{whiteSpace:"pre-wrap"},children:U.teacherNotes})})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>_(!1),children:"Close"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-success",onClick:()=>{_(!1),handleStartReview(U)},children:[(0,a.jsx)(w.Z,{size:16,className:"me-2"}),"Review & Grade"]})]})]})})}),J&&U&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>Y(!1),children:(0,a.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"modal-content border-0 shadow-lg",children:[(0,a.jsxs)("div",{className:"modal-header bg-gradient",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:[(0,a.jsxs)("h5",{className:"modal-title text-white fw-bold d-flex align-items-center gap-2",children:[(0,a.jsx)(u.Z,{size:24}),"Review & Grade Submission"]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Y(!1)})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("div",{className:"card border-0 bg-light mb-3",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("small",{className:"text-muted",children:"Student"}),(0,a.jsxs)("p",{className:"mb-0 fw-semibold",children:[null===(R=U.student)||void 0===R?void 0:R.firstName," ",null===(T=U.student)||void 0===T?void 0:T.lastName]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("small",{className:"text-muted",children:"Assignment"}),(0,a.jsx)("p",{className:"mb-0 fw-semibold",children:null===(F=U.task)||void 0===F?void 0:F.title})]})]})})}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(y.Z,{size:18,className:"text-warning"}),"Grade (out of ",null===(E=U.task)||void 0===E?void 0:E.maxScore,") ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"number",className:"form-control form-control-lg",min:"0",max:null===(L=U.task)||void 0===L?void 0:L.maxScore,step:"0.5",value:$,onChange:e=>K(e.target.value),placeholder:"Enter grade"}),$&&(0,a.jsxs)("small",{className:"text-muted mt-1",children:["Percentage: ",(parseFloat($)/((null===(P=U.task)||void 0===P?void 0:P.maxScore)||100)*100).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Status"}),(0,a.jsxs)("select",{className:"form-select",value:es,onChange:e=>et(e.target.value),children:[(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"resubmit",children:"Resubmit Required"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(w.Z,{size:18,className:"text-info"}),"Feedback for Student"]}),(0,a.jsx)("textarea",{className:"form-control",rows:5,value:W,onChange:e=>Q(e.target.value),placeholder:"Provide detailed feedback to help the student improve..."}),(0,a.jsx)("small",{className:"text-muted",children:"This will be visible to the student"})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center gap-2",children:[(0,a.jsx)(o.Z,{size:18,className:"text-warning"}),"Private Notes (Optional)"]}),(0,a.jsx)("textarea",{className:"form-control",rows:3,value:X,onChange:e=>ee(e.target.value),placeholder:"Add private notes for your reference (not visible to student)..."}),(0,a.jsx)("small",{className:"text-muted",children:"Only visible to teachers"})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>Y(!1),children:"Cancel"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-success btn-lg",onClick:handleSubmitReview,children:[(0,a.jsx)(S.Z,{size:18,className:"me-2"}),"Submit Review"]})]})]})})})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:i,headers:l,...n}=s,r="".concat(a).concat(e);if(i){let e=new URLSearchParams(Object.entries(i).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(r+="?".concat(e))}let c={"Content-Type":"application/json",...l};t&&(c.Authorization="Bearer ".concat(t));try{let e=await fetch(r,{...n,headers:c}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},4033:function(e,s,t){e.exports=t(94)}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=6237)}),_N_E=e.O()}]);