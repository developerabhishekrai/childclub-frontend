(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4686],{2898:function(e,a,r){"use strict";r.d(a,{Z:function(){return createLucideIcon}});var t=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,a)=>{let r=(0,t.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:c,...i},d)=>(0,t.createElement)("svg",{ref:d,...s,width:l,height:l,stroke:r,strokeWidth:o?24*Number(n)/Number(l):n,className:`lucide lucide-${toKebabCase(e)}`,...i},[...a.map(([e,a])=>(0,t.createElement)(e,a)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${e}`,r}},3067:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7810:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6142:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6245:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7972:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5750:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(2898);let s=(0,t.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},506:function(e,a,r){Promise.resolve().then(r.bind(r,3880))},3880:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return CreateStudentPage}});var t=r(7437),s=r(2265),l=r(4033),n=r(3067),o=r(7972),c=r(6142),i=r(5750),d=r(7810),m=r(6245),u=r(1396),h=r.n(u),p=r(6820),f=r.n(p);r(8117);var g=r(6454);function CreateStudentPage(){let e=(0,l.useRouter)(),[a,r]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null),[x,b]=(0,s.useState)({firstName:"",lastName:"",email:"",mobile:"",password:"",dateOfBirth:"",gender:"",bloodGroup:"",address:"",city:"",state:"",country:"India",postalCode:"",parentName:"",parentPhone:"",parentEmail:"",emergencyContact:"",previousSchool:"",enrollNumber:""}),handleInputChange=e=>{let{name:a,value:r}=e.target;b(e=>({...e,[a]:r}))};(0,s.useEffect)(()=>{let fetchTeacherData=async()=>{try{let a=localStorage.getItem("token"),r=localStorage.getItem("userId");if(!a||!r){e.push("/teacher/login");return}let t=await fetch("".concat(g.CT,"/teachers/").concat(r),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teacher data");let s=await t.json();p(s)}catch(e){console.error("Error fetching teacher data:",e),f().fire("Error","Failed to load teacher data","error")}};fetchTeacherData()},[e]);let validateForm=()=>u?x.firstName.trim()?x.lastName.trim()?x.email.trim()?!x.password||x.password.length<6?(f().fire("Error","Password must be at least 6 characters","error"),!1):!!x.enrollNumber.trim()||(f().fire("Error","Enrollment number is required","error"),!1):(f().fire("Error","Email is required","error"),!1):(f().fire("Error","Last name is required","error"),!1):(f().fire("Error","First name is required","error"),!1):(f().fire("Error","Please wait for teacher data to load","error"),!1),handleSubmit=async a=>{if(a.preventDefault(),validateForm()){r(!0);try{let a=localStorage.getItem("token"),r=localStorage.getItem("userId");if(!a||!r)throw Error("Authentication required");if(!u)throw Error("Teacher data not loaded");if(!u.schoolId)throw Error("School information not found");if(!u.classId)throw Error("You must be assigned to a class to add students");let t={firstName:x.firstName,lastName:x.lastName,email:x.email,mobile:x.mobile||void 0,password:x.password,dateOfBirth:x.dateOfBirth||void 0,gender:x.gender||void 0,bloodGroup:x.bloodGroup||void 0,address:x.address||void 0,city:x.city||void 0,state:x.state||void 0,country:x.country,postalCode:x.postalCode||void 0,parentName:x.parentName||void 0,parentPhone:x.parentPhone||void 0,parentEmail:x.parentEmail||void 0,emergencyContact:x.emergencyContact||void 0,previousSchool:x.previousSchool||void 0,enrollNumber:x.enrollNumber,schoolId:parseInt(u.schoolId),classId:u.classId};console.log("Creating student:",t);let s=await fetch("".concat(g.CT,"/students"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to create student")}let l=await s.json();console.log("Student created:",l),await f().fire({icon:"success",title:"Success!",text:"Student added successfully",confirmButtonText:"OK"}),e.push("/teacher/students")}catch(e){console.error("Error creating student:",e),f().fire({icon:"error",title:"Error",text:e.message||"Failed to create student. Please try again."})}finally{r(!1)}}};return(0,t.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-bottom",children:(0,t.jsx)("div",{className:"container-fluid py-3",children:(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,t.jsx)(h(),{href:"/teacher/students",className:"btn btn-outline-secondary",children:(0,t.jsx)(n.Z,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"h3 mb-0 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fas fa-user-plus me-2 text-primary"}),"Add New Student"]}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Fill in the student details below"})]})]})})}),(0,t.jsx)("div",{className:"container-fluid py-4",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsx)("div",{className:"col-lg-10 col-xl-8",children:(0,t.jsx)("form",{onSubmit:handleSubmit,children:(0,t.jsx)("div",{className:"card border-0 shadow",children:(0,t.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(o.Z,{size:24,className:"text-primary"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Personal Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:x.firstName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter first name",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:x.lastName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter last name",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Email Address ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"email",name:"email",value:x.email,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter email address",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Password ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"password",name:"password",value:x.password,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter password (min 6 characters)",required:!0,minLength:6})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Mobile Number"}),(0,t.jsx)("input",{type:"tel",name:"mobile",value:x.mobile,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter mobile number"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Enrollment Number ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"enrollNumber",value:x.enrollNumber,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter enrollment number",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("label",{className:"form-label fw-semibold",children:["Assigned Class ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:(null==u?void 0:u.className)||"Loading...",className:"form-control form-control-lg",disabled:!0}),(0,t.jsx)("small",{className:"text-muted",children:"Students will be assigned to your assigned class"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",name:"dateOfBirth",value:x.dateOfBirth,onChange:handleInputChange,className:"form-control form-control-lg"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Gender"}),(0,t.jsxs)("select",{name:"gender",value:x.gender,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Gender"}),["Male","Female","Other"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Blood Group"}),(0,t.jsxs)("select",{name:"bloodGroup",value:x.bloodGroup,onChange:handleInputChange,className:"form-select form-select-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Blood Group"}),["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(c.Z,{size:24,className:"text-info"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Address Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Address"}),(0,t.jsx)("textarea",{name:"address",value:x.address,onChange:handleInputChange,className:"form-control form-control-lg",rows:3,placeholder:"Enter complete address"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:x.city,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter city"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"State"}),(0,t.jsx)("input",{type:"text",name:"state",value:x.state,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter state"})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Country"}),(0,t.jsx)("input",{type:"text",name:"country",value:x.country,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter country"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Postal Code"}),(0,t.jsx)("input",{type:"text",name:"postalCode",value:x.postalCode,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter postal code"})]})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(i.Z,{size:24,className:"text-success"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Parent/Guardian Information"})]}),(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Parent Name"}),(0,t.jsx)("input",{type:"text",name:"parentName",value:x.parentName,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent/guardian name"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Parent Phone"}),(0,t.jsx)("input",{type:"tel",name:"parentPhone",value:x.parentPhone,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent phone number"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Parent Email"}),(0,t.jsx)("input",{type:"email",name:"parentEmail",value:x.parentEmail,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter parent email"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Emergency Contact"}),(0,t.jsx)("input",{type:"tel",name:"emergencyContact",value:x.emergencyContact,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter emergency contact number"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded-circle",children:(0,t.jsx)(d.Z,{size:24,className:"text-warning"})}),(0,t.jsx)("h3",{className:"mb-0 fw-bold text-dark",children:"Additional Information"})]}),(0,t.jsx)("div",{className:"row g-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{className:"form-label fw-semibold",children:"Previous School"}),(0,t.jsx)("input",{type:"text",name:"previousSchool",value:x.previousSchool,onChange:handleInputChange,className:"form-control form-control-lg",placeholder:"Enter previous school name"})]})})]}),(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-end pt-4 border-top",children:[(0,t.jsxs)(h(),{href:"/teacher/students",className:"btn btn-secondary btn-lg px-5",children:[(0,t.jsx)("i",{className:"fas fa-times me-2"}),"Cancel"]}),(0,t.jsx)("button",{type:"submit",disabled:a,className:"btn btn-primary btn-lg px-5",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{size:18,className:"me-2"}),"Add Student"]})})]})]})})})})})})]})}},6454:function(e,a,r){"use strict";r.d(a,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,a,r){super(a),this.status=e,this.message=a,this.data=r,this.name="ApiError"}};async function apiRequest(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,params:s,headers:l,...n}=a,o="".concat(t).concat(e);if(s){let e=new URLSearchParams(Object.entries(s).reduce((e,a)=>{let[r,t]=a;return null!=t&&(e[r]=String(t)),e},{})).toString();e&&(o+="?".concat(e))}let c={"Content-Type":"application/json",...l};r&&(c.Authorization="Bearer ".concat(r));try{let e=await fetch(o,{...n,headers:c}),a=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,a.message||"Request failed with status ".concat(e.status),a);return a}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,a){return apiRequest(e,{...a,method:"GET"})}async function apiPost(e,a,r){return apiRequest(e,{...r,method:"POST",body:a?JSON.stringify(a):void 0})}async function apiPut(e,a,r){return apiRequest(e,{...r,method:"PUT",body:a?JSON.stringify(a):void 0})}async function apiPatch(e,a,r){return apiRequest(e,{...r,method:"PATCH",body:a?JSON.stringify(a):void 0})}async function apiDelete(e,a){return apiRequest(e,{...a,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){},4033:function(e,a,r){e.exports=r(94)}},function(e){e.O(0,[9461,6685,1176,2971,2472,1744],function(){return e(e.s=506)}),_N_E=e.O()}]);