(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2497],{7017:function(e,s,a){Promise.resolve().then(a.bind(a,7481))},7481:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return TeacherDashboard}});var t=a(7437),d=a(9738),c=a.n(d),l=a(2265),i=a(4033);a(8117);var r=a(6454);function TeacherDashboard(){let e=(0,i.useRouter)(),[s,a]=(0,l.useState)("Teacher"),[d,b]=(0,l.useState)(""),[n,o]=(0,l.useState)(!0),[m,x]=(0,l.useState)(new Date),[j,h]=(0,l.useState)({totalClasses:0,totalStudents:0,pendingSubmissions:0,todayAttendance:0,activeAssignments:0,averageScore:0}),[u,g]=(0,l.useState)([]),[N,f]=(0,l.useState)([]),[p,v]=(0,l.useState)([]),[y,w]=(0,l.useState)([]),[S,k]=(0,l.useState)(null);(0,l.useEffect)(()=>{fetchTeacherInfo(),fetchDashboardData();let e=setInterval(()=>x(new Date),6e4);return()=>clearInterval(e)},[]);let fetchTeacherInfo=async()=>{try{let e=localStorage.getItem("userName"),s=localStorage.getItem("schoolName");if(e&&s){a(e),b(s);return}let t=localStorage.getItem("userId"),d=localStorage.getItem("token");if(t&&d){let e=await fetch("".concat(r.CT,"/teachers/").concat(t),{headers:{Authorization:"Bearer ".concat(d)}});if(e.ok){let s=await e.json(),t="".concat(s.firstName," ").concat(s.lastName);a(t),b(s.schoolName||""),localStorage.setItem("userName",t),localStorage.setItem("schoolName",s.schoolName||"")}}}catch(e){console.error("Error fetching teacher info:",e),a("Teacher"),b("")}},fetchDashboardData=async()=>{try{o(!0);let s=localStorage.getItem("token");if(!s){console.error("No token found"),o(!1);return}let a=await fetch("".concat(r.CT,"/teachers/my-classes"),{headers:{Authorization:"Bearer ".concat(s)}}),t=[];a.ok&&(t=await a.json(),console.log("Teacher classes:",t),w(t));let d=await fetch("".concat(r.CT,"/teachers/my/students"),{headers:{Authorization:"Bearer ".concat(s)}}),c=0,l=0,i=0,b=new Date().toISOString().split("T")[0];if(d.ok){var e;let a=await d.json();if(c=(null===(e=a.students)||void 0===e?void 0:e.length)||0,console.log("My students count:",c),k(a),a.students&&a.students.length>0){let e=new Set;a.students.forEach(s=>{s.currentClassId&&e.add(s.currentClassId)}),i=e.size,console.log("Unique classes from students:",i)}if(t.length>0){let e=t.map(async e=>{try{let a=await fetch("".concat(r.CT,"/attendance/class/").concat(e.classId,"?date=").concat(b),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){let s=await a.json();console.log("Attendance for class ".concat(e.classId,":"),s);let t=s.filter(e=>"present"===e.status||"late"===e.status).length;return t}return 0}catch(s){return console.error("Error fetching attendance for class ".concat(e.classId,":"),s),0}}),a=await Promise.all(e);l=a.reduce((e,s)=>e+s,0),console.log("Today's attendance count:",l)}}let n=await fetch("".concat(r.CT,"/dashboard/stats"),{headers:{Authorization:"Bearer ".concat(s)}});if(n.ok){let e=await n.json();console.log("Dashboard stats:",e),h({totalClasses:Math.max(t.length,i),totalStudents:c,pendingSubmissions:e.pendingTasks||0,todayAttendance:l,activeAssignments:e.pendingTasks||0,averageScore:e.averageScore||0})}else console.error("Failed to fetch dashboard stats"),h({totalClasses:Math.max(t.length,i),totalStudents:c,pendingSubmissions:0,todayAttendance:l,activeAssignments:0,averageScore:0});let m=await fetch("".concat(r.CT,"/calendar/upcoming?limit=5"),{headers:{Authorization:"Bearer ".concat(s)}});if(m.ok){let e=await m.json();console.log("Calendar events:",e),v(e||[])}else console.error("Failed to fetch calendar events");let x=await fetch("".concat(r.CT,"/dashboard/activities"),{headers:{Authorization:"Bearer ".concat(s)}});if(x.ok){let e=await x.json();f(e.slice(0,3).map(e=>({id:e.id,type:e.type,title:e.message,description:e.details,time:new Date(e.timestamp).toLocaleString("en-IN",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})})))}g([{id:1,subject:"Mathematics",className:"Class 10-A",time:"09:00 AM",room:"Room 101",studentsCount:35},{id:2,subject:"Physics",className:"Class 9-B",time:"11:00 AM",room:"Lab 201",studentsCount:32},{id:3,subject:"Mathematics",className:"Class 10-C",time:"02:00 PM",room:"Room 103",studentsCount:30}])}catch(e){console.error("Error fetching dashboard data:",e)}finally{o(!1)}};return n?(0,t.jsx)("div",{className:"container-fluid vh-100 d-flex justify-content-center align-items-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,t.jsx)("h4",{className:"text-white mt-3",children:"Loading Dashboard..."})]})}):(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},className:"jsx-884b463b4b98302d",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d container-fluid p-4",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d row mb-4",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-884b463b4b98302d card shadow-lg border-0",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white p-4",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsxs)("h1",{className:"jsx-884b463b4b98302d display-5 fw-bold mb-2",children:["Welcome back, ",s,"! \uD83D\uDC4B"]}),d&&(0,t.jsxs)("p",{className:"jsx-884b463b4b98302d fs-5 mb-2",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-building me-2"}),d]}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d fs-6 mb-1",children:m.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d mb-0",children:m.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsxs)("button",{className:"jsx-884b463b4b98302d btn btn-light btn-lg rounded-circle position-relative",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-bell-fill"}),(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:["3",(0,t.jsx)("span",{className:"jsx-884b463b4b98302d visually-hidden",children:"unread notifications"})]})]})})]})})})})}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d row g-4 mb-4",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"My Classes"}),(0,t.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:j.totalClasses}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Active Classes"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-book-fill"})})]})})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Total Students"}),(0,t.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:j.totalStudents}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Across all classes"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-people-fill"})})]})})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #ee0979 0%, #ff6a00 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Pending Reviews"}),(0,t.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:j.pendingSubmissions}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Need grading"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-clipboard-check-fill"})})]})})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #7F7FD5 0%, #91EAE4 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Today's Attendance"}),(0,t.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:j.todayAttendance}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Students present"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-person-check-fill"})})]})})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Active Assignments"}),(0,t.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:j.activeAssignments}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Currently active"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-file-text-fill"})})]})})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Average Score"}),(0,t.jsxs)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:[j.averageScore,"%"]}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Class performance"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,t.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-graph-up-arrow"})})]})})})})]}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d row mb-4",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12",children:(0,t.jsx)("h3",{className:"jsx-884b463b4b98302d mb-3 fw-bold",children:"âš¡ Quick Actions"})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/teacher/attendance"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-primary bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,t.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-person-check-fill text-primary"})}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Mark Attendance"})]})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/teacher/tasks"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-success bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,t.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-plus-circle-fill text-success"})}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"New Assignment"})]})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/teacher/submissions"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-warning bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,t.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-clipboard-check text-warning"})}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Review Work"})]})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/teacher/students"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-info bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,t.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-people-fill text-info"})}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"My Students"})]})})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/teacher/reports"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-secondary bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,t.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-bar-chart-fill text-secondary"})}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Reports"})]})})})]}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d row g-4",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-8",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 d-flex justify-content-between align-items-center py-3",children:[(0,t.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCC5 Today's Schedule"}),(0,t.jsx)("button",{className:"jsx-884b463b4b98302d btn btn-sm btn-primary",children:"View All"})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:u.map(e=>(0,t.jsx)("div",{className:"jsx-884b463b4b98302d border-start border-primary border-4 bg-light rounded p-3 mb-3",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d row align-items-center",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d col-md-8",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d fw-bold mb-1",children:e.subject}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d text-muted mb-2",children:e.className}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex gap-3 small text-muted",children:[(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-clock"})," ",e.time]}),(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-geo-alt"})," ",e.room]}),(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-people"})," ",e.studentsCount," students"]})]})]}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-md-4 text-md-end mt-2 mt-md-0",children:(0,t.jsx)("button",{className:"jsx-884b463b4b98302d btn btn-primary",children:"Start Class"})})]})},e.id))})]})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-4",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow mb-4",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 py-3",children:(0,t.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCC5 Upcoming Events"})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:0===p.length?(0,t.jsx)("p",{className:"jsx-884b463b4b98302d text-muted text-center small",children:"No upcoming events"}):p.map(e=>(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-start mb-3 p-2 rounded hover-bg-light",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d rounded-circle p-2 me-3 bg-info bg-opacity-10",children:(0,t.jsx)("i",{style:{fontSize:"1.5rem"},className:"jsx-884b463b4b98302d bi bi-calendar-event-fill text-info"})}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d flex-grow-1",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d mb-1 small fw-bold",children:e.title}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d mb-1 small text-muted",children:e.description||"School Event"}),(0,t.jsxs)("div",{style:{fontSize:"0.75rem",color:"#999"},className:"jsx-884b463b4b98302d",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("strong",{className:"jsx-884b463b4b98302d",children:"Start:"})," ",new Date(e.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.endDate&&(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("strong",{className:"jsx-884b463b4b98302d",children:"End:"})," ",new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})]},e.id))})]})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-4",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 py-3",children:(0,t.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCCA Recent Activities"})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:N.map(e=>(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-start mb-3 p-2 rounded hover-bg-light",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d "+"rounded-circle p-2 me-3 ".concat("submission"===e.type?"bg-primary bg-opacity-10":"attendance"===e.type?"bg-success bg-opacity-10":"grade"===e.type?"bg-warning bg-opacity-10":"bg-info bg-opacity-10"),children:(0,t.jsx)("i",{style:{fontSize:"1.5rem"},className:"jsx-884b463b4b98302d "+"bi ".concat("submission"===e.type?"bi-file-earmark-text-fill text-primary":"attendance"===e.type?"bi-check-circle-fill text-success":"grade"===e.type?"bi-award-fill text-warning":"bi-bell-fill text-info")})}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d flex-grow-1",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d mb-1 small fw-bold",children:e.title}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d mb-1 small text-muted",children:e.description}),(0,t.jsx)("p",{style:{fontSize:"0.75rem",color:"#999"},className:"jsx-884b463b4b98302d mb-0",children:e.time})]})]},e.id))})]})})]}),y.length>0&&(0,t.jsx)("div",{className:"jsx-884b463b4b98302d row g-4 mb-4",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 py-3",children:[(0,t.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCDA My Classes Overview"}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d text-muted mb-0 small",children:"Classes assigned to you with student counts"})]}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d row g-3",children:y.map((s,a)=>{var d;let c=(null==S?void 0:null===(d=S.students)||void 0===d?void 0:d.filter(e=>e.currentClassId===s.id))||[];return(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,t.jsx)("div",{className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-start justify-content-between mb-3",children:[(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-center",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d bg-primary bg-opacity-10 rounded-circle p-3 me-3",children:(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-book-fill text-primary fs-4"})}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d card-title mb-1 fw-bold",children:s.name||"Class ".concat(s.grade,"-").concat(s.section)}),(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d badge bg-secondary-subtle text-secondary",children:[s.grade," - ",s.section]})]})]}),s.isPrimary&&(0,t.jsxs)("span",{className:"jsx-884b463b4b98302d badge bg-warning text-dark",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-star-fill me-1"}),"Primary"]})]}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d row g-2 mb-3",children:[(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d bg-light rounded p-2 text-center",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-people-fill text-info mb-1"}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d fw-bold",children:c.length}),(0,t.jsx)("small",{className:"jsx-884b463b4b98302d text-muted",children:"Students"})]})}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d col-6",children:(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d bg-light rounded p-2 text-center",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-calendar-check text-success mb-1"}),(0,t.jsx)("div",{className:"jsx-884b463b4b98302d fw-bold",children:"Active"}),(0,t.jsx)("small",{className:"jsx-884b463b4b98302d text-muted",children:"Status"})]})})]}),(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d d-grid gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e.push("/teacher/students?classId=".concat(s.id)),className:"jsx-884b463b4b98302d btn btn-outline-primary btn-sm",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-people me-1"}),"View Students"]}),(0,t.jsxs)("button",{onClick:()=>e.push("/teacher/attendance?classId=".concat(s.id)),className:"jsx-884b463b4b98302d btn btn-outline-success btn-sm",children:[(0,t.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-calendar-check me-1"}),"Mark Attendance"]})]})]})})},s.id||a)})}),0===y.length&&(0,t.jsxs)("div",{className:"jsx-884b463b4b98302d text-center py-4",children:[(0,t.jsx)("i",{style:{fontSize:"3rem"},className:"jsx-884b463b4b98302d bi bi-book text-muted"}),(0,t.jsx)("h6",{className:"jsx-884b463b4b98302d text-muted mt-3",children:"No Classes Assigned"}),(0,t.jsx)("p",{className:"jsx-884b463b4b98302d text-muted small",children:"Contact your school administrator to get classes assigned."})]})]})]})})})]}),(0,t.jsx)(c(),{id:"884b463b4b98302d",children:".hover-bg-light.jsx-884b463b4b98302d:hover{background-color:#f8f9fa;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.card.jsx-884b463b4b98302d{-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease}.card.jsx-884b463b4b98302d:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}"})]})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return t},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let t="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:d,headers:c,...l}=s,i="".concat(t).concat(e);if(d){let e=new URLSearchParams(Object.entries(d).reduce((e,s)=>{let[a,t]=s;return null!=t&&(e[a]=String(t)),e},{})).toString();e&&(i+="?".concat(e))}let r={"Content-Type":"application/json",...c};a&&(r.Authorization="Bearer ".concat(a));try{let e=await fetch(i,{...l,headers:r}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){},622:function(e,s,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=a(2265),d=Symbol.for("react.element"),c=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,a){var t,c={},b=null,n=null;for(t in void 0!==a&&(b=""+a),void 0!==s.key&&(b=""+s.key),void 0!==s.ref&&(n=s.ref),s)l.call(s,t)&&!r.hasOwnProperty(t)&&(c[t]=s[t]);if(e&&e.defaultProps)for(t in s=e.defaultProps)void 0===c[t]&&(c[t]=s[t]);return{$$typeof:d,type:e,key:b,ref:n,props:c,_owner:i.current}}s.Fragment=c,s.jsx=q,s.jsxs=q},7437:function(e,s,a){"use strict";e.exports=a(622)},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[6685,9738,2971,2472,1744],function(){return e(e.s=7017)}),_N_E=e.O()}]);