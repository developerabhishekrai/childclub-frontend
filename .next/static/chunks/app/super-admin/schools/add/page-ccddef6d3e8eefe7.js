(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5081],{8129:function(e,s,a){Promise.resolve().then(a.bind(a,4908))},4908:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return SuperAdminSchoolAdd}});var l=a(7437),t=a(2265),o=a(4033),n=a(1396),r=a.n(n),i=a(6454);function SuperAdminSchoolAdd(){let e=(0,o.useRouter)(),[s,a]=(0,t.useState)(!1),[n,c]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[h,u]=(0,t.useState)({name:"",description:"",type:"primary",address:"",city:"",state:"",country:"India",postalCode:"",phone:"",email:"",website:"",establishedYear:"",totalStudents:"",totalTeachers:"",totalClasses:"",facilities:"",achievements:"",vision:"",mission:""}),handleChange=e=>{let{name:s,value:a}=e.target;u(e=>({...e,[s]:a}))},validateForm=()=>h.name.trim()?h.address.trim()?h.city.trim()?h.state.trim()?!!h.postalCode.trim()||(c("Postal code is required"),!1):(c("State is required"),!1):(c("City is required"),!1):(c("Address is required"),!1):(c("School name is required"),!1),handleSubmit=async s=>{if(s.preventDefault(),c(""),m(""),validateForm()){a(!0);try{let s=localStorage.getItem("token");if(!s){c("Please login first");return}let a={name:h.name,description:h.description||void 0,type:h.type,address:h.address,city:h.city,state:h.state,country:h.country,postalCode:h.postalCode,phone:h.phone||void 0,email:h.email||void 0,website:h.website||void 0,establishedYear:h.establishedYear?parseInt(h.establishedYear):void 0,totalStudents:h.totalStudents?parseInt(h.totalStudents):void 0,totalTeachers:h.totalTeachers?parseInt(h.totalTeachers):void 0,totalClasses:h.totalClasses?parseInt(h.totalClasses):void 0,facilities:h.facilities||void 0,achievements:h.achievements||void 0,vision:h.vision||void 0,mission:h.mission||void 0};console.log("Creating school with data:",a);let l=await fetch("".concat(i.CT,"/schools"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(a)});if(console.log("School API Response Status:",l.status),!l.ok){let e=await l.json();console.error("School creation error:",e),c("Failed to create school: ".concat(e.message||"Unknown error"));return}let t=await l.json();console.log("School created successfully:",t),m("✅ School created successfully!"),setTimeout(()=>{e.push("/super-admin/schools/list")},2e3)}catch(e){console.error("Error creating school:",e),c("Network error. Please try again.")}finally{a(!1)}}};return(0,l.jsx)("div",{className:"min-vh-100 bg-light py-4",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row justify-content-center",children:(0,l.jsxs)("div",{className:"col-lg-10",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[(0,l.jsx)(r(),{href:"/super-admin/schools/list",className:"btn btn-outline-secondary me-3",children:"← Back to Schools"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"h2 fw-bold text-dark mb-0",children:"Add New School"}),(0,l.jsx)("p",{className:"text-muted mb-0",children:"Create a new school in the system"})]})]}),(0,l.jsx)("div",{className:"card shadow-sm border-0",children:(0,l.jsxs)("div",{className:"card-body p-4",children:[n&&(0,l.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[n,(0,l.jsx)("button",{type:"button",className:"btn-close",onClick:()=>c("")})]}),d&&(0,l.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[d,(0,l.jsx)("button",{type:"button",className:"btn-close",onClick:()=>m("")})]}),(0,l.jsxs)("form",{onSubmit:handleSubmit,children:[(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h5",{className:"text-primary mb-3",children:"\uD83C\uDFEB Basic Information"})}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"name",className:"form-label fw-semibold",children:"School Name *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:h.name,onChange:handleChange,required:!0})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"type",className:"form-label fw-semibold",children:"School Type *"}),(0,l.jsxs)("select",{className:"form-select",id:"type",name:"type",value:h.type,onChange:handleChange,required:!0,children:[(0,l.jsx)("option",{value:"primary",children:"Primary School"}),(0,l.jsx)("option",{value:"secondary",children:"Secondary School"}),(0,l.jsx)("option",{value:"higher_secondary",children:"Higher Secondary School"}),(0,l.jsx)("option",{value:"international",children:"International School"}),(0,l.jsx)("option",{value:"special_needs",children:"Special Needs School"})]})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"description",className:"form-label fw-semibold",children:"Description"}),(0,l.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:3,value:h.description,onChange:handleChange,placeholder:"Brief description of the school..."})]})]}),(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h5",{className:"text-primary mb-3",children:"\uD83D\uDCCD Address Information"})}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"address",className:"form-label fw-semibold",children:"Full Address *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"address",name:"address",value:h.address,onChange:handleChange,required:!0})]}),(0,l.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,l.jsx)("label",{htmlFor:"city",className:"form-label fw-semibold",children:"City *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"city",name:"city",value:h.city,onChange:handleChange,required:!0})]}),(0,l.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,l.jsx)("label",{htmlFor:"state",className:"form-label fw-semibold",children:"State *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"state",name:"state",value:h.state,onChange:handleChange,required:!0})]}),(0,l.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,l.jsx)("label",{htmlFor:"postalCode",className:"form-label fw-semibold",children:"Postal Code *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"postalCode",name:"postalCode",value:h.postalCode,onChange:handleChange,required:!0})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"country",className:"form-label fw-semibold",children:"Country *"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"country",name:"country",value:h.country,onChange:handleChange,required:!0})]})]}),(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h5",{className:"text-primary mb-3",children:"\uD83D\uDCDE Contact Information"})}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"phone",className:"form-label fw-semibold",children:"Phone Number"}),(0,l.jsx)("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:h.phone,onChange:handleChange,placeholder:"+91 9876543210"})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"email",className:"form-label fw-semibold",children:"Email Address"}),(0,l.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:h.email,onChange:handleChange,placeholder:"info@school.com"})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"website",className:"form-label fw-semibold",children:"Website"}),(0,l.jsx)("input",{type:"url",className:"form-control",id:"website",name:"website",value:h.website,onChange:handleChange,placeholder:"https://www.school.com"})]})]}),(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h5",{className:"text-primary mb-3",children:"\uD83D\uDCCA School Statistics"})}),(0,l.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,l.jsx)("label",{htmlFor:"establishedYear",className:"form-label fw-semibold",children:"Established Year"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"establishedYear",name:"establishedYear",value:h.establishedYear,onChange:handleChange,min:"1800",max:new Date().getFullYear(),placeholder:"2020"})]}),(0,l.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,l.jsx)("label",{htmlFor:"totalStudents",className:"form-label fw-semibold",children:"Total Students"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"totalStudents",name:"totalStudents",value:h.totalStudents,onChange:handleChange,min:"0",placeholder:"500"})]}),(0,l.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,l.jsx)("label",{htmlFor:"totalTeachers",className:"form-label fw-semibold",children:"Total Teachers"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"totalTeachers",name:"totalTeachers",value:h.totalTeachers,onChange:handleChange,min:"0",placeholder:"30"})]}),(0,l.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,l.jsx)("label",{htmlFor:"totalClasses",className:"form-label fw-semibold",children:"Total Classes"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"totalClasses",name:"totalClasses",value:h.totalClasses,onChange:handleChange,min:"0",placeholder:"20"})]})]}),(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("h5",{className:"text-primary mb-3",children:"ℹ️ Additional Information"})}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"facilities",className:"form-label fw-semibold",children:"Facilities"}),(0,l.jsx)("textarea",{className:"form-control",id:"facilities",name:"facilities",rows:2,value:h.facilities,onChange:handleChange,placeholder:"Library, Playground, Computer Lab, etc."})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"achievements",className:"form-label fw-semibold",children:"Achievements"}),(0,l.jsx)("textarea",{className:"form-control",id:"achievements",name:"achievements",rows:2,value:h.achievements,onChange:handleChange,placeholder:"Best School Award 2023, etc."})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"vision",className:"form-label fw-semibold",children:"Vision Statement"}),(0,l.jsx)("textarea",{className:"form-control",id:"vision",name:"vision",rows:2,value:h.vision,onChange:handleChange,placeholder:"To foster a love for learning..."})]}),(0,l.jsxs)("div",{className:"col-12 mb-3",children:[(0,l.jsx)("label",{htmlFor:"mission",className:"form-label fw-semibold",children:"Mission Statement"}),(0,l.jsx)("textarea",{className:"form-control",id:"mission",name:"mission",rows:2,value:h.mission,onChange:handleChange,placeholder:"Empowering students for future challenges..."})]})]}),(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-12",children:(0,l.jsxs)("div",{className:"d-flex gap-3",children:[(0,l.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg px-5",disabled:s,children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Creating School..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"me-2",children:"\uD83C\uDFEB"}),"Create School"]})}),(0,l.jsx)(r(),{href:"/super-admin/schools/list",className:"btn btn-outline-secondary btn-lg px-4",children:"Cancel"})]})})})]})]})})]})})})})}},6454:function(e,s,a){"use strict";a.d(s,{CT:function(){return l},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let l="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,a){super(s),this.status=e,this.message=s,this.data=a,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:a,params:t,headers:o,...n}=s,r="".concat(l).concat(e);if(t){let e=new URLSearchParams(Object.entries(t).reduce((e,s)=>{let[a,l]=s;return null!=l&&(e[a]=String(l)),e},{})).toString();e&&(r+="?".concat(e))}let i={"Content-Type":"application/json",...o};a&&(i.Authorization="Bearer ".concat(a));try{let e=await fetch(r,{...n,headers:i}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,a){return apiRequest(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,a){return apiRequest(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,a){return apiRequest(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[1176,2971,2472,1744],function(){return e(e.s=8129)}),_N_E=e.O()}]);