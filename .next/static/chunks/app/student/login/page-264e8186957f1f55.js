(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3237],{2951:function(e,t,r){Promise.resolve().then(r.bind(r,9325))},9325:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return StudentLoginPage}});var o=r(7437),n=r(2265),s=r(4033);r(8117);var a=r(6454);function StudentLoginPage(){(0,s.useRouter)();let[e,t]=(0,n.useState)({email:"",password:""}),[r,l]=(0,n.useState)(!1),[i,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(!1),handleSubmit=async t=>{t.preventDefault(),c(""),d(!0);try{let t=await fetch("".concat(a.CT,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();console.log("Student Login Response:",r),t.ok?"student"===r.user.role?(localStorage.setItem("token",r.access_token),localStorage.setItem("userId",r.user.id.toString()),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("userName","".concat(r.user.firstName," ").concat(r.user.lastName)),localStorage.setItem("userRole",r.user.role),r.user.schoolId&&(localStorage.setItem("schoolId",r.user.schoolId.toString()),console.log("Stored schoolId:",r.user.schoolId)),console.log("Student login successful, userId:",r.user.id),setTimeout(()=>{window.location.href="/student/dashboard"},100)):c("This login is only for students. Please use the correct portal."):c(r.message||"Login failed")}catch(e){c("Network error. Please try again."),console.error("Login error:",e)}finally{d(!1)}},handleChange=r=>{t({...e,[r.target.name]:r.target.value})};return(0,o.jsx)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center py-5",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsxs)("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5",children:[(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("span",{style:{fontSize:"4rem"},children:"\uD83C\uDF93"})}),(0,o.jsx)("h2",{className:"text-white fw-bold mb-2",children:"Student Login"}),(0,o.jsx)("p",{className:"text-white-50",children:"Sign in to access your portal"})]}),(0,o.jsx)("div",{className:"card border-0 shadow-lg",children:(0,o.jsxs)("div",{className:"card-body p-4 p-md-5",children:[i&&(0,o.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[(0,o.jsx)("strong",{children:"Error:"})," ",i,(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>c(""),"aria-label":"Close"})]}),(0,o.jsxs)("form",{onSubmit:handleSubmit,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"email",className:"form-label fw-semibold text-dark",children:"\uD83D\uDCE7 Email Address"}),(0,o.jsx)("input",{type:"email",className:"form-control form-control-lg border-2",id:"email",name:"email",placeholder:"student@example.com",value:e.email,onChange:handleChange,required:!0,style:{borderRadius:"10px",transition:"all 0.3s ease"}})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"password",className:"form-label fw-semibold text-dark",children:"\uD83D\uDD12 Password"}),(0,o.jsxs)("div",{className:"input-group",children:[(0,o.jsx)("input",{type:r?"text":"password",className:"form-control form-control-lg border-2",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:handleChange,required:!0,style:{borderRadius:"10px 0 0 10px",transition:"all 0.3s ease"}}),(0,o.jsx)("button",{className:"btn btn-outline-secondary border-2",type:"button",onClick:()=>l(!r),style:{borderRadius:"0 10px 10px 0"},children:r?"\uD83D\uDE48":"\uD83D\uDC41️"})]})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-lg w-100 mb-3 text-white fw-bold",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",border:"none"},disabled:u,children:u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):"\uD83D\uDE80 Sign In to Portal"}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("a",{href:"#",className:"text-decoration-none text-muted small",children:"Forgot your password?"})})]})]})}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsx)("a",{href:"/",className:"text-decoration-none text-white",children:(0,o.jsx)("small",{children:"← Back to Home"})})})]})})})})}},6454:function(e,t,r){"use strict";r.d(t,{CT:function(){return o},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let o="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,r){super(t),this.status=e,this.message=t,this.data=r,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,params:n,headers:s,...a}=t,l="".concat(o).concat(e);if(n){let e=new URLSearchParams(Object.entries(n).reduce((e,t)=>{let[r,o]=t;return null!=o&&(e[r]=String(o)),e},{})).toString();e&&(l+="?".concat(e))}let i={"Content-Type":"application/json",...s};r&&(i.Authorization="Bearer ".concat(r));try{let e=await fetch(l,{...a,headers:i}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,r){return apiRequest(e,{...r,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,r){return apiRequest(e,{...r,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,r){return apiRequest(e,{...r,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=r(2265),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var o,s={},c=null,u=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:u,props:s,_owner:l.current}}t.Fragment=s,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[6685,2971,2472,1744],function(){return e(e.s=2951)}),_N_E=e.O()}]);