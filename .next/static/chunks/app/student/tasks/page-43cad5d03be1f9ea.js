(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3473],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,children:c,...d},o)=>(0,a.createElement)("svg",{ref:o,...i,width:n,height:n,stroke:t,strokeWidth:l?24*Number(r)/Number(n):r,className:`lucide lucide-${toKebabCase(e)}`,...d},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${e}`,t}},3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},8203:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2898);let i=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5763:function(e,s,t){Promise.resolve().then(t.bind(t,6137))},6137:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return StudentTasksPage}});var a=t(7437),i=t(2265),n=t(1396),r=t.n(n),l=t(3067),c=t(1827),d=t(9865),o=t(8203),m=t(6637),u=t(6141),h=t(3008),x=t(6820),b=t.n(x),g=t(6454);function StudentTasksPage(){let[e,s]=(0,i.useState)(""),[t,n]=(0,i.useState)("all"),[x,p]=(0,i.useState)([]),[j,f]=(0,i.useState)(!0),[N,y]=(0,i.useState)(null),[v,S]=(0,i.useState)(null),[w,k]=(0,i.useState)(!1),[C,I]=(0,i.useState)(!1),[A,T]=(0,i.useState)(""),[D,E]=(0,i.useState)([]),[z,Z]=(0,i.useState)(!1),[P,F]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")||"{}");y(e),fetchAssignments()},[]);let fetchAssignments=async()=>{try{let s=localStorage.getItem("token"),t=localStorage.getItem("userId"),a=localStorage.getItem("user");if(!t&&a)try{var e;let s=JSON.parse(a);(t=null===(e=s.id)||void 0===e?void 0:e.toString())&&localStorage.setItem("userId",t)}catch(e){console.error("Error parsing user:",e)}if(!t||!s){console.error("No user ID or token found"),f(!1);return}console.log("Fetching assignments for student userId:",t);let i=await fetch("".concat(g.CT,"/assignments/by-student/").concat(t),{headers:{Authorization:"Bearer ".concat(s)}});if(i.ok){let e=await i.json();console.log("Fetched assignments:",e);let a=await fetch("".concat(g.CT,"/submissions/student/").concat(t),{headers:{Authorization:"Bearer ".concat(s)}}),n=[];a.ok&&(n=await a.json(),console.log("Fetched submissions:",n));let r=e.map(e=>{let s=n.find(s=>s.taskId===e.id);return{...e,submissionStatus:(null==s?void 0:s.status)||"not_started",submissionId:null==s?void 0:s.id,grade:null==s?void 0:s.grade,feedback:null==s?void 0:s.feedback,creatorName:"Teacher/Admin"}});p(r)}}catch(e){console.error("Error fetching assignments:",e),b().fire("Error","Failed to fetch assignments","error")}finally{f(!1)}},R=x.filter(s=>{let a=s.title.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase()),i="all"===t||s.submissionStatus===t;return a&&i}),handleViewTask=e=>{S(e),k(!0)},handleStartSubmission=e=>{S(e),T(e.submissionId&&e.feedback||""),E([]),F(!!e.submissionId),I(!0)},handleFileUpload=async e=>{let s=e.target.files;if(s&&0!==s.length){Z(!0);try{let e=localStorage.getItem("token"),t=Array.from(s).map(async s=>{let t=new FormData;t.append("file",s);let a=await fetch("".concat(g.CT,"/uploads/submission"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});if(a.ok)return await a.json();throw Error("Upload failed")}),a=await Promise.all(t);E(e=>[...e,...a]),b().fire("Success","Files uploaded successfully!","success")}catch(e){console.error("Error uploading files:",e),b().fire("Error","Failed to upload files","error")}finally{Z(!1)}}},handleRemoveFile=e=>{E(s=>s.filter((s,t)=>t!==e))},handleUpdateStatus=async(e,s,t)=>{try{let i=localStorage.getItem("token"),n=localStorage.getItem("userId"),r=localStorage.getItem("user");if(!n&&r){var a;let e=JSON.parse(r);n=null===(a=e.id)||void 0===a?void 0:a.toString()}if(s){let e=await fetch("".concat(g.CT,"/submissions/").concat(s),{method:"PUT",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({status:t})});e.ok?(b().fire("Success","Status updated successfully","success"),fetchAssignments()):b().fire("Error","Failed to update status","error")}else{let s=await fetch("".concat(g.CT,"/submissions"),{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({taskId:e,studentId:parseInt(n||"0"),status:t,content:""})});s.ok?(b().fire("Success","Status updated successfully","success"),fetchAssignments()):b().fire("Error","Failed to update status","error")}}catch(e){console.error("Error updating status:",e),b().fire("Error","Failed to update status","error")}},handleSubmitAssignment=async()=>{if(!v||!A.trim()){b().fire("Error","Please enter your submission content","error");return}try{let s=localStorage.getItem("token"),t=localStorage.getItem("userId"),a=localStorage.getItem("user");if(!t&&a){var e;let s=JSON.parse(a);t=null===(e=s.id)||void 0===e?void 0:e.toString()}let i=await fetch("".concat(g.CT,"/submissions"),{method:P&&v.submissionId?"PUT":"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({...P&&v.submissionId?{id:v.submissionId}:{},taskId:v.id,studentId:parseInt(t||"0"),content:A,attachments:D,status:"submitted"})}).then(e=>P&&v.submissionId?fetch("".concat(g.CT,"/submissions/").concat(v.submissionId),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({content:A,attachments:D,status:"submitted"})}):e);if(i.ok)b().fire("Success","Assignment submitted successfully!","success"),I(!1),T(""),fetchAssignments();else{let e=await i.json().catch(()=>({}));console.error("Submission error:",e),b().fire("Error",e.message||"Failed to submit assignment","error")}}catch(e){console.error("Error submitting assignment:",e),b().fire("Error","Failed to submit assignment","error")}},getStatusBadge=e=>{let s={not_started:{class:"bg-secondary",label:"Not Started"},draft:{class:"bg-warning",label:"Draft"},submitted:{class:"bg-info",label:"Submitted"},reviewed:{class:"bg-primary",label:"Reviewed"},approved:{class:"bg-success",label:"Approved"},rejected:{class:"bg-danger",label:"Rejected"},resubmit:{class:"bg-warning",label:"Resubmit Required"}},t=s[e]||s.not_started;return(0,a.jsx)("span",{className:"badge ".concat(t.class),children:t.label})},getTypeBadge=e=>(0,a.jsx)("span",{className:"badge ".concat({assignment:"bg-primary",homework:"bg-success",project:"bg-info",quiz:"bg-warning",exam:"bg-danger"}[e.toLowerCase()]||"bg-secondary"),children:e}),getPriorityBadge=e=>(0,a.jsx)("span",{className:{low:"badge bg-secondary",medium:"badge bg-info",high:"badge bg-warning",urgent:"badge bg-danger"}[e.toLowerCase()]||"badge bg-secondary",children:e}),formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),getDaysUntilDue=e=>{let s=new Date,t=new Date(e),i=t.getTime()-s.getTime(),n=Math.ceil(i/864e5);return n<0?(0,a.jsxs)("span",{className:"text-danger fw-bold",children:["Overdue by ",Math.abs(n)," days"]}):0===n?(0,a.jsx)("span",{className:"text-warning fw-bold",children:"Due today"}):1===n?(0,a.jsx)("span",{className:"text-warning",children:"Due tomorrow"}):n<=3?(0,a.jsxs)("span",{className:"text-warning",children:["Due in ",n," days"]}):(0,a.jsxs)("span",{className:"text-muted",children:["Due in ",n," days"]})};return j?(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(r(),{href:"/student/dashboard",className:"btn btn-outline-secondary me-3",children:(0,a.jsx)(l.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"h3 mb-0",children:"My Assignments"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"View and submit your assignments"})]})]})}),(0,a.jsx)("div",{className:"card mb-4",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text",children:(0,a.jsx)(c.Z,{size:16})}),(0,a.jsx)("input",{type:"text",className:"form-control",placeholder:"Search assignments...",value:e,onChange:e=>s(e.target.value)})]})}),(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsxs)("select",{className:"form-select",value:t,onChange:e=>n(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"not_started",children:"Not Started"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"resubmit",children:"Resubmit Required"})]})})]})})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h5",{className:"mb-0",children:"My Assignments"}),(0,a.jsxs)("span",{className:"badge bg-primary",children:[R.length," assignments"]})]})}),(0,a.jsxs)("div",{className:"card-body p-0",children:[(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover mb-0",children:[(0,a.jsx)("thead",{className:"table-light",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Assignment Details"}),(0,a.jsx)("th",{children:"Type & Priority"}),(0,a.jsx)("th",{children:"Due Date"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Grade"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:R.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"d-flex align-items-start",children:[(0,a.jsx)("div",{className:"avatar-sm bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",children:(0,a.jsx)(d.Z,{size:20,className:"text-primary"})}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("div",{className:"fw-bold mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-muted mb-2 small",children:e.description}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"d-flex flex-wrap gap-1",children:e.tags.map((e,s)=>(0,a.jsx)("span",{className:"badge bg-light text-dark border small",children:e},s))})]})]})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{className:"mb-2",children:getTypeBadge(e.type)}),(0,a.jsx)("div",{children:getPriorityBadge(e.priority)})]}),(0,a.jsxs)("td",{children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)(o.Z,{size:14,className:"me-1"}),formatDate(e.dueDate)]}),(0,a.jsx)("div",{className:"mb-2",children:getDaysUntilDue(e.dueDate)}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("small",{className:"text-muted",children:["Max: ",e.maxScore," pts"]})})]}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{className:"mb-2",children:getStatusBadge(e.submissionStatus||"not_started")}),(0,a.jsxs)("div",{className:"btn-group btn-group-sm",role:"group",children:["not_started"===e.submissionStatus&&(0,a.jsx)("button",{className:"btn btn-outline-success btn-sm",onClick:()=>handleUpdateStatus(e.id,e.submissionId,"draft"),title:"Start Working",children:"Start"}),("draft"===e.submissionStatus||"not_started"===e.submissionStatus)&&(0,a.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>handleStartSubmission(e),title:"Submit Assignment",children:"Submit"}),"resubmit"===e.submissionStatus&&(0,a.jsx)("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>handleStartSubmission(e),title:"Resubmit Assignment",children:"Resubmit"})]})]}),(0,a.jsx)("td",{children:e.grade?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fw-bold",children:[e.grade," / ",e.maxScore]}),(0,a.jsxs)("small",{className:"text-muted",children:[(e.grade/e.maxScore*100).toFixed(1),"%"]})]}):(0,a.jsx)("span",{className:"text-muted",children:"Not graded"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("button",{className:"btn btn-sm btn-outline-primary",title:"View Details",onClick:()=>handleViewTask(e),children:[(0,a.jsx)(m.Z,{size:14,className:"me-1"}),"View"]})})]},e.id))})]})}),0===R.length&&(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("div",{className:"text-muted mb-3",children:(0,a.jsx)(d.Z,{size:48})}),(0,a.jsx)("h5",{children:"No assignments found"}),(0,a.jsx)("p",{className:"text-muted",children:"You don't have any assignments yet or try adjusting your filters."})]})]})]}),(0,a.jsxs)("div",{className:"row g-4 mt-4",children:[(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(d.Z,{size:24,className:"text-primary"})}),(0,a.jsx)("h4",{className:"mb-1",children:x.length}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Total Assignments"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-warning bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(u.Z,{size:24,className:"text-warning"})}),(0,a.jsx)("h4",{className:"mb-1",children:x.filter(e=>"not_started"===e.submissionStatus||"draft"===e.submissionStatus).length}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Pending"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-info bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(m.Z,{size:24,className:"text-info"})}),(0,a.jsx)("h4",{className:"mb-1",children:x.filter(e=>"submitted"===e.submissionStatus).length}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Submitted"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"card border-0 shadow-sm",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsx)("div",{className:"bg-success bg-opacity-10 rounded-circle p-3 mx-auto mb-3",style:{width:"60px",height:"60px"},children:(0,a.jsx)(h.Z,{size:24,className:"text-success"})}),(0,a.jsx)("h4",{className:"mb-1",children:x.filter(e=>"approved"===e.submissionStatus).length}),(0,a.jsx)("p",{className:"text-muted mb-0",children:"Completed"})]})})})]}),w&&v&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,a.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,a.jsxs)("h5",{className:"modal-title",children:[(0,a.jsx)(m.Z,{size:20,className:"me-2"}),"Assignment Details"]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),(0,a.jsx)("div",{className:"modal-body",children:(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("h4",{className:"text-primary",children:v.title}),(0,a.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[getTypeBadge(v.type),getPriorityBadge(v.priority),getStatusBadge(v.submissionStatus||"not_started")]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Description"}),(0,a.jsx)("p",{children:v.description})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Due Date"}),(0,a.jsxs)("p",{children:[(0,a.jsx)(o.Z,{size:16,className:"me-2"}),formatDate(v.dueDate)]}),(0,a.jsx)("div",{children:getDaysUntilDue(v.dueDate)})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Max Score"}),(0,a.jsxs)("p",{className:"fw-bold",children:[v.maxScore," points"]})]}),v.grade&&(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Your Grade"}),(0,a.jsxs)("p",{className:"fw-bold text-success",children:[v.grade," / ",v.maxScore," (",(v.grade/v.maxScore*100).toFixed(1),"%)"]})]}),v.instructions&&(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Instructions"}),(0,a.jsx)("div",{className:"p-3 bg-light rounded",children:(0,a.jsx)("p",{className:"mb-0",children:v.instructions})})]}),v.rubric&&(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Grading Rubric"}),(0,a.jsx)("div",{className:"p-3 bg-light rounded",children:(0,a.jsx)("p",{className:"mb-0",children:v.rubric})})]}),v.feedback&&(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Teacher Feedback"}),(0,a.jsx)("div",{className:"p-3 bg-info bg-opacity-10 rounded",children:(0,a.jsx)("p",{className:"mb-0",children:v.feedback})})]}),v.tags&&v.tags.length>0&&(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"text-muted small",children:"Tags"}),(0,a.jsx)("div",{className:"d-flex flex-wrap gap-2",children:v.tags.map((e,s)=>(0,a.jsx)("span",{className:"badge bg-secondary",children:e},s))})]})]})}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:"Close"}),("not_started"===v.submissionStatus||"draft"===v.submissionStatus||"resubmit"===v.submissionStatus)&&(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{k(!1),handleStartSubmission(v)},children:"Submit Assignment"})]})]})})}),C&&v&&(0,a.jsx)("div",{className:"modal show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,a.jsx)("div",{className:"modal-dialog modal-lg",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header bg-success text-white",children:[(0,a.jsxs)("h5",{className:"modal-title",children:[(0,a.jsx)(m.Z,{size:20,className:"me-2"}),"Submit Assignment: ",v.title]}),(0,a.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>I(!1)})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label fw-semibold",children:"Your Submission"}),(0,a.jsx)("textarea",{className:"form-control",rows:10,value:A,onChange:e=>T(e.target.value),placeholder:"Enter your assignment content here..."}),(0,a.jsx)("small",{className:"text-muted",children:"Write your answer or paste your content here"})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label fw-semibold",children:[(0,a.jsx)("i",{className:"fas fa-paperclip me-2"}),"Attach Files (Optional)"]}),(0,a.jsx)("input",{type:"file",className:"form-control",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",onChange:handleFileUpload,disabled:z}),(0,a.jsx)("small",{className:"text-muted",children:"You can upload images, PDFs, Word or Excel files (Max 10MB per file, up to 5 files)"}),z&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"spinner-border spinner-border-sm text-primary me-2",role:"status"}),(0,a.jsx)("span",{children:"Uploading files..."})]}),D.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("strong",{className:"d-block mb-2",children:"Uploaded Files:"}),(0,a.jsx)("div",{className:"list-group",children:D.map((e,s)=>(0,a.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("i",{className:"fas ".concat(e.mimetype.includes("image")?"fa-image":e.mimetype.includes("pdf")?"fa-file-pdf":"fa-file"," me-2")}),(0,a.jsx)("span",{children:e.originalName}),(0,a.jsxs)("small",{className:"text-muted ms-2",children:["(",(e.size/1024).toFixed(2)," KB)"]})]}),(0,a.jsx)("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>handleRemoveFile(s),children:(0,a.jsx)("i",{className:"fas fa-times"})})]},s))})]})]}),v.feedback&&"resubmit"===v.submissionStatus&&(0,a.jsxs)("div",{className:"alert alert-warning",children:[(0,a.jsx)("strong",{children:"Previous Feedback:"}),(0,a.jsx)("p",{className:"mb-0 mt-2",children:v.feedback})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>I(!1),children:"Cancel"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-success",onClick:handleSubmitAssignment,children:[(0,a.jsx)(h.Z,{size:16,className:"me-2"}),"Submit Assignment"]})]})]})})})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:i,headers:n,...r}=s,l="".concat(a).concat(e);if(i){let e=new URLSearchParams(Object.entries(i).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(l+="?".concat(e))}let c={"Content-Type":"application/json",...n};t&&(c.Authorization="Bearer ".concat(t));try{let e=await fetch(l,{...r,headers:c}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}}},function(e){e.O(0,[9461,1176,2971,2472,1744],function(){return e(e.s=5763)}),_N_E=e.O()}]);