(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{4921:function(e,s,t){Promise.resolve().then(t.bind(t,8865))},8865:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return StudentDashboard}});var a=t(7437),r=t(9738),d=t.n(r),i=t(2265),c=t(4033);t(8117);var l=t(6454);function StudentDashboard(){let e=(0,c.useRouter)(),[s,t]=(0,i.useState)("Student"),[r,n]=(0,i.useState)(""),[b,o]=(0,i.useState)(""),[m,x]=(0,i.useState)(!0),[j,h]=(0,i.useState)(new Date),[u,g]=(0,i.useState)({totalSubjects:0,pendingAssignments:0,completedAssignments:0,averageScore:0,attendanceRate:0,upcomingTests:0}),[f,N]=(0,i.useState)([]),[p,v]=(0,i.useState)([]),[y,w]=(0,i.useState)([]);(0,i.useEffect)(()=>{fetchStudentInfo(),fetchDashboardData();let e=setInterval(()=>h(new Date),6e4);return()=>clearInterval(e)},[]);let fetchStudentInfo=async()=>{try{let e=localStorage.getItem("userName"),s=localStorage.getItem("schoolName"),a=localStorage.getItem("className");if(e&&s){t(e),n(s),o(a||"");return}let r=localStorage.getItem("userId"),d=localStorage.getItem("token");if(r&&d){let e=await fetch("".concat(l.CT,"/students/by-user/").concat(r),{headers:{Authorization:"Bearer ".concat(d)}});if(e.ok){let s=await e.json(),a="".concat(s.firstName," ").concat(s.lastName);t(a),n(s.schoolName||""),o(s.className||""),localStorage.setItem("userName",a),localStorage.setItem("schoolName",s.schoolName||""),localStorage.setItem("className",s.className||""),localStorage.setItem("studentId",s.studentId)}}}catch(e){console.error("Error fetching student info:",e),t("Student"),n(""),o("")}},fetchDashboardData=async()=>{try{var e,s;x(!0);let t=localStorage.getItem("userId"),a=localStorage.getItem("token"),r=localStorage.getItem("user");if(!t&&r)try{let e=JSON.parse(r);(t=null===(s=e.id)||void 0===s?void 0:s.toString())&&localStorage.setItem("userId",t)}catch(e){console.error("Error parsing user:",e)}if(!t||!a){console.error("No user ID or token found",{userId:t,token:!!a}),x(!1);return}console.log("Fetching data for userId:",t);let d=await fetch("".concat(l.CT,"/students/by-user/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});if(!d.ok)throw console.error("Failed to fetch student data:",d.status),Error("Failed to fetch student data");let i=await d.json();console.log("Student Data:",i);let c=i.studentId||i.id;console.log("Fetching assignments for userId:",t);let n=await fetch("".concat(l.CT,"/assignments/by-student/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}}),b=[],o=0,m=0,j=0;if(n.ok){b=await n.json(),console.log("Assignments Data:",b);let e=await fetch("".concat(l.CT,"/submissions/student/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}}),s=[];e.ok&&(s=await e.json());let r=b.map(e=>{let t=s.find(s=>s.taskId===e.id);return{...e,submissionStatus:(null==t?void 0:t.status)||"not_started"}}),d=r.filter(e=>"not_started"===e.submissionStatus||"draft"===e.submissionStatus),i=r.filter(e=>"approved"===e.submissionStatus);o=d.length,m=i.length,j=d.filter(e=>"exam"===e.type||"quiz"===e.type).length;let c=d.slice(0,5).map(e=>{let s=getDaysUntil(e.dueDate),t="medium";return t=s<=1?"high":s<=3?"medium":"low",{id:e.id,subject:e.tags&&e.tags[0]||"General",title:e.title,dueDate:e.dueDate,priority:t}});N(c)}let h=await fetch("".concat(l.CT,"/submissions/student/").concat(c),{headers:{Authorization:"Bearer ".concat(a)}}),u=[],f=0,p=0;if(h.ok){let e=await h.json();console.log("Submissions Data:",e),e.forEach(e=>{null!==e.score&&void 0!==e.score&&(f+=e.score,p++)}),u=e.slice(0,5)}let y=p>0?(f/p).toFixed(1):0,S=await fetch("".concat(l.CT,"/attendance/stats/student/").concat(c),{headers:{Authorization:"Bearer ".concat(a)}}),k=0;if(S.ok){let e=await S.json();console.log("Attendance Data:",e),k=e.attendanceRate||e.percentage||0}let D=(null===(e=i.subjects)||void 0===e?void 0:e.length)||6,A=await fetch("".concat(l.CT,"/calendar/upcoming?limit=5"),{headers:{Authorization:"Bearer ".concat(a)}});if(A.ok){let e=await A.json();console.log("Calendar events:",e),w(e||[])}else console.error("Failed to fetch calendar events");g({totalSubjects:D,pendingAssignments:o,completedAssignments:m,averageScore:parseFloat(y),attendanceRate:parseFloat(k.toFixed(1)),upcomingTests:j});let T=[];u.forEach((e,s)=>{var t,a,r,d;null!==e.score&&void 0!==e.score?T.push({id:e.id,type:"grade",title:"Grade Received",description:"".concat((null===(t=e.task)||void 0===t?void 0:t.title)||"Assignment"," - ").concat((null===(r=e.task)||void 0===r?void 0:null===(a=r.subject)||void 0===a?void 0:a.name)||"Subject"),time:getTimeAgo(e.reviewedAt||e.updatedAt),score:e.score}):e.submittedAt&&T.push({id:e.id,type:"submission",title:"Assignment Submitted",description:(null===(d=e.task)||void 0===d?void 0:d.title)||"Assignment submitted",time:getTimeAgo(e.submittedAt)})}),v(T.slice(0,5))}catch(e){console.error("Error fetching dashboard data:",e),g({totalSubjects:0,pendingAssignments:0,completedAssignments:0,averageScore:0,attendanceRate:0,upcomingTests:0}),N([]),v([])}finally{x(!1)}},getTimeAgo=e=>{let s=new Date(e),t=new Date,a=t.getTime()-s.getTime(),r=Math.floor(a/6e4),d=Math.floor(a/36e5);return r<60?"".concat(r," minutes ago"):d<24?"".concat(d," hours ago"):"".concat(Math.floor(a/864e5)," days ago")},getDaysUntil=e=>{let s=new Date(e),t=new Date,a=s.getTime()-t.getTime();return Math.ceil(a/864e5)},getPriorityColor=e=>{switch(e){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"secondary"}};return m?(0,a.jsx)("div",{className:"container-fluid vh-100 d-flex justify-content-center align-items-center",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("h4",{className:"text-white mt-3",children:"Loading Dashboard..."})]})}):(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},className:"jsx-884b463b4b98302d",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d container-fluid p-4",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d row mb-4",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},className:"jsx-884b463b4b98302d card shadow-lg border-0",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white p-4",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsxs)("h1",{className:"jsx-884b463b4b98302d display-5 fw-bold mb-2",children:["Welcome back, ",s,"! \uD83D\uDC4B"]}),r&&(0,a.jsxs)("p",{className:"jsx-884b463b4b98302d fs-5 mb-2",children:[(0,a.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-building me-2"}),r]}),b&&(0,a.jsxs)("p",{className:"jsx-884b463b4b98302d fs-6 mb-2",children:[(0,a.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-mortarboard-fill me-2"}),b]}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d fs-6 mb-1",children:j.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d mb-0",children:j.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsxs)("button",{className:"jsx-884b463b4b98302d btn btn-light btn-lg rounded-circle position-relative",children:[(0,a.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-bell-fill"}),(0,a.jsxs)("span",{className:"jsx-884b463b4b98302d position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:["2",(0,a.jsx)("span",{className:"jsx-884b463b4b98302d visually-hidden",children:"unread notifications"})]})]})})]})})})})}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d row g-4 mb-4",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"My Subjects"}),(0,a.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:u.totalSubjects}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Enrolled subjects"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-book-fill"})})]})})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #ee0979 0%, #ff6a00 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Pending Tasks"}),(0,a.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:u.pendingAssignments}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"To be completed"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-clipboard-check-fill"})})]})})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Average Score"}),(0,a.jsxs)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:[u.averageScore,"%"]}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"Overall performance"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-graph-up-arrow"})})]})})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Completed Work"}),(0,a.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:u.completedAssignments}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"This semester"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-check-circle-fill"})})]})})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #7F7FD5 0%, #91EAE4 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Attendance"}),(0,a.jsxs)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:[u.attendanceRate,"%"]}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"This month"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-calendar-check-fill"})})]})})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-md-6 col-lg-4",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},className:"jsx-884b463b4b98302d card border-0 shadow h-100",children:(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body text-white",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-subtitle mb-2",children:"Upcoming Tests"}),(0,a.jsx)("h2",{className:"jsx-884b463b4b98302d card-title display-4 fw-bold",children:u.upcomingTests}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d card-text small",children:"This week"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d",children:(0,a.jsx)("i",{style:{fontSize:"3rem",opacity:.7},className:"jsx-884b463b4b98302d bi bi-file-earmark-text-fill"})})]})})})})]}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d row mb-4",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12",children:(0,a.jsx)("h3",{className:"jsx-884b463b4b98302d mb-3 fw-bold",children:"âš¡ Quick Actions"})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/student/tasks"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-primary bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-clipboard-check-fill text-primary"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"My Tasks"})]})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/student/submissions"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-success bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-upload text-success"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Submit Work"})]})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/student/grades"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-warning bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-bar-chart-fill text-warning"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"My Grades"})]})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>e.push("/student/attendance"),className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-info bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-calendar-check text-info"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Attendance"})]})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-danger bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-book-half text-danger"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Study Materials"})]})})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-6 col-md-4 col-lg-2 mb-3",children:(0,a.jsx)("div",{style:{cursor:"pointer"},className:"jsx-884b463b4b98302d card border-0 shadow-sm h-100 text-center",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-body",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d bg-secondary bg-opacity-10 rounded-circle p-3 d-inline-block mb-3",children:(0,a.jsx)("i",{style:{fontSize:"2rem"},className:"jsx-884b463b4b98302d bi bi-calendar3 text-secondary"})}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d card-title",children:"Schedule"})]})})})]}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d row g-4",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-8",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 d-flex justify-content-between align-items-center py-3",children:[(0,a.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCDD Pending Assignments"}),(0,a.jsx)("button",{onClick:()=>e.push("/student/tasks"),className:"jsx-884b463b4b98302d btn btn-sm btn-primary",children:"View All"})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:0===f.length?(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d text-center py-5 text-muted",children:[(0,a.jsx)("i",{style:{fontSize:"3rem"},className:"jsx-884b463b4b98302d bi bi-check-circle"}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d mt-3",children:"No pending assignments! Great job! \uD83C\uDF89"})]}):f.map(s=>{let t=getDaysUntil(s.dueDate);return(0,a.jsx)("div",{className:"jsx-884b463b4b98302d "+"border-start border-".concat(getPriorityColor(s.priority)," border-4 bg-light rounded p-3 mb-3"),children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d row align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d col-md-8",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-center mb-2",children:[(0,a.jsx)("span",{className:"jsx-884b463b4b98302d "+"badge bg-".concat(getPriorityColor(s.priority)," me-2"),children:s.priority.toUpperCase()}),(0,a.jsx)("span",{className:"jsx-884b463b4b98302d badge bg-secondary",children:s.subject})]}),(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d fw-bold mb-1",children:s.title}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex gap-3 small text-muted",children:[(0,a.jsxs)("span",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-calendar-event"})," Due: ",new Date(s.dueDate).toLocaleDateString("en-IN")]}),(0,a.jsxs)("span",{className:"jsx-884b463b4b98302d "+((t<=2?"text-danger fw-bold":"")||""),children:[(0,a.jsx)("i",{className:"jsx-884b463b4b98302d bi bi-clock"})," ",0===t?"Due Today!":1===t?"Due Tomorrow":"".concat(t," days left")]})]})]}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-md-4 text-md-end mt-2 mt-md-0",children:(0,a.jsx)("button",{onClick:()=>e.push("/student/submissions"),className:"jsx-884b463b4b98302d btn btn-primary",children:"Submit Work"})})]})},s.id)})})]})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-4",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow mb-4",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 py-3",children:(0,a.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCC5 Upcoming Events"})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:0===y.length?(0,a.jsx)("p",{className:"jsx-884b463b4b98302d text-muted text-center small",children:"No upcoming events"}):y.map(e=>(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-start mb-3 p-2 rounded hover-bg-light",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d rounded-circle p-2 me-3 bg-info bg-opacity-10",children:(0,a.jsx)("i",{style:{fontSize:"1.5rem"},className:"jsx-884b463b4b98302d bi bi-calendar-event-fill text-info"})}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d flex-grow-1",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d mb-1 small fw-bold",children:e.title}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d mb-1 small text-muted",children:e.description||"School Event"}),(0,a.jsxs)("div",{style:{fontSize:"0.75rem",color:"#999"},className:"jsx-884b463b4b98302d",children:[(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("strong",{className:"jsx-884b463b4b98302d",children:"Start:"})," ",new Date(e.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.endDate&&(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d",children:[(0,a.jsx)("strong",{className:"jsx-884b463b4b98302d",children:"End:"})," ",new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})]},e.id))})]})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d col-12 col-lg-4",children:(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d card border-0 shadow",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-header bg-white border-0 py-3",children:(0,a.jsx)("h5",{className:"jsx-884b463b4b98302d mb-0 fw-bold",children:"\uD83D\uDCCA Recent Activities"})}),(0,a.jsx)("div",{className:"jsx-884b463b4b98302d card-body",children:p.map(e=>(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d d-flex align-items-start mb-3 p-2 rounded hover-bg-light",children:[(0,a.jsx)("div",{className:"jsx-884b463b4b98302d "+"rounded-circle p-2 me-3 ".concat("grade"===e.type?"bg-success bg-opacity-10":"submission"===e.type?"bg-primary bg-opacity-10":"attendance"===e.type?"bg-info bg-opacity-10":"bg-warning bg-opacity-10"),children:(0,a.jsx)("i",{style:{fontSize:"1.5rem"},className:"jsx-884b463b4b98302d "+"bi ".concat("grade"===e.type?"bi-trophy-fill text-success":"submission"===e.type?"bi-file-earmark-check-fill text-primary":"attendance"===e.type?"bi-check-circle-fill text-info":"bi-megaphone-fill text-warning")})}),(0,a.jsxs)("div",{className:"jsx-884b463b4b98302d flex-grow-1",children:[(0,a.jsx)("h6",{className:"jsx-884b463b4b98302d mb-1 small fw-bold",children:e.title}),(0,a.jsx)("p",{className:"jsx-884b463b4b98302d mb-1 small text-muted",children:e.description}),e.score&&(0,a.jsx)("p",{className:"jsx-884b463b4b98302d mb-1 small",children:(0,a.jsxs)("span",{className:"jsx-884b463b4b98302d badge bg-success",children:["Score: ",e.score,"/20"]})}),(0,a.jsx)("p",{style:{fontSize:"0.75rem",color:"#999"},className:"jsx-884b463b4b98302d mb-0",children:e.time})]})]},e.id))})]})})]})]}),(0,a.jsx)(d(),{id:"884b463b4b98302d",children:".hover-bg-light.jsx-884b463b4b98302d:hover{background-color:#f8f9fa;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.card.jsx-884b463b4b98302d{-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease}.card.jsx-884b463b4b98302d:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}"})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:r,headers:d,...i}=s,c="".concat(a).concat(e);if(r){let e=new URLSearchParams(Object.entries(r).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(c+="?".concat(e))}let l={"Content-Type":"application/json",...d};t&&(l.Authorization="Bearer ".concat(t));try{let e=await fetch(c,{...i,headers:l}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},8117:function(){},622:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(2265),r=Symbol.for("react.element"),d=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,t){var a,d={},n=null,b=null;for(a in void 0!==t&&(n=""+t),void 0!==s.key&&(n=""+s.key),void 0!==s.ref&&(b=s.ref),s)i.call(s,a)&&!l.hasOwnProperty(a)&&(d[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===d[a]&&(d[a]=s[a]);return{$$typeof:r,type:e,key:n,ref:b,props:d,_owner:c.current}}s.Fragment=d,s.jsx=q,s.jsxs=q},7437:function(e,s,t){"use strict";e.exports=t(622)},4033:function(e,s,t){e.exports=t(94)}},function(e){e.O(0,[6685,9738,2971,2472,1744],function(){return e(e.s=4921)}),_N_E=e.O()}]);