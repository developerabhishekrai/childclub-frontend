(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5567],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:d=24,strokeWidth:i=2,absoluteStrokeWidth:n,children:r,...l},b)=>(0,a.createElement)("svg",{ref:b,...c,width:d,height:d,stroke:t,strokeWidth:n?24*Number(i)/Number(d):i,className:`lucide lucide-${toKebabCase(e)}`,...l},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(r)?r:[r])||[]]));return t.displayName=`${e}`,t}},3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5817:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8734:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]])},8438:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},9617:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2104:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2898);let c=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1483:function(e,s,t){Promise.resolve().then(t.bind(t,6574))},6574:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return StudentSubmissionsPage}});var a=t(7437),c=t(9738),d=t.n(c),i=t(2265),n=t(1396),r=t.n(n),l=t(6141),b=t(6637),o=t(9670),m=t(3008),x=t(2104),j=t(9617),u=t(8734),f=t(8438),h=t(3067),g=t(1827),v=t(5817),N=t(6820),p=t.n(N),y=t(6454);function StudentSubmissionsPage(){var e,s,t,c,n,N,w;let[k,S]=(0,i.useState)(""),[C,D]=(0,i.useState)("all"),[Z,E]=(0,i.useState)([]),[A,z]=(0,i.useState)(!0),[I,F]=(0,i.useState)(null),[T,L]=(0,i.useState)(!1),[R,U]=(0,i.useState)(!1),[P,M]=(0,i.useState)(""),[q,O]=(0,i.useState)([]),[B,V]=(0,i.useState)(!1);(0,i.useEffect)(()=>{fetchSubmissions()},[]);let fetchSubmissions=async()=>{try{let s=localStorage.getItem("token"),t=localStorage.getItem("userId"),a=localStorage.getItem("user");if(!t&&a)try{var e;let s=JSON.parse(a);(t=null===(e=s.id)||void 0===e?void 0:e.toString())&&localStorage.setItem("userId",t)}catch(e){console.error("Error parsing user:",e)}if(!t||!s){console.error("No user ID or token found"),z(!1);return}console.log("Fetching submissions for student userId:",t);let c=await fetch("".concat(y.CT,"/submissions/student/").concat(t),{headers:{Authorization:"Bearer ".concat(s)}});if(c.ok){let e=await c.json();console.log("Fetched submissions:",e),E(e)}else throw Error("Failed to fetch submissions")}catch(e){console.error("Error fetching submissions:",e),p().fire("Error","Failed to fetch submissions","error")}finally{z(!1)}},H=Z.filter(e=>{var s,t,a,c;let d=(null===(s=e.task)||void 0===s?void 0:s.title.toLowerCase().includes(k.toLowerCase()))||(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes(k.toLowerCase()))||(null===(c=e.task)||void 0===c?void 0:null===(a=c.description)||void 0===a?void 0:a.toLowerCase().includes(k.toLowerCase())),i="all"===C||e.status===C;return d&&i}),handleViewSubmission=e=>{F(e),L(!0)},handleEditSubmission=e=>{F(e),M(e.content||""),O(e.attachments||[]),U(!0)},handleFileUpload=async e=>{let s=e.target.files;if(s&&0!==s.length){if(q.length+s.length>5){p().fire("Error","Maximum 5 files allowed","error");return}V(!0);try{let e=localStorage.getItem("token"),t=Array.from(s).map(async s=>{if(s.size>10485760)throw Error("File ".concat(s.name," exceeds 10MB limit"));let t=new FormData;t.append("file",s);let a=await fetch("".concat(y.CT,"/uploads/submission"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});if(a.ok)return await a.json();throw Error("Upload failed")}),a=await Promise.all(t);O(e=>[...e,...a]),p().fire("Success","Files uploaded successfully!","success")}catch(e){console.error("Error uploading files:",e),p().fire("Error",e.message||"Failed to upload files","error")}finally{V(!1)}}},handleRemoveFile=e=>{O(s=>s.filter((s,t)=>t!==e))},handleUpdateSubmission=async()=>{if(I)try{let e=localStorage.getItem("token"),s={content:P,attachments:q,status:"submitted",submittedAt:new Date().toISOString()},t=await fetch("".concat(y.CT,"/submissions/").concat(I.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok)p().fire("Success","Submission updated successfully!","success"),U(!1),fetchSubmissions();else throw Error("Failed to update submission")}catch(e){console.error("Error updating submission:",e),p().fire("Error","Failed to update submission","error")}},getStatusBadge=e=>{let s={draft:{color:"bg-warning",text:"Draft",icon:l.Z},submitted:{color:"bg-info",text:"Submitted",icon:b.Z},reviewed:{color:"bg-primary",text:"Reviewed",icon:o.Z},approved:{color:"bg-success",text:"Approved",icon:m.Z},rejected:{color:"bg-danger",text:"Rejected",icon:x.Z},resubmit:{color:"bg-warning",text:"Resubmit",icon:j.Z}},t=s[e]||s.draft,c=t.icon;return(0,a.jsxs)("span",{className:"badge ".concat(t.color," d-inline-flex align-items-center gap-1"),children:[(0,a.jsx)(c,{size:14}),t.text]})},getFileIcon=e=>{var s;if(!e)return(0,a.jsx)(u.Z,{size:20});let t=null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(t||"")?(0,a.jsx)(f.Z,{size:20}):(0,a.jsx)(u.Z,{size:20})},formatDate=e=>e?new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",getDaysFromDue=(e,s)=>{if(!e||!s)return null;let t=new Date(e).getTime(),a=new Date(s).getTime();return Math.ceil((a-t)/864e5)};return A?(0,a.jsx)("div",{className:"container-fluid vh-100 d-flex justify-content-center align-items-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("h4",{className:"text-white mt-3",children:"Loading Submissions..."})]})}):(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},className:"jsx-b24258754c1bd3fb",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb container-fluid p-4",children:[(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb row mb-4",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-12",children:(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},className:"jsx-b24258754c1bd3fb card border-0 shadow-lg",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body text-white p-4",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsxs)(r(),{href:"/student/dashboard",className:"btn btn-light btn-sm mb-3",children:[(0,a.jsx)(h.Z,{size:16,className:"me-2"}),"Back to Dashboard"]}),(0,a.jsx)("h1",{className:"jsx-b24258754c1bd3fb display-5 fw-bold mb-2",children:"\uD83D\uDCE4 My Submissions"}),(0,a.jsx)("p",{className:"jsx-b24258754c1bd3fb mb-0 opacity-75",children:"View and manage all your submitted work"})]})})})})})}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb row g-3 mb-4",children:[(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Total"}),(0,a.jsx)("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:Z.length})]}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb bg-primary bg-opacity-10 rounded-circle p-3",children:(0,a.jsx)(b.Z,{className:"text-primary",size:24})})]})})})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Submitted"}),(0,a.jsx)("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:Z.filter(e=>"submitted"===e.status).length})]}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb bg-info bg-opacity-10 rounded-circle p-3",children:(0,a.jsx)(l.Z,{className:"text-info",size:24})})]})})})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Approved"}),(0,a.jsx)("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:Z.filter(e=>"approved"===e.status).length})]}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb bg-success bg-opacity-10 rounded-circle p-3",children:(0,a.jsx)(m.Z,{className:"text-success",size:24})})]})})})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-muted mb-1",children:"Avg Score"}),(0,a.jsx)("h3",{className:"jsx-b24258754c1bd3fb mb-0 fw-bold",children:Z.filter(e=>e.grade).length>0?(Z.reduce((e,s)=>e+(s.grade||0),0)/Z.filter(e=>e.grade).length).toFixed(1):"N/A"})]}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb bg-warning bg-opacity-10 rounded-circle p-3",children:(0,a.jsx)(b.Z,{className:"text-warning",size:24})})]})})})})]}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb row mb-4",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-12",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb row g-3",children:[(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-6",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb input-group",children:[(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb input-group-text bg-white",children:(0,a.jsx)(g.Z,{size:20})}),(0,a.jsx)("input",{type:"text",placeholder:"Search by assignment title or content...",value:k,onChange:e=>S(e.target.value),className:"jsx-b24258754c1bd3fb form-control"})]})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3",children:(0,a.jsxs)("select",{value:C,onChange:e=>D(e.target.value),className:"jsx-b24258754c1bd3fb form-select",children:[(0,a.jsx)("option",{value:"all",className:"jsx-b24258754c1bd3fb",children:"All Status"}),(0,a.jsx)("option",{value:"draft",className:"jsx-b24258754c1bd3fb",children:"Draft"}),(0,a.jsx)("option",{value:"submitted",className:"jsx-b24258754c1bd3fb",children:"Submitted"}),(0,a.jsx)("option",{value:"reviewed",className:"jsx-b24258754c1bd3fb",children:"Reviewed"}),(0,a.jsx)("option",{value:"approved",className:"jsx-b24258754c1bd3fb",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",className:"jsx-b24258754c1bd3fb",children:"Rejected"}),(0,a.jsx)("option",{value:"resubmit",className:"jsx-b24258754c1bd3fb",children:"Resubmit Required"})]})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-md-3 text-end",children:(0,a.jsx)("button",{onClick:()=>{S(""),D("all")},className:"jsx-b24258754c1bd3fb btn btn-primary",children:"Clear Filters"})})]})})})})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb row",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb col-12",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card border-0 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card-body",children:0===H.length?(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb text-center py-5",children:[(0,a.jsx)(b.Z,{size:64,className:"text-muted mb-3"}),(0,a.jsx)("h5",{className:"jsx-b24258754c1bd3fb text-muted",children:"No submissions found"}),(0,a.jsx)("p",{className:"jsx-b24258754c1bd3fb text-muted",children:k||"all"!==C?"Try adjusting your filters":"You haven't submitted any assignments yet"})]}):(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb table-responsive",children:(0,a.jsxs)("table",{className:"jsx-b24258754c1bd3fb table table-hover",children:[(0,a.jsx)("thead",{className:"jsx-b24258754c1bd3fb",children:(0,a.jsxs)("tr",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Assignment"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Subject"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Status"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Submitted At"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Grade"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Attachments"}),(0,a.jsx)("th",{className:"jsx-b24258754c1bd3fb",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"jsx-b24258754c1bd3fb",children:H.map(e=>{var s,t,c,d,i,n,r;let l=getDaysFromDue((null===(s=e.task)||void 0===s?void 0:s.dueDate)||"",e.submittedAt);return(0,a.jsxs)("tr",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb mb-1",children:(null===(t=e.task)||void 0===t?void 0:t.title)||"Untitled"}),(0,a.jsxs)("small",{className:"jsx-b24258754c1bd3fb text-muted",children:["Due: ",formatDate((null===(c=e.task)||void 0===c?void 0:c.dueDate)||"")]}),null!==l&&l>0&&(0,a.jsxs)("span",{className:"jsx-b24258754c1bd3fb badge bg-danger ms-2",children:[l," day",l>1?"s":""," late"]})]})}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb badge bg-secondary",children:(null===(i=e.task)||void 0===i?void 0:null===(d=i.subject)||void 0===d?void 0:d.name)||(null===(n=e.task)||void 0===n?void 0:n.type)||"General"})}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:getStatusBadge(e.status)}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:(0,a.jsx)("small",{className:"jsx-b24258754c1bd3fb",children:formatDate(e.submittedAt)})}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:null!==e.grade?(0,a.jsxs)("strong",{className:"jsx-b24258754c1bd3fb text-success",children:[e.grade,"/",(null===(r=e.task)||void 0===r?void 0:r.maxScore)||20]}):(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb text-muted",children:"Not graded"})}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:e.attachments&&e.attachments.length>0?(0,a.jsxs)("span",{className:"jsx-b24258754c1bd3fb badge bg-info",children:[e.attachments.length," file",e.attachments.length>1?"s":""]}):(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb text-muted",children:"None"})}),(0,a.jsx)("td",{className:"jsx-b24258754c1bd3fb",children:(0,a.jsxs)("div",{role:"group",className:"jsx-b24258754c1bd3fb btn-group",children:[(0,a.jsx)("button",{onClick:()=>handleViewSubmission(e),title:"View Details",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-primary",children:(0,a.jsx)(o.Z,{size:16})}),("draft"===e.status||"resubmit"===e.status)&&(0,a.jsx)("button",{onClick:()=>handleEditSubmission(e),title:"Edit Submission",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-warning",children:(0,a.jsx)(j.Z,{size:16})})]})})]},e.id)})})]})})})})})})]}),T&&I&&(0,a.jsx)("div",{style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"jsx-b24258754c1bd3fb modal show d-block",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb modal-dialog modal-lg modal-dialog-scrollable",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-content",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-header",children:[(0,a.jsx)("h5",{className:"jsx-b24258754c1bd3fb modal-title",children:"Submission Details"}),(0,a.jsx)("button",{type:"button",onClick:()=>L(!1),className:"jsx-b24258754c1bd3fb btn-close"})]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-body",children:[(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-primary mb-3",children:"\uD83D\uDCDD Assignment Information"}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb row",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Title:"})," ",null===(e=I.task)||void 0===e?void 0:e.title]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Type:"})," ",null===(s=I.task)||void 0===s?void 0:s.type]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Due Date:"})," ",formatDate((null===(t=I.task)||void 0===t?void 0:t.dueDate)||"")]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Max Score:"})," ",(null===(c=I.task)||void 0===c?void 0:c.maxScore)||20]})]}),(null===(n=I.task)||void 0===n?void 0:n.description)&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mt-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Description:"}),(0,a.jsx)("p",{className:"jsx-b24258754c1bd3fb mb-0 mt-1",children:I.task.description})]})]})}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-success mb-3",children:"\uD83D\uDCE4 Your Submission"}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb row mb-3",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Status:"})," ",getStatusBadge(I.status)]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Submitted:"})," ",formatDate(I.submittedAt)]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-4 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Attempts:"})," ",I.attempts]})]}),I.content&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Content:"}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb p-3 bg-light rounded mt-2",children:I.content})]}),I.attachments&&I.attachments.length>0&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Attachments:"}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb list-group mt-2",children:I.attachments.map((e,s)=>(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb list-group-item d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex align-items-center",children:[getFileIcon(e.filename),(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb ms-2",children:e.filename})]}),(0,a.jsx)("a",{href:"".concat(y.CT).concat(e.path),target:"_blank",rel:"noopener noreferrer",className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-primary",children:(0,a.jsx)(v.Z,{size:16})})]},s))})]})]})}),(null!==I.grade||I.feedback)&&(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb card mb-3",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb card-body",children:[(0,a.jsx)("h6",{className:"jsx-b24258754c1bd3fb text-info mb-3",children:"\uD83D\uDCCA Teacher's Feedback"}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb row",children:[null!==I.grade&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Grade:"})," ",(0,a.jsxs)("span",{className:"jsx-b24258754c1bd3fb fs-4 text-success",children:[I.grade,"/",(null===(N=I.task)||void 0===N?void 0:N.maxScore)||20]})]}),I.reviewedAt&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb col-md-6 mb-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Reviewed At:"})," ",formatDate(I.reviewedAt)]})]}),I.feedback&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mt-2",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Feedback:"}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb p-3 bg-light rounded mt-2",children:I.feedback})]}),I.reviewer&&(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb mt-2",children:(0,a.jsxs)("small",{className:"jsx-b24258754c1bd3fb text-muted",children:["Reviewed by: ",I.reviewer.firstName," ",I.reviewer.lastName]})})]})})]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-footer",children:[(0,a.jsx)("button",{type:"button",onClick:()=>L(!1),className:"jsx-b24258754c1bd3fb btn btn-secondary",children:"Close"}),("draft"===I.status||"resubmit"===I.status)&&(0,a.jsxs)("button",{type:"button",onClick:()=>{L(!1),handleEditSubmission(I)},className:"jsx-b24258754c1bd3fb btn btn-primary",children:[(0,a.jsx)(j.Z,{size:16,className:"me-2"}),"Edit Submission"]})]})]})})}),R&&I&&(0,a.jsx)("div",{style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"jsx-b24258754c1bd3fb modal show d-block",children:(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb modal-dialog modal-lg modal-dialog-scrollable",children:(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-content",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-header",children:[(0,a.jsxs)("h5",{className:"jsx-b24258754c1bd3fb modal-title",children:["Edit Submission - ",null===(w=I.task)||void 0===w?void 0:w.title]}),(0,a.jsx)("button",{type:"button",onClick:()=>U(!1),className:"jsx-b24258754c1bd3fb btn-close"})]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-body",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[(0,a.jsx)("label",{className:"jsx-b24258754c1bd3fb form-label",children:(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Content:"})}),(0,a.jsx)("textarea",{rows:6,value:P,onChange:e=>M(e.target.value),placeholder:"Enter your submission content here...",className:"jsx-b24258754c1bd3fb form-control"})]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[(0,a.jsx)("label",{className:"jsx-b24258754c1bd3fb form-label",children:(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Attachments:"})}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx",onChange:handleFileUpload,disabled:B||q.length>=5,className:"jsx-b24258754c1bd3fb form-control"}),(0,a.jsx)("small",{className:"jsx-b24258754c1bd3fb text-muted",children:"Max 5 files, 10MB each. Supported: Images, PDF, Word, Excel"})]}),q.length>0&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb mb-3",children:[(0,a.jsx)("strong",{className:"jsx-b24258754c1bd3fb",children:"Uploaded Files:"}),(0,a.jsx)("div",{className:"jsx-b24258754c1bd3fb list-group mt-2",children:q.map((e,s)=>(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb list-group-item d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb d-flex align-items-center",children:[getFileIcon(e.filename),(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb ms-2",children:e.filename})]}),(0,a.jsx)("button",{onClick:()=>handleRemoveFile(s),className:"jsx-b24258754c1bd3fb btn btn-sm btn-outline-danger",children:"Remove"})]},s))})]}),B&&(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb text-center",children:[(0,a.jsx)("div",{role:"status",className:"jsx-b24258754c1bd3fb spinner-border text-primary",children:(0,a.jsx)("span",{className:"jsx-b24258754c1bd3fb visually-hidden",children:"Uploading..."})}),(0,a.jsx)("p",{className:"jsx-b24258754c1bd3fb mt-2",children:"Uploading files..."})]})]}),(0,a.jsxs)("div",{className:"jsx-b24258754c1bd3fb modal-footer",children:[(0,a.jsx)("button",{type:"button",onClick:()=>U(!1),className:"jsx-b24258754c1bd3fb btn btn-secondary",children:"Cancel"}),(0,a.jsxs)("button",{type:"button",onClick:handleUpdateSubmission,disabled:B,className:"jsx-b24258754c1bd3fb btn btn-primary",children:[(0,a.jsx)(m.Z,{size:16,className:"me-2"}),"Update & Submit"]})]})]})})}),(0,a.jsx)(d(),{id:"b24258754c1bd3fb",children:".modal.jsx-b24258754c1bd3fb{display:block;overflow-y:auto}.table.jsx-b24258754c1bd3fb th.jsx-b24258754c1bd3fb{background-color:#f8f9fa;font-weight:600}.card.jsx-b24258754c1bd3fb{-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease}.card.jsx-b24258754c1bd3fb:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important;box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}"})]})}},6454:function(e,s,t){"use strict";t.d(s,{CT:function(){return a},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let a="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,s,t){super(s),this.status=e,this.message=s,this.data=t,this.name="ApiError"}};async function apiRequest(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,params:c,headers:d,...i}=s,n="".concat(a).concat(e);if(c){let e=new URLSearchParams(Object.entries(c).reduce((e,s)=>{let[t,a]=s;return null!=a&&(e[t]=String(a)),e},{})).toString();e&&(n+="?".concat(e))}let r={"Content-Type":"application/json",...d};t&&(r.Authorization="Bearer ".concat(t));try{let e=await fetch(n,{...i,headers:r}),s=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,s.message||"Request failed with status ".concat(e.status),s);return s}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,s){return apiRequest(e,{...s,method:"GET"})}async function apiPost(e,s,t){return apiRequest(e,{...t,method:"POST",body:s?JSON.stringify(s):void 0})}async function apiPut(e,s,t){return apiRequest(e,{...t,method:"PUT",body:s?JSON.stringify(s):void 0})}async function apiPatch(e,s,t){return apiRequest(e,{...t,method:"PATCH",body:s?JSON.stringify(s):void 0})}async function apiDelete(e,s){return apiRequest(e,{...s,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}}},function(e){e.O(0,[9461,1176,9738,2971,2472,1744],function(){return e(e.s=1483)}),_N_E=e.O()}]);