(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5920],{4719:function(e,t,n){Promise.resolve().then(n.bind(n,5776))},5776:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return AdminLogin}});var r=n(7437),s=n(2265),a=n(1396),o=n.n(a),i=n(4033),c=n(6454);function AdminLogin(){let[e,t]=(0,s.useState)({email:"",password:""}),[n,a]=(0,s.useState)(!1),[l,d]=(0,s.useState)(""),m=(0,i.useRouter)(),handleChange=n=>{t({...e,[n.target.name]:n.target.value})},handleSubmit=async t=>{t.preventDefault(),a(!0),d("");try{let t=await fetch("".concat(c.CT,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,role:"school_admin"})});if(t.ok){let e=await t.json();(0,c.mB)(e.access_token),(0,c.c7)(e.user),localStorage.setItem("userRole","school_admin"),m.push("/school-admin/dashboard")}else{let e=await t.json();d(e.message||"Login failed")}}catch(e){d("Network error. Please try again.")}finally{a(!1)}};return(0,r.jsx)("div",{className:"min-vh-100 bg-light d-flex align-items-center",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("div",{className:"bg-warning rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"64px",height:"64px"},children:(0,r.jsx)("span",{className:"text-white fs-1",children:"\uD83C\uDFEB"})}),(0,r.jsx)("h1",{className:"h3 fw-bold text-dark",children:"School Admin Portal"}),(0,r.jsx)("p",{className:"text-muted",children:"Access your school management dashboard"})]}),(0,r.jsx)("div",{className:"card shadow-sm border-0",children:(0,r.jsxs)("div",{className:"card-body p-4",children:[l&&(0,r.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[l,(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:()=>d("")})]}),(0,r.jsxs)("form",{onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label fw-semibold",children:"Email Address"}),(0,r.jsx)("input",{type:"email",className:"form-control form-control-lg",id:"email",name:"email",value:e.email,onChange:handleChange,placeholder:"Enter your email",required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"password",className:"form-label fw-semibold",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"form-control form-control-lg",id:"password",name:"password",value:e.password,onChange:handleChange,placeholder:"Enter your password",required:!0})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",id:"rememberMe"}),(0,r.jsx)("label",{className:"form-check-label text-muted",htmlFor:"rememberMe",children:"Remember me"})]}),(0,r.jsx)(o(),{href:"/admin/forgot-password",className:"text-decoration-none text-primary",children:"Forgot password?"})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-warning btn-lg w-100 mb-3",disabled:n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing in..."]}):"Sign In to Dashboard"})]}),(0,r.jsx)("div",{className:"text-center my-3",children:(0,r.jsx)("span",{className:"text-muted",children:"or"})}),(0,r.jsx)("div",{className:"d-grid gap-2",children:(0,r.jsxs)("button",{className:"btn btn-outline-secondary btn-lg",children:[(0,r.jsx)("span",{className:"me-2",children:"\uD83D\uDCE7"}),"Continue with Email"]})}),(0,r.jsxs)("div",{className:"text-center mt-4",children:[(0,r.jsx)("span",{className:"text-muted",children:"Don't have an admin account? "}),(0,r.jsx)(o(),{href:"/admin/register",className:"text-decoration-none text-warning fw-semibold",children:"Register here"})]})]})}),(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)(o(),{href:"/",className:"text-decoration-none text-muted",children:"â† Back to Home"})})]})})})})}},6454:function(e,t,n){"use strict";n.d(t,{CT:function(){return r},MS:function(){return ApiError},QW:function(){return apiDelete},R1:function(){return apiGet},Uh:function(){return clearAuthData},c7:function(){return storeUser},hV:function(){return getStoredToken},mB:function(){return storeToken},nc:function(){return apiPatch},pE:function(){return apiPut},sg:function(){return apiPost},vF:function(){return getStoredUser}});let r="http://localhost:3001";let ApiError=class ApiError extends Error{constructor(e,t,n){super(t),this.status=e,this.message=t,this.data=n,this.name="ApiError"}};async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:n,params:s,headers:a,...o}=t,i="".concat(r).concat(e);if(s){let e=new URLSearchParams(Object.entries(s).reduce((e,t)=>{let[n,r]=t;return null!=r&&(e[n]=String(r)),e},{})).toString();e&&(i+="?".concat(e))}let c={"Content-Type":"application/json",...a};n&&(c.Authorization="Bearer ".concat(n));try{let e=await fetch(i,{...o,headers:c}),t=await e.json().catch(()=>({}));if(!e.ok)throw new ApiError(e.status,t.message||"Request failed with status ".concat(e.status),t);return t}catch(e){if(e instanceof ApiError)throw e;throw new ApiError(0,e instanceof Error?e.message:"Network error occurred")}}async function apiGet(e,t){return apiRequest(e,{...t,method:"GET"})}async function apiPost(e,t,n){return apiRequest(e,{...n,method:"POST",body:t?JSON.stringify(t):void 0})}async function apiPut(e,t,n){return apiRequest(e,{...n,method:"PUT",body:t?JSON.stringify(t):void 0})}async function apiPatch(e,t,n){return apiRequest(e,{...n,method:"PATCH",body:t?JSON.stringify(t):void 0})}async function apiDelete(e,t){return apiRequest(e,{...t,method:"DELETE"})}function getStoredToken(){return localStorage.getItem("token")}function storeToken(e){localStorage.setItem("token",e)}function removeToken(){localStorage.removeItem("token")}function getStoredUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}function storeUser(e){localStorage.setItem("user",JSON.stringify(e))}function removeUser(){localStorage.removeItem("user")}function clearAuthData(){removeToken(),removeUser(),localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("userData")}},4033:function(e,t,n){e.exports=n(94)}},function(e){e.O(0,[1176,2971,2472,1744],function(){return e(e.s=4719)}),_N_E=e.O()}]);